/*! For license information please see bundle.editorial.js.LICENSE.txt */
/* nemo v170.0.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("microkernel"),require("core-application"),require("core-global"),require("core-utils"),require("core-vendor")):"function"==typeof define&&define.amd?define("editorial",["microkernel","core-application","core-global","core-utils","core-vendor"],t):"object"==typeof exports?exports.editorial=t(require("microkernel"),require("core-application"),require("core-global"),require("core-utils"),require("core-vendor")):e.editorial=t(e.microkernel,e["core-application"],e["core-global"],e["core-utils"],e["core-vendor"])}(globalThis,((e,t,n,a,i)=>(()=>{var o,r={558:(e,t,n)=>{let a="";SETUPS.get("nemo.url.static")&&SETUPS.get("nemo.staticversion")&&(a=`${location.origin}${SETUPS.get("nemo.url.static")}.${SETUPS.get("nemo.staticversion")}`),n.p=a+"/cms4i-nemo/build/"},799:e=>{"use strict";e.exports=t},386:e=>{"use strict";e.exports=n},39:e=>{"use strict";e.exports=a},954:e=>{"use strict";e.exports=i},214:t=>{"use strict";t.exports=e}},l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return r[e](n,n.exports,s),n.exports}s.m=r,s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>"bundle."+(60===e?"panorama-three":e)+".js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},s.l=(e,t,n,a)=>{if(o[e])o[e].push(t);else{var i,r;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==e){i=c;break}}i||(r=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=e),o[e]=[t];var u=(t,n)=>{i.onerror=i.onload=null,clearTimeout(m);var a=o[e];if(delete o[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),r&&document.head.appendChild(i)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!e;)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={16:0};s.f.j=(t,n)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var i=new Promise(((n,i)=>a=e[t]=[n,i]));n.push(a[2]=i);var o=s.p+s.u(t),r=new Error;s.l(o,(n=>{if(s.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,a[1](r)}}),"chunk-"+t,t)}};var t=(t,n)=>{var a,i,[o,r,l]=n,d=0;if(o.some((t=>0!==e[t]))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)l(s)}for(t&&t(n);d<o.length;d++)i=o[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=globalThis.webpackChunk=globalThis.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var d={};return(()=>{"use strict";s.r(d),s.d(d,{InteractiveImageRotation:()=>_,MessageLayerElement:()=>Y,ModalLayerInterstitialElement:()=>K,cookieModal:()=>e,footnote:()=>a,gsaSearch:()=>o,iframe:()=>u,iframeHeight:()=>g,inlineMediagallery:()=>T,interactiveImageSlider:()=>N,interstitialLayer:()=>j,layerMultiStage:()=>de,mediagalleryController:()=>H,mediagalleryCounter:()=>F,mediagalleryDownload:()=>z,mediagalleryModel:()=>B,mediagalleryStage:()=>U,mediagalleryThumbnailSlider:()=>X,navigation:()=>Pe,notificationBar:()=>J,pageService:()=>ae,panorama:()=>te,patchDealerLinks:()=>ie,renderStage:()=>le,stage:()=>ue,swipeStage:()=>f,videoControlsTemplate:()=>G,videoNew:()=>I});const e=new class{constructor(){window.Bootstrapper&&this._initialize()}_initialize(){this._handleClick=this._handleClick.bind(this),this._bindListenerToCookieLinks()}_bindListenerToCookieLinks(){[...document.querySelectorAll(".audi-cookie-modal-link")].forEach((e=>{e.addEventListener("click",this._handleClick)}))}_handleClick(e){e.preventDefault(),window.Bootstrapper&&null!==window.Bootstrapper&&(Bootstrapper.gateway&&Bootstrapper.gateway.openModal?(Bootstrapper.gateway.openModal(),document.body.scrollTop=0):console.error("Unable to call Bootstrapper.gateway.openModal"))}};var t=s(214);class n{constructor(){if(n._instance)return n._instance;SETUPS.get("nemo.footnote-engine.active")||(this._hideOrShowFootnote=this._hideOrShowFootnote.bind(this),t.stateRegistry.subscribeToStore("dbadPageStoreFootnotes",this._hideOrShowFootnote)),n._instance=this}_bindElements(){this.footnoteElements=document.getElementsByClassName("audi-footnotes")}_hideOrShowFootnote(e){this._bindElements();let t=this.footnoteElements.length;for(let n=0;n<t;n+=1){let t=this.footnoteElements[n];e.isNemoHome?t.classList.add("nm-hidden"):t.classList.remove("nm-hidden")}}}const a=new n;var i,o,r=s(799);o={__:i={}},i.pending=!1,i.initialize=function(){i.addEvents(),i.$SearchResultEl=jQuery(".gsa-search-result"),i.$SearchResultEl.length>0&&(i.baseSearchURL=i.$SearchResultEl.attr("data-searchurl"),i.onHashChange())},i.processReturnedData=function(e){const t=document.querySelector("body"),n=o.getSearchQueryString(),a=jQuery(jQuery.parseHTML(e));let r=0;const l=parseInt(a.find(".lists-pagination .is-selected").text(),10);a.find(".dropdown-search-sort").hide(),a.find("a[data-tracking]").each((function(){r++;let e=jQuery(this);e.attr("data-tracking-pos",10*(l-1)+r),e.addClass("audi-j-search-result"),e.removeAttr("data-tracking")})),t.classList.add("audi-j-tracking-search"),t.setAttribute("data-search-name","primary main searchfield"),t.setAttribute("data-search-term",n),t.setAttribute("data-search-results",a.find(".search-results-count b").text()),i.$SearchResultEl.html(a)},i.search=async function(e){i.pending=!0;try{const t=await fetch(e),n=await t.text();i.processReturnedData(n)}catch(e){console.log("GSA Error:"+e.message),i.$SearchResultEl.html('<div class="nm-error">'+i.$SearchResultEl.attr("data-errormessage")+"</div>")}i.pending=!1,i.eventBus.emit(r.appEvents.SEARCH_LOADED)},i.addEvents=function(){i.legacyEventBus.on("click","a[data-gsa]",i.handleNewSearchClick),i.eventBus.on(r.appEvents.HASH_CHANGE,i.onHashChange)},i.handleNewSearchClick=function(e){e.preventDefault();const t=jQuery(this).attr("data-gsa"),n=i.baseSearchURL+t;i.search(n)},i.onHashChange=function(){var e=o.getSearchQueryString(),t=i.baseSearchURL+"&q="+e;e&&i.search(t)},o.getSearchQueryString=function(e){var t=(e||window).location.hash.replace("#","").replace(/</g,"").replace(/>/g,"").split("&"),n=null;for(let e=0;e<t.length;e++)0===t[e].search("search=")&&(n=t[e].replace("search=",""));return n},o.hasPendingResults=function(){return i.pending},o.initialize=function(e){i.eventBus=e,i.legacyEventBus=jQuery("body"),i.initialize()};var l=s(386),c={},u={__:c};c.oDefaults={module:".nm-j-iframe"},c.eventBus=null,c.addEvents=function(){c.eventBus.on(r.appEvents.PAGE_LOADED,c.setIframeUrl),c.eventBus.on(r.appEvents.LAYER_LOADED,c.setIframeUrl),c.eventBus.on(r.appEvents.CONFIG_UPDATE,c.setIframeUrl)},c.getIframeContainer=function(e){return!!e&&[].slice.call(e.querySelectorAll(c.oDefaults.module))},c.getContext=function(e){return e&&!e.context?e.domElement||e.element:document},c.setIframeUrl=function(e){var t,n=c.getContext(e);(t=c.getIframeContainer(n))&&t.length>0&&t.forEach((function(e){var t,n,a;t=e.getAttribute("data-pattern")||"",n=e.getAttribute("data-src")||"",a=e.getAttribute("data-height")||"0";let i=e.getElementsByTagName("script");t&&n&&l.patternMatching.getReplacedUrl(t,n).then((function(t){const n=document.createElement("iframe");n.setAttribute("src",t),n.setAttribute("height",a),n.setAttribute("frameborder","0"),i.length>0?e.insertBefore(n,i[0]):e.innerHTML='<iframe src="'+t+'" height="'+a+'" frameborder="0" ></iframe>'})).catch((function(e){console.error(e)}))}))},u.initialize=function(e){c.eventBus=e,c.addEvents(),setTimeout(c.setIframeUrl,250)};var m={},g={__:m};m.getIframeForUrl=function(e){var t,n,a=document.querySelector('iframe[src*="'+e+'"]');return null===a&&((t=document.createElement("a")).href=e,n=t.pathname,a=document.querySelector('iframe[src*="'+n+'"]')),jQuery(a)},m.toggleShader=function(e,t){var n=m.getIframeForUrl(t),a=jQuery(".nm-header").height(),i=window.document.body.offsetHeight,o=n.height();e?(n.css({zIndex:101,position:"relative"}),(window.document.body.offsetWidth<=479||i-70<=o)&&n.css({top:-a}),jQuery("body").addClass("nm-carpark-shader-visible"),r.layerAnimation.showShader()):(jQuery("body").removeClass("nm-carpark-shader-visible"),r.layerAnimation.hideShader(),n.css({position:"static",top:0}))},m.parseJsonDataFromEvent=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if("string"==typeof t)try{t=window.JSON.parse(e.data)}catch(e){console.warn(e)}return t},m.removeClassFromModule=function(e){var t,n,a;e&&(t=e.closest(".nm-md-iframe")[0])&&(n=t.classList,[].slice.call(n).forEach((function(e,t){e.indexOf("nm-md-iframe-pageformat-")>=0&&(a=n[t],n.remove(a))})))},m.setAndAnimateIframeHeight=function(e,t){var n,a=m.getIframeForUrl(e);m.removeClassFromModule(a),n=parseInt(t,10)+"px",a.animate({height:n},400,"swing",(function(){a.animate({opacity:1})}))},m.setIframeHeight=function(e,t,n){var a,i=m.getIframeForUrl(n);m.removeClassFromModule(i),a=parseInt(t,10)+"px",i.height(a)},m.handler=function(e){var t;void 0!==e&&void 0!==e.data&&(t=m.parseJsonDataFromEvent(e))&&(t.originurl&&t.layerExternalizerBridgeSetHeight?m.setAndAnimateIframeHeight(t.originurl,t.layerExternalizerBridgeSetHeight):t.height?m.setIframeHeight(e.origin,t.height,t.url):t.shader&&m.toggleShader("show"===t.shader,t.url))},m.addEvents=function(){window.addEventListener?window.addEventListener("message",m.handler,!1):window.attachEvent("onmessage",m.handler)},g.initialize=function(){m.addEvents()};var h=s(39);const v={},f={__:v};let p,y={x:0,y:0},S="none",E=0,C=0,D={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},w=!1,b="desktopdevice";v.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},v.handleMouseDown=function(e){w=!1,"select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&"option"!==e.target.nodeName.toLowerCase()&&(w=!0),C=0,E=0,y.x=e.pageX||e.originalEvent.changedTouches[0].pageX,y.y=e.pageY||e.originalEvent.changedTouches[0].pageY,p.off(D[b].up,v.handleMouseUp).on(D[b].up,v.handleMouseUp),v.isTouchDevice()||p.off(D[b].move,v.handleMouseMove).on(D[b].move,v.handleMouseMove)},v.triggerStageViewChange=function(e){"right"===e?jQuery("li.nm-backarrow").trigger("click.stage.remote"):jQuery("li.nm-nextarrow").trigger("click.stage.remote")},v.handleMouseUp=function(e){w=!1,E=y.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),C=y.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),S=E>0?"left":"right",Math.abs(E)>25&&Math.abs(C)<25&&v.triggerStageViewChange(S)},v.handleMouseMove=function(e){w&&(E=y.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),C=y.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),S=E>0?"left":"right",Math.abs(E)>25&&Math.abs(C)<25&&(v.removeSwipeEvents(),w=!1,v.triggerStageViewChange(S)))},v.removeSwipeEvents=function(){p.off(D[b].move,v.handleMouseMove),p.off(D[b].up,v.handleMouseUp)},f.disableSwipe=function(){p.off(D[b].move,v.handleMouseMove),p.off(D[b].up,v.handleMouseUp),p.off(D[b].down,v.handleMouseDown)},f.enableSwipe=function(){p.off(D[b].down,v.handleMouseDown).on(D[b].down,v.handleMouseDown)},v.addEvents=function(){p=jQuery(".nm-stage"),v.isTouchDevice()&&(b="touchdevice"),p.find("img").on("dragstart",(function(e){e.preventDefault()})),p.off(D[b].down,v.handleMouseDown).on(D[b].down,v.handleMouseDown)},f.initialize=function(e){v.eventBus=e,v.addEvents(),v.eventBus.on(r.appEvents.PAGE_LOADED,v.addEvents),v.eventBus.on(r.appEvents.UPDATE_VIEW_STATE,v.addEvents)};const L={delayIntervallId:"",aAllAutoplayVideos:[],aPlayedVideos:[]},I={__:L};L.getCurrentVideoContainer=function(e){var t,n,a=h.dom.getElementsArray(".nm-video");if(a&&e&&e.nodeType)for(n=a.length,t=0;t<n;t++)if(a[t].contains(e))return a[t];return null},L.getVideo=function(e){return e?e.querySelector("video"):null},L.getLayerHead=function(e){return L.findClosest(e,".nm-layer-head")},L.setDataVideoState=function(e,t){t&&t.setAttribute("data-video-state",e)},L.handlerPlayButton=function(){var e=L.getCurrentVideoContainer(this),t=L.getVideo(e),n=L.getLayerHead(e);t&&(t.addEventListener("playing",L.handlerVideoPlaying),t.play()),n&&L.setDataVideoState("playing",n)},L.handlerPauseButton=function(){var e,t,n=L.getCurrentVideoContainer(this);n&&(e=L.getVideo(n),t=L.getLayerHead(n)),e&&(e.addEventListener("pause",L.handlerVideoPause),e.pause(),t&&L.setDataVideoState("paused",t))},L.handlerVideoPause=function(){var e=this,t=L.getCurrentVideoContainer(e);e&&(e.removeEventListener("pause",L.handlerVideoPause),e.removeEventListener("timeupdate",L.updateTimeInfo)),L.removeClassName(t,"nm-video-playing")},L.handlerVideoPlaying=function(){var e=this,t=L.getCurrentVideoContainer(e);e.removeEventListener("playing",L.handlerVideoPlaying),e.addEventListener("timeupdate",L.updateTimeInfo),e.addEventListener("ended",L.handlerVideoEnded),e.addEventListener("progress",L.handleVideoProgress),L.addClassName(t,"nm-video-playing")},L.handleVideoProgress=function(){var e,t,n,a=this,i=L.getCurrentVideoContainer(a);i&&a&&(e=i.querySelector(".nm-loader-loaded"),t=a.buffered.end(0),n=100*parseFloat(t/a.duration),e&&(e.style.width=n+"%"))},L.handlerVideoEnded=function(){let e,t=this,n=L.getCurrentVideoContainer(t),a=!!document.querySelector(".active-fs"),i=L.getLayerHead(n);if(L.handleVideoEndEvents(t),L.removeClassName(n,"nm-video-playing"),L.displayTimeInfos(n,0,t.duration),e=t.currentSrc,t.src=e,a&&L.leaveFullScreen(n.querySelector(".nm-minimize")),t){"false"===t.getAttribute("data-nativectrls")&&n&&n.classList.remove("nm-hide-controls")}L.setDataVideoState("ended",i)},L.handleVideoEndEvents=function(e){e&&(e.removeEventListener("ended",L.handlerVideoEnded),e.removeEventListener("timeupdate",L.updateTimeInfo),e.removeEventListener("progress",L.handleVideoProgress))},L.updateTimeInfo=function(){var e=this,t=L.getCurrentVideoContainer(e);t&&L.displayTimeInfos(t,e.currentTime,e.duration)},L.displayTimeInfos=function(e,t,n){var a,i,o,r,l,s=0===t&&0===n;e&&(e.querySelector("video[data-autoplay-in-viewport]")||(a=e.querySelector(".nm-time-played"),i=e.querySelector(".nm-time-duration"),a.innerHTML=L.getTime(t),i.innerHTML=L.getTime(n)),o=e.querySelector(".nm-loader-played"),l=e.querySelector(".nm-loader-loaded"),r=s?0:100*parseFloat(t/n),o&&l&&(s&&(l.style.width="0%"),o.style.width=r+"%"))},L.handlerMuteButton=function(){var e=L.getCurrentVideoContainer(this),t=L.getVideo(e);t&&(!1===t.muted?(t.muted=!0,L.removeClassName(this,"nm-mute"),L.addClassName(this,"nm-unmute")):(t.muted=!1,L.removeClassName(this,"nm-unmute"),L.addClassName(this,"nm-mute")))},L.handlerSeekBar=function(e){var t=L.getCurrentVideoContainer(this),n=L.getVideo(t),a=this.clientWidth,i=e.offsetX/a*100;n&&t&&(n.currentTime=n.duration*(i/100),L.displayTimeInfos(t,n.currentTime,n.duration))},L.showHideControls=function(){var e,t=document.querySelector(".active-fs");t&&(e=t.querySelector(".nm-controls-wrap-video"),L.addClassName(e,"nm-controls-wrap-video-full"),clearTimeout(L.delayIntervallId),L.delayIntervallId=setTimeout((function(){L.removeClassName(e,"nm-controls-wrap-video-full")}),3e3))},L.isFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},L.enterFullScreen=function(e){e.requestFullScreen||(e.requestFullScreen=e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen),e.requestFullScreen()},L.isfullScreenClosed=function(){L.isFullScreen()||L.leaveFullScreen()},I.exitFullScreen=function(){document.exitFullScreen||(document.exitFullScreen=document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen),document.exitFullScreen(),document.removeEventListener("mousemove",L.showHideControls),L.handleFullscreenEvents(!1)},L.switchToFullScreen=function(e){var t=L.getCurrentVideoContainer(e);t&&(L.addClassName(t,"active-fs"),L.addClassName(e,"nm-minimize"),L.handleFullscreenEvents(!0),document.addEventListener("mousemove",L.showHideControls),L.enterFullScreen(t))},L.leaveFullScreen=function(e){var t,n=L.getCurrentVideoContainer(e);e?((n=L.getCurrentVideoContainer(e)).className.indexOf("active-fs")>-1&&L.removeClassName(n,"active-fs"),L.removeClassName(e,"nm-minimize")):(t=document.querySelector(".active-fs"))&&(L.removeClassName(t,"active-fs"),L.removeClassName(t.querySelector(".nm-minimize"),"nm-minimize")),I.exitFullScreen()},L.handleFullscreenEvents=function(e){e?(document.addEventListener("webkitfullscreenchange",L.isfullScreenClosed,!1),document.addEventListener("mozfullscreenchange",L.isfullScreenClosed,!1),document.addEventListener("fullscreenchange",L.isfullScreenClosed,!1),document.addEventListener("MSFullscreenChange",L.isfullScreenClosed,!1)):(document.removeEventListener("webkitfullscreenchange",L.isfullScreenClosed,!1),document.removeEventListener("mozfullscreenchange",L.isfullScreenClosed,!1),document.removeEventListener("fullscreenchange",L.isfullScreenClosed,!1),document.removeEventListener("MSFullscreenChange",L.isfullScreenClosed,!1))},L.handlerFullScreenButton=function(){L.isFullScreen()?L.leaveFullScreen(this):L.switchToFullScreen(this)},L.addClassName=function(e,t){e&&e.classList&&e.classList.add(t)},L.removeClassName=function(e,t){e&&e.classList&&e.classList.remove(t)},L.getTime=function(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))},L.findClosest=function(e,t){var n,a="",i=e;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(a=e,!0)}));i;){if((n=i.parentElement)&&n[a](t))return n;i=n}return null},L.handlerNativeControls=function(e){var t,n,a;for(t=e&&e.domElement?e.domElement.querySelectorAll(".nm-video"):document.querySelectorAll(".nm-video"),a=0;a<t.length;a++)if(L.addClassName(t[a],"nm-hide-controls"),n=L.getVideo(t[a])){"false"!==n.getAttribute("data-nativectrls")&&n.setAttribute("controls","")}},L.enableVideoFullStageMode=function(){document.querySelector("body").classList.add("nm-stage-full")},L.disableVideoFullStageMode=function(){document.querySelector("body").classList.remove("nm-stage-full")},L.handlerStagePlayButton=function(){var e,t=this,n=L.getCurrentVideoContainer(t),a=L.getVideo(n);a&&(a.classList.remove("nm-hidden"),a.play(),a.addEventListener("ended",L.handlerStageSkipButton)),t&&t.classList.add("nm-hidden"),L.enableVideoFullStageMode(),n&&(e=n.querySelector(".nm-introvideo"))&&e.classList.remove("nm-hidden"),f.disableSwipe()},L.handlerStageSkipButton=function(e){var t=L.getCurrentVideoContainer(this),n=L.getVideo(t),a=t?t.querySelector(".nm-introvideo"):null,i=t?t.querySelector(".nm-j-play-btn-stage"):null;e.preventDefault(),n&&(n.classList.add("nm-hidden"),n.pause()),L.disableVideoFullStageMode(),a&&a.classList.add("nm-hidden"),i&&i.classList.remove("nm-hidden"),f.enableSwipe()},L.handlerVideoClick=function(){var e=L.getCurrentVideoContainer(this),t=L.getVideo(e);t&&(t.paused?(t.addEventListener("playing",L.handlerVideoPlaying),t.play()):(t.addEventListener("pause",L.handlerVideoPause),t.pause()))},L.addStageAutoPlayEvent=function(){var e,t,n,a=document.querySelector(".nm-stage-container .nm-stage-media.nm-video");if(a&&("true"===a.getAttribute("data-autoplay")||!0===a.getAttribute("data-autoplay"))){if(t=(e=L.getVideo(a)).querySelectorAll("source"),!(navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0))for(n=0;n<t.length;n++)t[n].media=t[n].getAttribute("data-media");e.classList.remove("nm-hidden"),e.addEventListener("canplay",L.handleStageAutoPlay),e.load()}},L.handleStageAutoPlay=function(){var e=document.querySelector(".nm-stage-container .nm-stage-media .nm-j-play-btn-stage"),t=L.getCurrentVideoContainer(e),n=L.getVideo(t);n.removeEventListener("canplay",L.handleStageAutoPlay),e&&e.classList.add("nm-hidden"),h.device.isMobile()&&(n.controls=!1),L.enableVideoFullStageMode(),f.disableSwipe(),n&&(n.classList.remove("nm-hidden"),n.muted=!0,n.play().catch((function(){})),n.addEventListener("ended",(function(){n.play().catch((function(){}))})))},L.addAutoplayOnceEvent=function(){L.aAllAutoplayVideos=[].slice.call(document.querySelectorAll("video[data-autoplay-in-viewport]")),L.aAllAutoplayVideos.length>0&&document.addEventListener("scroll",L.handleVideoInViewport)},L.handleVideoInViewport=function(){L.aAllAutoplayVideos.forEach((function(e,t){h.dom.isInViewport(e)&&(e.addEventListener("playing",L.handlerVideoPlaying),e.muted=!0,e.play().catch((function(){})),L.aAllAutoplayVideos.splice(t,1))}))},L.handlePageLoaded=function(){L.disableVideoFullStageMode(),h.device.isMobile()&&L.initializeNativeControls()},L.handlePageLeave=function(){L.removeEvents()},I.resetVideoPlayer=function(e,t,n){let a=e.querySelector("video");a&&(t?(a.src=t,a.load()):a.removeAttribute("src"),n&&(a.poster=n),L.handleVideoEndEvents(a),L.removeClassName(e,"nm-video-playing"),L.displayTimeInfos(e,0,0))},I.enterFullscreen=function(e){L.enterFullScreen(e)},L.addEvents=function(){L.eventBus.on(r.appEvents.PAGE_READY,L.handlePageLoaded),L.eventBus.on(r.appEvents.PAGE_LEAVE,L.handlePageLeave),L.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-play",L.handlerPlayButton),L.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-pause",L.handlerPauseButton),L.domEventDelegate.on("click",".nm-video .nm-j-mute-btn",L.handlerMuteButton),L.domEventDelegate.on("click",".nm-video .nm-video-loader",L.handlerSeekBar),L.domEventDelegate.on("click",".nm-video .nm-j-fullscreen-btn",L.handlerFullScreenButton),L.domEventDelegate.on("click",".nm-video .nm-j-play-btn-stage",L.handlerStagePlayButton),L.domEventDelegate.on("click",".nm-video .nm-j-skip-btn-stage",L.handlerStageSkipButton),L.domEventDelegate.on("click",".nm-prevent-video-click-visualizer",L.handlerVideoClick),L.addStageAutoPlayEvent(),L.addAutoplayOnceEvent()},L.removeEvents=function(){L.eventBus.off(r.appEvents.PAGE_READY,L.handlePageLoaded),document.removeEventListener("scroll",L.handleVideoInViewport);[...document.querySelectorAll(".nm-video video")].forEach((e=>{e.pause(),e.removeEventListener("pause",L.handlerVideoPlaying),e.removeEventListener("playing",L.handlerVideoPlaying),e.removeEventListener("timeupdate",L.updateTimeInfo),e.removeEventListener("ended",L.handlerVideoEnded),e.removeEventListener("progress",L.handleVideoProgress),e.removeEventListener("canplay",L.handleStageAutoPlay)}))},L.initializeNativeControls=function(){L.eventBus.on(r.appEvents.PAGE_LOADED,L.handlerNativeControls),L.eventBus.on(r.appEvents.LAYER_LOADED,L.handlerNativeControls),L.handlerNativeControls()},I.handlerLayer=function(e){h.device.isMobile()&&L.handlerNativeControls(e)},I.initialize=function(e){L.eventBus=e,L.domEventDelegate=h.dom.getEventDelegate("body"),L.removeEvents(),L.addEvents(),L.handlePageLoaded()};var A,k,M,P={},T={__:P};P.NEXT="next",P.PREV="prev",P.itemPadding=6,P.mobile=!1,P.swipeStarted=!1,P.clickTimer=null,P.eventBus=null,P.galleries={},P.oDefaults={module:".nm-md-inline-mediagallery",arrowNext:".nm-inline-mediagallery-next",arrowPrev:".nm-inline-mediagallery-prev",disclaimer:".nm-inline-mediagallery__asset-disclaimer",imageContainer:".nm-inline-mediagallery-image-container",imageWrap:".nm-inline-mediagallery-big-image-wrap",image:".nm-inline-mediagallery-image-wrap",innerImage:".nm-inline-mediagallery-image",closeFullscreenBtn:".nm-inline-mediagallery-fullscreen-close-btn",classFullscreen:"nm-md-mediagallery-fullscreen-mode",thumbnails:".nm-inline-mediagallery-slider-item",sliderList:".nm-inline-mediagallery-image-list",thumbSliderList:".nm-inline-mediagallery-slider-list",sliderWrap:".nm-inline-mediagallery-slider-list-wrap",sliderPrev:".nm-inline-mediagallery-slider-prev",sliderNext:".nm-inline-mediagallery-slider-next",videoPlayerPlay:".nm-md-inline-mediagallery .nm-video .nm-j-play-btn",videoPlayerPause:".nm-md-inline-mediagallery .nm-video .nm-j-play-btn .nm-video-button-pause",videoTarget:".nm-prevent-video-click"},P.setCurrentGallery=function(e){P.currentGallery=h.dom.closest(e,P.oDefaults.module)},P.nextArrowClickHandler=function(e){e&&e.preventDefault&&e.preventDefault(),P.setCurrentGallery(e.target),P.setCurrentIndex(P.NEXT)},P.prevArrowClickHandler=function(e){e&&e.preventDefault&&e.preventDefault(),P.setCurrentGallery(e.target),P.setCurrentIndex(P.PREV)},P.getCurrentIndex=function(){var e;return h.dom.getElementsArray(P.oDefaults.sliderList,P.currentGallery).forEach((function(t,n){t.checked&&(e=n)})),e},P.getInputsCount=function(){return h.dom.getElementsArray(P.oDefaults.sliderList,P.currentGallery).length},P.changeInputPos=function(e){var t=h.dom.getElementsArray(P.oDefaults.sliderList,P.currentGallery);t.map((function(e){e.checked=!1})),t[e].checked=!0},P.setCurrentIndex=function(e){var t=P.getCurrentIndex(),n=P.getInputsCount(),a=-1,i=h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery);e===P.NEXT?a=t<n?t+1:t:e===P.PREV&&(a=t>0?t-1:t),a<0||a===n||P.makeAnimation(i,a,e)},P.swapImages=function(e,t){var n=h.dom.getElementsArray(P.oDefaults.image,P.currentGallery),a=P.getThumbUrls(e),i=a.imageUrl,o=a.posterUrl,r=h.dom.getElement("picture",n[t]);P.setArrowStyle(e),P.updatePictureUrls(r,o||i),o?P.addVideoClassToGalleryImages():P.removeVideoClassFromGalleryImages()},P.swapAssetDisclaimer=function(e){const t=P.currentGallery.querySelectorAll(P.oDefaults.disclaimer),n=P.getCurrentDisclaimer(e);[...t].forEach((e=>{e.innerHTML=n}))},P.updatePictureUrls=function(e,t){let n=e.querySelector("img").getAttribute("src"),a=e.querySelectorAll("source"),i=P.replaceStringBeforeQuestionMark(n,t);e.querySelector("img").setAttribute("src",i),[...a].forEach((function(e){let n=P.replaceStringBeforeQuestionMark(e.getAttribute("srcset"),t);e.setAttribute("srcset",n)}))},P.replaceStringBeforeQuestionMark=function(e,t){let n=e.split("?");return n[0]=t,n.join("?")},P.setArrowStyle=function(e){var t=h.dom.getElement(".nm-inline-mediagallery-navigation",P.currentGallery);"light"===h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery)[e].getAttribute("data-arrow-style")?t.classList.add("nm-inline-mediagallery-arrow-dark"):t.classList.remove("nm-inline-mediagallery-arrow-dark")},P.hideVideoPlayer=function(){var e=P.getVideoPlayer();e&&(e.style.display="none")},P.handleTransition=function(e,t){var n=h.dom.getElement(P.oDefaults.imageWrap,P.currentGallery),a="nm-inline-mediagallery-animate-"+e;h.dom.handleTransition(n,a).then((function(){P.hideVideoPlayer(),P.swapImages(t,0),P.swapAssetDisclaimer(t),P.showVideoPlayer(t)})).catch((function(e){console.log("Promise not completed ",e)}))},P.getThumbUrls=function(e){var t=h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery),n={};return n.imageUrl=t[e].getAttribute("data-full-image-url"),n.posterUrl=t[e].getAttribute("data-video-poster"),n.videoUrl=t[e].getAttribute("data-video-slide"),n.vmsUrl=t[e].getAttribute("data-video-vms-slide"),n},P.getCurrentDisclaimer=function(e){return h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery)[e].getAttribute("data-asset-disclaimer")},P.showVideoPlayer=function(e){var t,n=P.getThumbUrls(e),a=n.videoUrl,i=n.vmsUrl,o=n.posterUrl,r=P.getVideoPlayer(),l=r.querySelector("video");a?(l.pause(),I.resetVideoPlayer(r,a,o),r.style.display="block"):i?(t=P.getVmsExtension(screen.width),l.pause(),I.resetVideoPlayer(r,i+t,o),r.style.display="block"):(l.pause(),I.resetVideoPlayer(r),r.style.display="none")},P.getVmsExtension=function(e){var t="_Content270p-Web.mp4";return e>1281?t="_Content1080p-Web.mp4":e>=890&&e<=1280?t="_Content720p-Web.mp4":e>=705&&e<=889?t="_Content500p-Web.mp4":e>=481&&e<=704&&(t="_Content396p-Web.mp4"),t},P.addVideoClassToGalleryImages=function(){var e=h.dom.getElementsArray(".nm-inline-mediagallery-image",P.currentGallery),t=h.dom.getElement(".nm-inline-mediagallery-big-image-wrap",P.currentGallery);e.forEach((function(e){e.classList.add("nm-inline-mediagallery-video")})),t.classList.add("nm-inline-mediagallery-video-hover")},P.removeVideoClassFromGalleryImages=function(){var e=h.dom.getElementsArray(".nm-inline-mediagallery-image",P.currentGallery),t=h.dom.getElement(".nm-inline-mediagallery-big-image-wrap",P.currentGallery);e.forEach((function(e){e.classList.remove("nm-inline-mediagallery-video")})),t.classList.remove("nm-inline-mediagallery-video-hover")},P.getVideoPlayer=function(){return h.dom.getElement(".nm-inline-mediagallery-image-container .nm-mediaplayer.nm-video",P.currentGallery)},P.onSwipeStart=function(e){P.swipeStarted=!0,P.setCurrentGallery(e.target);let t=P.getEventPos(e),n=h.dom.getElement(".nm-inline-mediagallery-image .nm-controls-wrap-video",P.currentGallery),a=h.dom.getElement("nm-inline-mediagallery-image .nm-video-button-play",P.currentGallery),i="touchstart"===e.type?"touchend":"mouseup",o=e.target;o===n||n.contains(o)||o===a||P.domEventDelegate.on(i,P.oDefaults.imageContainer,(function e(n){P.swipeStarted&&(P.swipeStarted=!1,P.domEventDelegate.off(i,P.oDefaults.imageContainer,e),P.onSwipeEnd(i,o,n,t))}))},P.onSwipeEnd=function(e,t,n,a){var i,o,r,l;i=P.getEventPos(n),o=P.calculateSwipeDirection(a.x,i.x),r=a.x>i.x?a.x-i.x:i.x-a.x,l=a.y>i.y?a.y-i.y:i.y-a.y,r>50&&l<=50?P.setCurrentIndex(o):0===r&&"touchend"===e&&(null===P.clickTimer?P.clickTimer=setTimeout((function(){P.clickTimer=null,P.openFullscreen(t)}),500):(clearTimeout(P.clickTimer),P.clickTimer=null))},P.calculateSwipeDirection=function(e,t){var n,a=P.getCurrentIndex(),i=P.getInputsCount();if(t>e){if(n=P.PREV,0===a)return}else if(n=P.NEXT,a===i-1)return;return n},P.getEventPos=function(e){var t={};return"touchmove"===e.type||"touchend"===e.type?e.originalEvent?(t.x=e.originalEvent.pageX,t.y=e.originalEvent.pageY):e.changedTouches&&(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):"touchstart"===e.type?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.clientY),t},P.openFullscreen=function(e){var t,n=e.target||e;P.setCurrentGallery(n),P.isFullScreen()||(t=h.dom.getElement(P.oDefaults.imageWrap,P.currentGallery),document.addEventListener("webkitfullscreenchange",P.toggleFullscreenClass,!1),document.addEventListener("mozfullscreenchange",P.toggleFullscreenClass,!1),document.addEventListener("fullscreenchange",P.toggleFullscreenClass,!1),document.addEventListener("MSFullscreenChange",P.toggleFullscreenClass,!1),t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen())},P.closeFullscreen=function(){P.isFullScreen()&&document.exitFullscreen()},P.isFullScreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullScreen||document.mozFullScreen)},P.toggleFullscreenClass=function(){var e=h.dom.closest(event.target,P.oDefaults.module);P.isFullScreen()?e.classList.add(P.oDefaults.classFullscreen):P.isFullScreen()||(e.classList.remove(P.oDefaults.classFullscreen),document.removeEventListener("webkitfullscreenchange",P.toggleFullscreenClass,!1),document.removeEventListener("mozfullscreenchange",P.toggleFullscreenClass,!1),document.removeEventListener("fullscreenchange",P.toggleFullscreenClass,!1),document.removeEventListener("MSFullscreenChange",P.toggleFullscreenClass,!1))},P.thumbClickHandler=function(e){let t,n,a,i,o=e.target;o.classList.contains("nm-image")&&(o=o.parentElement),P.setCurrentGallery(o),t=h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery),n=P.getCurrentIndex(),t.forEach((function(e,t){e===o.parentElement&&(a=t)})),n!==a&&(i=n<a?P.NEXT:P.PREV,P.makeAnimation(t,a,i))},P.makeAnimation=function(e,t,n){P.isVisible(e[t],!0)||P.centerHiddenThumb(e,t),P.changeInputPos(t),P.swapImages(t,1),P.swapAssetDisclaimer(t),P.handleTransition(n,t)},P.centerHiddenThumb=function(e,t){var n=e[t],a=h.dom.getElement(P.oDefaults.thumbSliderList,P.currentGallery),i=h.dom.getElement(P.oDefaults.sliderWrap,P.currentGallery),o=P.getSliderNavigation(P.currentGallery),r=n.offsetLeft-(i.clientWidth-n.clientWidth)/2,l=a.clientWidth-i.clientWidth;r>l&&(r=l),P.scrollElementToX(i,r,300).then((function(){P.hideSliderNavigation(e,o)}))},P.scrollElementToX=function(e,t,n){return M=t,new Promise((function(t){M<0&&(M=0),A&&(cancelAnimationFrame(A),A=void 0),k&&(cancelAnimationFrame(k),k=void 0);var a,i,o=e.scrollLeft,r=Math.PI/(n/15),l=o/2,s=0;M<e.scrollLeft?A=window.requestAnimationFrame((function n(){setTimeout((function(){e.scrollLeft>Math.round(M)?(A=window.requestAnimationFrame(n),s+=1,i=l-l*Math.cos(s*r),(a=o-i)<M&&(a=M),e.scrollLeft=a):(cancelAnimationFrame(A),t())}),15)})):(l=M/2,k=window.requestAnimationFrame((function n(){setTimeout((function(){Math.round(e.scrollLeft)<Math.round(M)-1?(A=window.requestAnimationFrame(n),s+=1,i=l-l*Math.cos(s*r),(a=o+i)>M&&(a=M),e.scrollLeft=a):(cancelAnimationFrame(A),t())}),15)})))}))},P.isVisible=function(e,t){var n=e.parentNode.parentNode.getBoundingClientRect(),a=e.getBoundingClientRect(),i=parseInt(a.right,10)<=parseInt(n.right,10)+2&&parseInt(a.right,10)>=parseInt(n.left,10),o=parseInt(a.left,10)>=parseInt(n.left,10)&&parseInt(a.left,10)<=parseInt(n.right,10);return t?i&&o:i||o},P.sliderArrowClickHandler=function(e){e.preventDefault(),P.setCurrentGallery(this);let t,n=0,a=0,i=this.getAttribute("data-direction"),o=h.dom.getElement(P.oDefaults.thumbSliderList,P.currentGallery),r=h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery),l=h.dom.getElement(P.oDefaults.sliderWrap,P.currentGallery),s=h.dom.getElement(".nm-inline-mediagallery-slider-item.nm-inline-mediagallery-slider-item-active",P.currentGallery),d=l.scrollLeft;P.sliderWrapWidth=P.getClientWidth(l),P.sliderWidth=P.getClientWidth(o),t=P.sliderWidth-P.sliderWrapWidth+2,r.forEach((function(e){P.isVisible(e,!0)&&e!==s&&(n=n+e.clientWidth+P.itemPadding)})),a=i===P.PREV?d-n>0?d-n:0:d+n>t?t:d+n,P.scrollElementToX(l,a-2,300)},P.scrollHandler=function(e){P.setCurrentGallery(this);let t=P.getSliderNavigation(P.currentGallery),n=h.dom.getElementsArray(P.oDefaults.thumbnails,P.currentGallery);P.hideSliderNavigation(n,t),P.setGalleryCenterMostElement(e.target)},P.hideSliderNavigation=function(e,t){P.isVisible(e[0],!0)?t.prev.style.display="none":t.prev.style.display="block",P.isVisible(e[e.length-2],!0)?t.next.style.display="none":t.next.style.display="block"},P.getSliderNavigation=function(e){var t={};return t.prev=h.dom.getElement(P.oDefaults.sliderPrev,e),t.next=h.dom.getElement(P.oDefaults.sliderNext,e),t},P.getClientWidth=function(e){return e.clientWidth},P.addPreventDefault=function(e){P.mobile||e.preventDefault()},P.addGalleryVideoEvents=function(){h.dom.getElementsArray(".nm-inline-mediagallery-image video").forEach((function(e){e.addEventListener("playing",P.addPlayingClass)}))},P.addPlayingClass=function(e){P.setCurrentGallery(e.target);let t=h.dom.getElement(".nm-inline-mediagallery-image-container",P.currentGallery),n=e.target;t.classList.add("nm-inline-mediagallery-video-playing"),P.hideNavigation(),n.addEventListener("pause",P.removePlayingClass),n.addEventListener("ended",P.removePlayingClass)},P.removePlayingClass=function(e){var t=h.dom.getElement(".nm-inline-mediagallery-image-container",P.currentGallery),n=e.target;t.classList.remove("nm-inline-mediagallery-video-playing"),P.showNavigation(),n.removeEventListener("pause",P.removePlayingClass),n.removeEventListener("ended",P.removePlayingClass)},P.showNavigation=function(){var e=h.dom.getElement(".nm-inline-mediagallery-navigation-gradients",P.currentGallery),t=h.dom.getElement(".nm-inline-mediagallery-navigation",P.currentGallery);e.classList.remove("nm-hidden"),t.classList.remove("nm-hidden")},P.hideNavigation=function(){var e=h.dom.getElement(".nm-inline-mediagallery-navigation-gradients",P.currentGallery),t=h.dom.getElement(".nm-inline-mediagallery-navigation",P.currentGallery);e.classList.add("nm-hidden"),t.classList.add("nm-hidden")},P.preventImgDrag=function(){return!1},P.orientationChangeHandler=function(){P.centerAllGalleryThumbs()},P.setGalleryCenterMostElement=function(e){var t=P.getCenterMostElementOfParent(e),n=P.currentGallery.getAttribute("data-gallery-id");P.galleries[n]=t},P.getCenterMostElementOfParent=function(e){var t,n,a,i=h.dom.getElementsArray(".nm-inline-mediagallery-slider-item",e),o=e.getBoundingClientRect().right-e.clientWidth/2;return i.forEach((function(e){P.isVisible(e,!0)&&(n=e.getBoundingClientRect().right-e.clientWidth/2,a=Math.abs(o-n),t?a<t.abstand&&(t.abstand=a,t.element=e):((t={}).abstand=a,t.element=e))})),t.element},P.centerAllGalleryThumbs=function(){var e;Object.keys(P.galleries).forEach((function(t){e=h.dom.closest(P.galleries[t],P.oDefaults.sliderWrap),P.centerThumb(e,P.galleries[t])}))},P.centerThumb=function(e,t){var n=t.offsetLeft-(e.clientWidth-t.clientWidth)/2;e.scrollLeft=n},P.saveAllGalleryInstancesToGlobalObject=function(){var e;h.dom.getElementsArray(P.oDefaults.module).forEach((function(t){e=h.dom.getElement(P.oDefaults.sliderWrap,t),P.galleries[t.getAttribute("data-gallery-id")]=P.getCenterMostElementOfParent(e)}))},P.stopVideoOnScrollOut=function(e){var t=h.dom.closest(e.target,".nm-video"),n=h.dom.getElement("video",t);P.videoScrollHandler=h.dom.throttle(P.handleScrollVideo.bind(n),15),document.addEventListener("scroll",P.videoScrollHandler)},P.handleScrollVideo=function(){var e,t,n=this;0===h.dom.getVisibleVerticalPercentageInViewport(n)&&(e=h.dom.closest(n,".nm-video"),t=h.dom.closest(e,".nm-inline-mediagallery-image-container.nm-inline-mediagallery-video-playing"),n.pause(),e&&t&&(e.classList.remove("nm-video-playing"),t.classList.remove("nm-inline-mediagallery-video-playing")),document.removeEventListener("scroll",P.videoScrollHandler))},P.addEvents=function(){P.domEventDelegate.on("click",P.oDefaults.arrowNext,P.nextArrowClickHandler),P.domEventDelegate.on("click",P.oDefaults.arrowPrev,P.prevArrowClickHandler),P.domEventDelegate.on("click",P.oDefaults.thumbnails,P.thumbClickHandler),P.domEventDelegate.on("mousedown",P.oDefaults.imageContainer,P.onSwipeStart),P.domEventDelegate.on("touchstart",P.oDefaults.imageContainer,P.onSwipeStart),P.domEventDelegate.on("dblclick",".nm-inline-mediagallery-image",P.openFullscreen),P.domEventDelegate.on("keyup","body",P.closeFullscreen),P.domEventDelegate.on("click",P.oDefaults.closeFullscreenBtn,P.closeFullscreen),P.domEventDelegate.on("click",P.oDefaults.sliderPrev,P.sliderArrowClickHandler),P.domEventDelegate.on("click",P.oDefaults.sliderNext,P.sliderArrowClickHandler),P.domEventDelegate.on("scroll",P.oDefaults.sliderWrap,h.dom.throttle(P.scrollHandler,15)),P.domEventDelegate.on("dragstart",".nm-inline-mediagallery-image img",P.preventImgDrag),P.domEventDelegate.on("click",P.oDefaults.videoPlayerPlay,P.stopVideoOnScrollOut),P.eventBus.on(r.appEvents.LAYER_LOADED,P.addGalleryVideoEvents),P.eventBus.on(r.appEvents.LAYER_LOADED,P.saveAllGalleryInstancesToGlobalObject),P.eventBus.on(r.appEvents.LAYER_LOADED,P.resizeHandler),window.addEventListener("resize",P.resizeHandler),window.addEventListener("orientationchange",P.orientationChangeHandler)},P.resizeHandler=function(){h.dom.getElementsArray(P.oDefaults.module).forEach((function(e){var t=P.getSliderNavigation(e),n=h.dom.getElementsArray(P.oDefaults.thumbnails,e);P.hideSliderNavigation(n,t)}))},T.initialize=function(e){P.eventBus=e,P.domEventDelegate=h.dom.getEventDelegate("body"),P.addEvents(),P.addGalleryVideoEvents(),P.saveAllGalleryInstancesToGlobalObject(),P.resizeHandler()};class _ extends HTMLElement{static get SELECTOR_ROTATION_IMAGE(){return".nm-rotation-image-container"}static get CLASS_ROTATION_IMAGE_ACTIVE(){return"nm-rotation-image-container-is-active"}constructor(){super(),this.numOfImages=0,this.sliderControl=null,this.sliderContainer=null,this.controlContainer=null,this.sliderPastLine=null,this.clickOffset=0,this._activateDragging=this._activateDragging.bind(this),this._dragSliderControls=this._dragSliderControls.bind(this),this._deactivateDragging=this._deactivateDragging.bind(this)}connectedCallback(){this._initializeModule()}_initializeModule(){this._initializeElements(),this._bindControlEvents(),this._isCircularControl()&&this._initCircularControl()}_initializeElements(){this.numOfImages=this.querySelectorAll(_.SELECTOR_ROTATION_IMAGE).length,this.sliderControl=this.querySelector(".nm-rotation-control"),this.sliderContainer=this.querySelector(".nm-slider-container"),this.controlContainer=this.querySelector(".nm-rotation-control-container"),this.sliderPastLine=this.querySelector(".nm-rotation-control-past-line")}_isCircularControl(){return this.sliderControl.classList.contains("nm-rotation-control-is-circular")}_initCircularControl(){let e=this._calculateInitialPastLineWidth();this.sliderPastLine.style.width=e+"px"}_calculateInitialPastLineWidth(){return this.controlContainer.clientWidth/2-this.sliderControl.clientWidth/2}_bindControlEvents(){this.sliderControl.addEventListener("mousedown",this._activateDragging),this.sliderControl.addEventListener("touchstart",this._activateDragging)}_activateDragging(e){let t=this._calculateClickPosX(e),n=this._offsetOfElement(this.sliderControl).left;this.clickOffset=t-n,this._setEventListenersForStartDragging()}_calculateClickPosX(e){let t;return t="touchstart"===e.type?e.touches[0].pageX:e.pageX,t}_offsetOfElement(e){let t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}_setEventListenersForStartDragging(){this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging),this.sliderContainer.addEventListener("mousemove",this._dragSliderControls),this.sliderContainer.addEventListener("touchmove",this._dragSliderControls),this.addEventListener("mouseup",this._deactivateDragging),this.addEventListener("touchend",this._deactivateDragging)}_setEventListenersForStopDragging(){this.sliderControl.addEventListener("mousedown",this._activateDragging),this.sliderControl.addEventListener("touchstart",this._activateDragging),this.sliderContainer.removeEventListener("mousemove",this._dragSliderControls),this.sliderContainer.removeEventListener("touchmove",this._dragSliderControls),this.removeEventListener("mouseup",this._deactivateDragging),this.removeEventListener("touchend",this._deactivateDragging)}_dragSliderControls(e){let t=this._calculateSliderPositionX(e);this._rotateImageBySliderPosition(t),this._moveControlsBySliderPosition(t)}_calculateSliderPositionX(e){let t=this._offsetOfElement(this.controlContainer).left,n=0;return n="touchmove"===e.type?e.touches[0].pageX-t-this.clickOffset:e.pageX-t-this.clickOffset,n}_rotateImageBySliderPosition(e){let t=this._calculatePercentagePositionOfSliderByPositionX(e),n=this._calculateActiveImageIndexByPercentage(t);this._setActiveImageByIndex(n)}_moveControlsBySliderPosition(e){this._isSliderControlOverMinimum(e)&&this._isSliderControlUnderMaximum(e)&&this._updateSliderForSliderPosition(e)}_updateSliderForSliderPosition(e){this.sliderControl.style.left=e+"px",this.sliderPastLine.style.width=e+"px"}_isSliderControlOverMinimum(e){return e>=-this.sliderControl.clientWidth/2}_isSliderControlUnderMaximum(e){return e<=this.controlContainer.clientWidth-this.sliderControl.clientWidth/2}_calculatePercentagePositionOfSliderByPositionX(e){return(e+this.sliderControl.clientWidth/2)/this.controlContainer.clientWidth*100}_calculateActiveImageIndexByPercentage(e){return Math.min(this.numOfImages-1,Math.max(0,Math.floor(e/(100/this.numOfImages))))}_setActiveImageByIndex(e){let t=this.querySelector("."+_.CLASS_ROTATION_IMAGE_ACTIVE);t&&t.classList.remove(_.CLASS_ROTATION_IMAGE_ACTIVE),this.querySelectorAll(_.SELECTOR_ROTATION_IMAGE)[e].classList.add(_.CLASS_ROTATION_IMAGE_ACTIVE)}_deactivateDragging(){this._setEventListenersForStopDragging()}disconnectedCallback(){this._removeAllEventListeners()}_removeAllEventListeners(){this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging),this.sliderContainer.removeEventListener("mousemove",this._dragSliderControls),this.sliderContainer.removeEventListener("touchmove",this._dragSliderControls),this.removeEventListener("mouseup",this._deactivateDragging),this.removeEventListener("touchend",this._deactivateDragging),this.sliderControl.removeEventListener("mousedown",this._activateDragging),this.sliderControl.removeEventListener("touchstart",this._activateDragging)}}customElements.define("audi-interactive-image-rotation",_);const x={},N={__:x};x.oDefaults={sSelectorSliderContainer:".nm-interactive-image-slider__image-container",sSelectorSliderMainImage:".nm-interactive-image-slider__first-image",sSelectorSliderOverlayImage:".nm-interactive-image-slider__second-image",sSelectorSliderControl:".nm-interactive-image-slider__control"},x.addEvents=function(){x.eventBus.on(r.appEvents.PAGE_LOADED,N.handler),x.eventBus.on(r.appEvents.LAYER_LOADED,N.handler),N.handler()},N.dispose=function(){x.eventBus.off(r.appEvents.PAGE_LOADED,N.handler),x.eventBus.off(r.appEvents.LAYER_LOADED,N.handler)},N.handler=function(){x.domEventDelegate.on("click",x.oDefaults.sSelectorSliderMainImage,x.clickMainImageEventHandler),x.domEventDelegate.on("click",x.oDefaults.sSelectorSliderOverlayImage,x.clickOverlayImageEventHandler),x.domEventDelegate.on("mousedown",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler),x.domEventDelegate.on("touchstart",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler)},x.clickMainImageEventHandler=function(){var e,t=h.dom.closest(this,x.oDefaults.sSelectorSliderContainer);e=h.dom.siblings(this,x.oDefaults.sSelectorSliderOverlayImage)[0],x.changeSliderControlPosition(e,t.offsetWidth-1)},x.clickOverlayImageEventHandler=function(){x.changeSliderControlPosition(this,0)},x.changeSliderControlPosition=function(e,t){var n,a=h.dom.closest(e,x.oDefaults.sSelectorSliderContainer).offsetWidth;n=h.dom.siblings(e,x.oDefaults.sSelectorSliderControl)[0],jQuery(n).animate({left:t},300,!1),jQuery(e).animate({width:a-t})},x.activateDragEventHandler=function(){this.removeEventListener("mousedown",x.activateDragEventHandler,!0),this.removeEventListener("touchstart",x.activateDragEventHandler,!0),x.domEventDelegate.off("mousemove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.off("touchmove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.on("mousemove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.on("touchmove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.off("mouseup",x.deactivateDragEventHandler),x.domEventDelegate.on("mouseup",x.deactivateDragEventHandler),x.domEventDelegate.off("touchend",x.deactivateDragEventHandler),x.domEventDelegate.on("touchend",x.deactivateDragEventHandler)},x.getSliderPositionX=function(e,t){return"touchmove"===e.type?e.touches[0].pageX-t.getBoundingClientRect().left:e.pageX-t.getBoundingClientRect().left},x.dragMovement=function(e){var t,n,a=x.getSliderPositionX(e,this);a<=20&&(a=0),this.clientWidth-a<=20&&(a=this.clientWidth-1),t=this.clientWidth-a,n=h.dom.closest(this,x.oDefaults.sSelectorSliderContainer).clientWidth,t>=0&&t<=n?(h.dom.getElement(x.oDefaults.sSelectorSliderControl,this).style.left=a+"px",h.dom.getElement(x.oDefaults.sSelectorSliderOverlayImage,this).style.width=t+"px"):x.deactivatedDrag(this)},x.deactivateDragEventHandler=function(){x.deactivatedDrag(this)},x.deactivatedDrag=function(){x.domEventDelegate.off("mousedown",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler),x.domEventDelegate.off("touchstart",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler),x.domEventDelegate.on("mousedown",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler),x.domEventDelegate.on("touchstart",x.oDefaults.sSelectorSliderControl,x.activateDragEventHandler),x.domEventDelegate.off("mousemove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.off("touchmove",x.oDefaults.sSelectorSliderContainer,x.dragMovement),x.domEventDelegate.off("mouseup",x.deactivateDragEventHandler),x.domEventDelegate.off("touchend",x.deactivateDragEventHandler)},N.initialize=function(e){x.eventBus=e,x.domEventDelegate=h.dom.getEventDelegate("body"),x.addEvents()};const j=new class{initialize(){const e=SETUPS?SETUPS.get("nemo.InterstitialLayerLink"):null,t=this._getCurrentCarline();this._writeLayerHasBeenShown=this._writeLayerHasBeenShown.bind(this),e&&t&&(this.storageKey=this._getStorageKeyForCarline(t),document.addEventListener("interstitial-layer.close",this._writeLayerHasBeenShown),this.globalEventEmitter=r.signal.getEmitter(),this._processInterstitialLayer(e))}_getCurrentCarline(){let e=document.querySelector("meta[name=carline]");return e?e.getAttribute("content"):""}_processInterstitialLayer(e){this._readLayerHasBeenShown()||this._openInterstitialLayer(e)}_getStorageKeyForCarline(e){return"audi-interstitial-layer-"+e}_readLayerHasBeenShown(){return this.sessionStorageAlternative?this.sessionStorageAlternative[this.storageKey]:sessionStorage.getItem(this.storageKey)}_openInterstitialLayer(e){const t={layerType:"ModalLayerInterstitialElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{linkUrl:e},options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0,addCssClass:"nm-module-interstitial-layer"}};this.globalEventEmitter.emit(r.modalLayer.constructor.MODAL_LAYER_OPEN_EVENT,t)}_writeLayerHasBeenShown(){try{sessionStorage.setItem(this.storageKey,!0)}catch(e){this.sessionStorageAlternative=this.sessionStorageAlternative?this.sessionStorageAlternative:{},this.sessionStorageAlternative[this.storageKey]=!0}}},V={},B={__:V};V.categories=[],V.items=[],V.selectedItem=null,V.selectedCategory="",V.getCurrentItems=function(){if("all"===V.selectedCategory)return V.items;let e=[];for(let t=0,n=V.items.length;t<n;t++)V.items[t].category===V.selectedCategory&&e.push(V.items[t]);return e},B.setAllCategories=function(e){V.selectedCategory="",V.categories=e},B.getCategories=function(){return V.categories},B.setAllItems=function(e){V.selectedItem=null,V.items=e},B.getAllItems=function(){return V.items},B.getSelectedCategory=function(){return V.selectedCategory},B.setSelectedCategory=function(e){let t=!1,n=V.selectedCategory;e===V.selectedCategory?t=!1:(V.selectedCategory=e,t=!0),n||(t=!1),V.eventBus.emit(r.appEvents.MEDIAGALLERY_CATEGORY_CHANGED,{category:e,changed:t})},B.getSelectedItem=function(){return V.selectedItem},B.setSelectedItem=function(e){let t=!1,n=V.selectedItem;e===V.selectedItem?t=!1:(V.selectedItem=e,t=!0),n||(t=!1);let a=B.getItemIndex(),i=n?B.getItemIndex(n):a,o=B.getMaxIndex(),l=i<a?"next":"back";t&&a!==i||(l="none"),V.eventBus.emit(r.appEvents.MEDIAGALLERY_ITEM_CHANGED,{item:e,index:a,maxIndex:o,direction:l,changed:t})},B.getMaxIndex=function(){return V.getCurrentItems().length-1},B.getItemById=function(e){return V.getItemByAttributeValue("id",e)},B.getItemByImageurl=function(e){return V.getItemByAttributeValue("imageurl",e)},V.getItemByAttributeValue=function(e,t){for(let n=0,a=V.items.length;n<a;n++)if(V.items[n][e]===t)return V.items[n];return null},B.getNextItem=function(e){let t=e;return t<B.getMaxIndex()?t++:t=0,B.getItemByIndex(t)},B.getPreviousItem=function(e){var t=B.getMaxIndex();let n=e;return e>0?n--:n=t,B.getItemByIndex(n)},B.getItemByIndex=function(e){var t=V.getCurrentItems();return!t||t.length<1||t.length<e?null:t[e]||null},B.getItemIndex=function(e){var t=e||V.selectedItem,n=-1,a=V.getCurrentItems();for(let e=0,i=a.length;e<i;e++)if(a[e].id===t.id)return n=e;return n},B.initialize=function(e){V.eventBus=e};const R={},H={__:R};R.oDefaults={sSelectorNextBtn:".nm-mediagallery-browse .nm-nextarrow",sSelectorPrevBtn:".nm-mediagallery-browse .nm-backarrow",sSelectorSliderItemLink:".nm-mediagallery-item a",sSelectorSliderItem:".nm-mediagallery-item",sSelectorDataCatAttr:"data-category",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorModule:".nm-md-mediagallery-media-list",sClassShowOverview:"nm-md-mediagallery-media-list-overview",sSelectorOverviewSwitch:".nm-mediagallery-categories-overview",sSelectorOverview:".nm-mediagallery-categories-overview",sSelectorDownloadbox:".nm-mediagallery-download-infobox",sSelectorDownloadIcon:".nm-mediagallery-download",sIdDropdownList:"#nm-mediagallery-category-list-select",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorMediagalleryModule:".nm-md-mediagallery-media-list",sIDprefix:"mg_item_"},R.addEvents=function(){var e=jQuery("body");R.removeEvents(),R.eventBus.one(r.appEvents.LAYER_CLOSE,R.onLayerClosing),e.on("click.mg_prevnext",R.oDefaults.sSelectorPrevBtn,{direction:"back"},R.handlePagePrevNextClick),e.on("click.mg_prevnext",R.oDefaults.sSelectorNextBtn,{direction:"next"},R.handlePagePrevNextClick),e.on("mousedown.mg_stage",R.oDefaults.sSelectorSlideContainer,R.onMouseDown),e.on("click.mg_slider_item",R.oDefaults.sSelectorSliderItemLink,R.handleSliderItemClick),e.on("click.mg_category",R.oDefaults.sSelectorCategoryItem,R.handleCategoryChangeClick),e.on("keydown.mg_browse_arrows",R.handleKeyDown),e.on("change.mg_dropdown_select",R.oDefaults.sIdDropdownList,R.handleCategoryDropdownChanges),e.on("keyup.mediagallery",R.handleEscKey),e.on("click.mediagallery",".nm-layer-wrapper",R.handleShaderClick)},R.removeEvents=function(){var e=jQuery("body");e.off("click.mg_prevnext",R.oDefaults.sSelectorPrevBtn,R.handlePagePrevNextClick),e.off("click.mg_prevnext",R.oDefaults.sSelectorNextBtn,R.handlePagePrevNextClick),e.off("mousedown.mg_stage",R.oDefaults.sSelectorSlideContainer,R.onMouseDown),e.off("click.mg_slider_item",R.oDefaults.sSelectorSliderItemLink,R.handleSliderItemClick),e.off("click.mg_category",R.oDefaults.sSelectorCategoryItem,R.handleCategoryChangeClick),e.off("keydown.mg_browse_arrows",R.handleKeyDown),e.off("change.mg_dropdown_select",R.oDefaults.sIdDropdownList,R.handleCategoryDropdownChanges),e.off("keyup.mediagallery",R.handleEscKey),e.off("click.mediagallery",".nm-layer-wrapper",R.handleShaderClick)},R.onLayerClosing=function(){var e,t;R.removeEvents(),window.location.hash.indexOf("mediagallery=")>-1&&(e=document.body.scrollTop,t=document.documentElement.scrollTop,window.location.hash=window.location.hash.replace(/(mediagallery=){1}\w*(\|){1}\d*(&)?/,""),document.body.scrollTop=e,document.documentElement.scrollTop=t)},R.onMouseDown=function(e){R.mousePosX=e.pageX,jQuery("body").one("mouseup.mg_stage",R.oDefaults.sSelectorSlideContainer,R.onMouseUp)},R.onMouseUp=function(e){Math.abs(R.mousePosX-e.pageX)>25&&(R.mousePosX-e.pageX>0?R.triggerNextClick():R.triggerPrevClick())},R.handleEscKey=function(e){27===e.keyCode&&R.closeLayer()},R.galleryIsOpened=function(){return jQuery(R.oDefaults.sSelectorMediagalleryModule).length>0},R.closeLayer=function(){jQuery([R.oDefaults.sSelectorMediagalleryModule,".nm-button-close"].join(" ")).trigger("click")},R.handleShaderClick=function(e){if(R.galleryIsOpened()){h.dom.isElementOutsideOfElementWithSelector(e.target,R.oDefaults.sSelectorMediagalleryModule)&&!jQuery(e.target).hasClass("nm-mediagallery-image")&&(R.cancelEvent(e),R.closeLayer())}},R.isInOverviewMode=function(){return jQuery(R.oDefaults.sSelectorModule).hasClass(R.oDefaults.sClassShowOverview)},R.handleKeyDown=function(e){37===e.keyCode&&R.triggerPrevClick(),39===e.keyCode&&R.triggerNextClick()},R.triggerNextClick=function(){var e=jQuery(R.oDefaults.sSelectorNextBtn);e.hasClass("nm.hidden")||e.trigger("click")},R.triggerPrevClick=function(){var e=jQuery(R.oDefaults.sSelectorPrevBtn);e.hasClass("nm.hidden")||e.trigger("click")},R.handlePagePrevNextClick=function(e){if(R.isInOverviewMode())return!1;R.cancelEvent(e);const t=e.data.direction,n=B.getItemIndex(),a="next"===t?B.getNextItem(n):B.getPreviousItem(n);R.triggerItemSelectionUpdate(a)},R.handleSliderItemClick=function(e){R.cancelEvent(e);const t=jQuery(this).parent().attr("id");if(!t)return console.warn("item could not be found!"),!1;const n=B.getItemById(t);R.triggerItemSelectionUpdate(n)},R.showOverview=function(){var e=jQuery(R.oDefaults.sSelectorModule);jQuery(".nm-mediagallery-categories").find(".nm-active").removeClass("nm-active"),jQuery(R.oDefaults.sSelectorOverviewSwitch).addClass("nm-active"),e.addClass(R.oDefaults.sClassShowOverview)},R.hideOverview=function(){var e=jQuery(R.oDefaults.sSelectorModule),t=jQuery(".nm-mediagallery-categories");t.find(".nm-active").removeClass("nm-active"),e.removeClass(R.oDefaults.sClassShowOverview);const n=B.getSelectedCategory();t.find('[data-category="'+n+'"]').addClass("nm-active")},R.handleCategoryChangeClick=function(e){R.cancelEvent(e);const t=jQuery(this).attr(R.oDefaults.sSelectorDataCatAttr);"overview"===t?R.isInOverviewMode()?R.hideOverview():R.showOverview():(R.isInOverviewMode()&&R.hideOverview(),R.triggerCategoryUpdate(t))},R.handleCategoryDropdownChanges=function(e){R.cancelEvent(e);const t=this.value;"overview"===t?R.isInOverviewMode()?R.hideOverview():R.showOverview():(R.isInOverviewMode()&&R.hideOverview(),R.triggerCategoryUpdate(t))},R.triggerCategoryUpdate=function(e){B.setSelectedCategory(e);if(!B.getSelectedItem())return!1;B.getItemIndex()>-1?R.triggerItemSelectionUpdate(B.getSelectedItem()):R.triggerItemSelectionUpdate(B.getItemByIndex(0))},R.triggerItemSelectionUpdate=function(e){R.isInOverviewMode()&&(B.getItemIndex(e)<0&&B.setSelectedCategory("all"),R.hideOverview()),B.setSelectedItem(e),R.updateBrowseArrows()},R.updateBrowseArrows=function(){const e=B.getMaxIndex(),t=jQuery(R.oDefaults.sSelectorPrevBtn),n=jQuery(R.oDefaults.sSelectorNextBtn);e<1?(t.addClass("nm-hidden"),n.addClass("nm-hidden")):(t.removeClass("nm-hidden"),n.removeClass("nm-hidden"))},R.parseHash=function(e){const t={category:null,index:-1};if(e.indexOf("mediagallery=")>-1){let n=e.split("mediagallery=")[1];n=decodeURI(n),n=n.split("&")[0];const a=n.split("|");2===a.length&&(t.category=a[0],t.index=parseInt(a[1],10)),1!==a.length||isNaN(parseInt(a[0],10))||(t.category="all",t.index=parseInt(a[0],10)),parseInt(t.index,10)>0&&(t.index=t.index-1)}return t},R.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},R.initializeDataAndViews=function(){if(R.galleryIsOpened()){R.addEvents(),R.initializeModel();const e=R.parseHash(window.location.hash),t=B.getAllItems();if(!e.category||!t||!t.length||e.index>=t.length)return console.log("could not enter with preselection!"),!1;const n=t[e.index];R.triggerCategoryUpdate(e.category),R.triggerItemSelectionUpdate(n)}},R.initializeModel=function(){var e,t,n,a=jQuery(R.oDefaults.sSelectorModule).find(R.oDefaults.sSelectorSliderItem),i=[];let o;jQuery.each(a,(function(a,o){e=jQuery(o),(t={}).category=e.attr("data-category")?e.attr("data-category").toLowerCase():"all",t.description=e.attr("data-description")||"",t.contenttype=e.attr("data-content-type")?e.attr("data-content-type"):"image",t.imageurl=e.attr("data-image-url")||null,t.thumburl=e.attr("data-thumb-url"),t.posterurl=e.attr("data-poster-url")||null,t.videosrc=e.attr("data-video-src")||null,t.downloadlink=e.attr("data-download-link")||null,t.id=e.attr("id"),i.push(t),e.hasClass("nm-active")&&(n=t)})),n=n||i[0],B.setAllItems(i),a=jQuery(R.oDefaults.sSelectorCategoryItem),i=[],jQuery.each(a,(function(){e=jQuery(this),t=e.attr(R.oDefaults.sSelectorDataCatAttr),i.push(t),e.hasClass("nm-active")&&(o=t)})),B.setAllCategories(i),o=o||"all",B.setSelectedCategory(o),B.setSelectedItem(n)},H.initialize=function(e){R.eventBus=e,R.eventBus.on(r.appEvents.LAYER_LOADED,R.initializeDataAndViews)};const Q={},F={__:Q};Q.oDefaults={sSelectorCounterContainer:".nm-md-mediagallery-media-list .nm-counter",sSelectorActiveTxt:".nm-active",sSelectorTotalTxt:".nm-total"},Q.addEvents=function(){Q.eventBus.on(r.appEvents.MEDIAGALLERY_ITEM_CHANGED,Q.handleUpdates)},Q.handleUpdates=function(e){Q.updateCounter(e.index,e.maxIndex)},Q.updateCounter=function(e,t){var n=t+1,a=e+1,i=document.querySelector(Q.oDefaults.sSelectorCounterContainer+" "+Q.oDefaults.sSelectorActiveTxt),o=document.querySelector(Q.oDefaults.sSelectorCounterContainer+" "+Q.oDefaults.sSelectorTotalTxt);i&&(i.innerHTML=a),o&&(o.innerHTML=n)},F.initialize=function(e){Q.eventBus=e,Q.addEvents()};const O={},z={__:O};O.oDefaults={sSelectorCurrentDownloadBtn:".nm-mediagallery-download-current",sSelectorDownloadAllBtn:".nm-mediagallery-download-all",sIdCheckBox:"#nm-mediagallery-download-checkbox",sSelectorLinks:".nm-mediagallery-download a",sSelectorDownloadBox:".mediagallery-download-infobox"},O.addEvents=function(){O.eventBus.on(r.appEvents.MEDIAGALLERY_ITEM_CHANGED,O.handleUpdates),jQuery("body").on("click.mg_download_link",O.oDefaults.sSelectorLinks,O.closeDownloadBox)},O.handleUpdates=function(e){var t=jQuery([O.oDefaults.sSelectorCurrentDownloadBtn," a"].join("")),n=jQuery(".nm-mediagallery-download");e&&e.item?(e.item.downloadlink?t.attr("href",e.item.downloadlink).removeClass("nm-hidden"):(t.addClass("nm-hidden"),jQuery(O.oDefaults.sSelectorDownloadAllBtn).length<1?n.addClass("nm-hidden"):n.removeClass("nm-hidden")),"video"===e.item.contenttype?t.addClass("nm-hidden"):t.removeClass("nm-hidden")):console.warn("no link url to update!!")},O.closeDownloadBox=function(){jQuery(O.oDefaults.sIdCheckBox).prop("checked",!1),jQuery(O.oDefaults.sSelectorDownloadBox).removeClass("nm-checked")},z.initialize=function(e){O.eventBus=e,O.addEvents()};const G='<div class="nm-prevent-video-click"></div>\n<div class="nm-controls-wrap-video">\n\n\t<div class="nm-video-loader">\n\t\t<div class="nm-loader-played"></div>\n\t\t<div class="nm-loader-loaded"></div>\n\t</div>\n\t<div class="nm-controls-video clearfix">\n\t\t<div class="nm-button-play-pause nm-play nm-j-play-btn">\n\t\t\t<button class="nm-video-button-play" type="button" title="Play/Pause"></button>\n\t\t\t<button class="nm-video-button-pause" type="button" title="Play/Pause"></button>\n\t\t</div>\n\t\t<div class="nm-title-wrap">\n\t\t\t<div class="nm-title"><span class="nm-el-lbl nm-el-lbl-01 nm-at-lbl-inv"></span></div>\n\t\t\t<div class="nm-time">\n\t\t\t\t<span class="nm-time-played ">00:00</span>\n\t\t\t\t<span class="nm-time-break"> | </span>\n\t\t\t\t<span class="nm-time-duration">00:00</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="nm-button-fullscreen nm-j-fullscreen-btn">\n\t\t\t<button class="" type="button" title="Fullscreen"></button>\n\t\t</div>\n\n\t\t<div class="nm-button-mute nm-mute nm-j-mute-btn">\n\t\t\t<button class="" type="button" title="Mute"></button>\n\t\t</div>\n\t</div>\n</div>\n<div class="nm-button-play nm-button-overlay nm-j-play-btn">\n\t<button class="nm-video-button-play" type="button" title="Play"><span class="nm-image-replace">Play</span></button>\n</div>',W={},U={__:W};W.oDefaults={sSelectorStage:".nm-mediagallery-stage",sSelectorThumbsContainer:".nm-mediagallery-thumbs",animationDuration:250,sSelectorModule:".nm-md-mediagallery-media-list",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorVideoSlide:".nm-mediagallery-detail-video",sSelectorImageSlide:".nm-mediagallery-detail-img",imageTemplateString:'<div class="nm-mediagallery-detail-img">\x3c!--[if IE 8 ]><img src="" /><![endif]--\x3e</div>',videoTemplateString:'<div class="nm-mediagallery-detail-video"><div class="nm-mediaplayer nm-video"><video src="" title="" poster=""></video>\x3c!--[if IE 8 ]><img src="" /><![endif]--\x3e'+h.template.render(G,null)+"</div></div>"},W.defaultVideoWidth=1920,W.defaultVideoHeight=1080,W.nativeDimensions={width:0,height:0},W.mousePosX=0,W.resizeStage=function(){var e=jQuery(W.oDefaults.sSelectorThumbsContainer).height(),t=jQuery("body").innerHeight()-e;jQuery(W.oDefaults.sSelectorModule).hasClass(W.oDefaults.sClassShowThumbs)?jQuery(W.oDefaults.sSelectorSlideContainer).height(jQuery("body").innerHeight()):jQuery(W.oDefaults.sSelectorSlideContainer).height(t)},W.contentIsResized=function(){var e=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer).width(),t=W.getNewContentHeight();return!(W.nativeDimensions.width<e&&W.nativeDimensions.height<t)},W.addEvents=function(){W.eventBus.on(r.appEvents.MEDIAGALLERY_ITEM_CHANGED,W.handleItemSelectionChange),W.eventBus.on(r.appEvents.LAYER_LOADED,W.checkNativeContentSize),W.eventBus.on(r.appEvents.MEDIAGALLERY_RESIZED,W.checkNativeContentSize),jQuery(window).on("resize",W.checkNativeContentSize)},W.getImageInfoPromise=function(e){return new Promise((function(t,n){var a=new Image;a.onload=function(){var e=this.width,n=this.height;W.nativeDimensions.width=e,W.nativeDimensions.height=n,t({width:e,height:n})},a.onerror=function(){n("could not load image")},a.src=e}))},W.handleItemSelectionChange=function(e){if(console.log("data",e),!e.changed)return console.log("nothing changed"),!1;W.eventBus.once(r.appEvents.MEDIAGALLERY_SLIDED,(function(){W.waitForDescriptionTextboxResizing(e)}))},W.waitForDescriptionTextboxResizing=function(e){e.item&&e.item?W.removeOldSlide().then((function(){return W.getNewSlide(e.item)})).then((function(e){return W.appendNewSlide(e)})).then((function(){W.isVideoSlide()&&W.startVideoSlide()})).then(void 0,(function(e){console.log("Error appending new slide:",e)})):console.warn("data missing!!!!",e)},W.getNewSlide=function(e){return"video"===e.contenttype?W.createVideoSlide(e):W.createImageSlide(e)},W.isVideoSlide=function(){return 1===jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorVideoSlide).length},W.stopVideoSlide=function(){jQuery(".nm-video video").each((function(){this.pause()}))},W.startVideoSlide=function(){I.handlerLayer({domElement:jQuery(W.oDefaults.sSelectorStage)})},W.removeOldSlide=function(){return new Promise((function(e){var t=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer);t.addClass("nm-animating"),W.isVideoSlide()&&W.stopVideoSlide(),t.animate({opacity:0},W.oDefaults.animationDuration,"easeOutSine"),setTimeout((function(){t.empty(),t.css("height",W.getNewContentHeight()),e(t)}),W.oDefaults.animationDuration)}))},W.appendNewSlide=function(e){return new Promise((function(t){var n=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer);n.css("opacity",0),e.appendTo(n),W.checkNativeContentSize(),n.removeClass("nm-animating"),n.animate({opacity:1},W.oDefaults.animationDuration,"easeOutSine"),setTimeout((function(){t(n)}),W.oDefaults.animationDuration)}))},W.createImageSlide=function(e){if(!e||!e.imageurl)return Promise.reject("image url missing!!!");const t=e.imageurl;return W.getImageInfoPromise(t).then((function(){var e=jQuery(W.oDefaults.imageTemplateString);return e.css("background-image","url("+t+")"),Promise.resolve(e)}))},W.getBackgroundImageURL=function(e){var t=e.css("background-image");return t=t?t.replace(/^url\(["']?/,"").replace(/["']?\)$/,""):e.find("image").attr("src")},W.checkNativeContentSize=function(){if(0===jQuery(W.oDefaults.sSelectorStage).length)return!0;if(this&&"resize"===this.type)return W.resizeIntervalID&&clearInterval(W.resizeIntervalID),W.resizeIntervalID=setInterval((function(){clearInterval(W.resizeIntervalID),W.resizeIntervalID=null,W.checkNativeContentSize()}),250),!1;let e;if(W.resizeStage(),0===W.nativeDimensions.width)if(W.isVideoSlide())W.nativeDimensions.width=W.defaultVideoWidth,W.nativeDimensions.height=W.defaultVideoHeight;else{let t=jQuery(W.oDefaults.sSelectorImageSlide),n=W.getBackgroundImageURL(t);e=W.getImageInfoPromise(n)}e||(e=Promise.resolve()),e.then((function(){var e=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer).find([W.oDefaults.sSelectorVideoSlide,W.oDefaults.sSelectorImageSlide].join(","));W.contentIsResized()?e.removeClass("nm-mediagallery-detail-img-native-size"):e.addClass("nm-mediagallery-detail-img-native-size"),W.isVideoSlide()&&W.resizeVideoSlideContainer()}))},W.createVideoSlide=function(e){return e&&e.videosrc?new Promise((function(t){var n=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer),a=jQuery(W.oDefaults.videoTemplateString),i=n.width();W.nativeDimensions.width=W.defaultVideoWidth,W.nativeDimensions.height=W.defaultVideoHeight,W.nativeDimensions.width<i&&a.addClass("nm-mediagallery-detail-img-native-size"),a.find("video").attr({src:e.videosrc,poster:e.posterurl}),W.resizeVideoSlideContainer(a),t(a)})):Promise.reject("invalid video slide")},W.resizeVideoSlideContainer=function(e){var t=jQuery(W.oDefaults.sSelectorStage).find(W.oDefaults.sSelectorSlideContainer),n=W.getNewContentHeight(),a=t.width(),i=W.nativeDimensions.width/W.nativeDimensions.height,o=0;let r=e||t.find(W.oDefaults.sSelectorVideoSlide);r.length&&(o=(o=a/W.nativeDimensions.width*W.nativeDimensions.height<n?a/W.nativeDimensions.width:n*i/W.nativeDimensions.width)*W.nativeDimensions.width/a*100,r.css("width",o+"%"))},W.getNewContentHeight=function(){var e=jQuery(W.oDefaults.sSelectorThumbsContainer).height(),t=jQuery("body").innerHeight()-e;return console.log("THUMBS: "+e+" - BROWSER: "+jQuery("body").innerHeight()+" - "+t),t},U.initialize=function(e){W.eventBus=e,W.addEvents()};const q={},X={__:q};q.oDefaults={sSelectorModule:".nm-md-mediagallery-media-list",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorDescription:".nm-mediagallery-thumbs-description p",sSelectorThumbs:".nm-mediagallery-show-thumbs",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorMediaItem:".nm-mediagallery-item",sSelectorThumbslider:".nm-mediagallery-thumbs-slider",sSelectorThumbList:".nm-mediagallery-thumbs-slider ul",animationDuration:800},q.addEvents=function(){q.eventBus.on(r.appEvents.MEDIAGALLERY_ITEM_CHANGED,q.handleItemUpdates),q.eventBus.on(r.appEvents.MEDIAGALLERY_CATEGORY_CHANGED,q.handleCategoryUpdates),jQuery("body").on("click",q.oDefaults.sSelectorThumbs,q.handleShowThumbs)},q.handleItemUpdates=function(e){if(q.centerSelectedItem(e),!e.changed)return!1;let t=jQuery(q.oDefaults.sSelectorMediaItem),n=e.item.id;t.removeClass("nm-active"),jQuery("#"+n).addClass("nm-active"),q.updateDescriptionText(e.item.description)},q.centerSelectedItem=function(e){if(e&&e.item&&e.item.id){let t=jQuery(q.oDefaults.sSelectorThumbslider),n=jQuery(q.oDefaults.sSelectorThumbList);if(t.width()<n.width()){let a=jQuery("#"+e.item.id),i=a.width(),o=a.offset().left+.5*i,r=.5*t.width()-o,l=parseInt(n.css("margin-left"),10)+r+.5*i,s=t.width()-n.width();l<0?(l=l<s?s:l,n.css({"margin-left":Math.round(l)+"px"})):n.removeAttr("style")}else n.removeAttr("style")}},q.handleShowThumbs=function(e){q.cancelEvent(e),jQuery(q.oDefaults.sSelectorModule).toggleClass(q.oDefaults.sClassShowThumbs);let t=q.oDefaults.animationDuration;jQuery(q.oDefaults.sSelectorModule).hasClass(q.oDefaults.sClassShowThumbs)&&(t=0),setTimeout((function(){q.eventBus.emit(r.appEvents.MEDIAGALLERY_RESIZED)}),t)},q.handleCategoryUpdates=function(e){var t=jQuery(q.oDefaults.sSelectorCategoryItem);t.removeClass("nm-active"),t.filter('[data-category="'+e.category+'"]').addClass("nm-active");let n=jQuery(q.oDefaults.sSelectorMediaItem);"all"===e.category?n.addClass("nm-selected"):(n.removeClass("nm-selected"),n.filter('[data-category="'+e.category+'"]').addClass("nm-selected"))},q.updateDescriptionText=function(e){jQuery(q.oDefaults.sSelectorDescription).css("opacity","0"),setTimeout((function(){document.querySelectorAll(q.oDefaults.sSelectorDescription)[0].innerHTML=e,q.eventBus.emit(r.appEvents.MEDIAGALLERY_SLIDED)}),300),setTimeout((function(){jQuery(q.oDefaults.sSelectorDescription).css("opacity","1")}),q.oDefaults.animationDuration+300)},q.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},X.initialize=function(e){q.eventBus=e,q.addEvents()};class Y extends HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._bindContextToFunctions(),this.data=Object.assign({},e.dataset),this.data.useTextResourceKeys&&(this.data.message=window.i18n[this.data.message],this.data.headline=window.i18n[this.data.headline],this.data.actionButtonLinkText=window.i18n[this.data.actionButtonLinkText])}static get type(){return"MessageLayerElement"}static async getContent(e){return new Y(e)}connectedCallback(){this._render()}_bindContextToFunctions(){this._closeLayer=this._closeLayer.bind(this),this._render=this._render.bind(this)}_render(){this.innerHTML=h.template.render('\n\t<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t<div class="nm-modal-layer__header">\n\t\t\t<div class="nm-modal-layer__headline-wrap" data-type="{{=it.type}}">\n\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">{{=it.headline}}</h2>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t<div data-layer-options=\'{"onEscClick": false, "onShaderClick": false, "centerVertically": true, "addCssClass": "nm-module-message-layer"}\'>\n\t\t\t<p class="nm-modal-layer__message audi-copy-m">{{=it.message}}</p>\n\t\t</div>\n\t\t<div class="nm-modal-layer__footer">\n\t\t\t<a class="nm-modal-layer__confirm-button audi-button" href="{{=it.actionButtonLinkUrl}}">\n\t\t\t\t<span class="audi-button__text">\n\t\t\t\t\t{{=it.actionButtonLinkText}}\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n',this.data)}_closeLayer(){this._triggerClose()}}r.modalLayer.registerLayerType(Y),void 0===window.customElements.get("audi-modal-layer-message-element")&&window.customElements.define("audi-modal-layer-message-element",Y);class K extends HTMLElement{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._bindContextToFunctions(),this.data=Object.assign({},e.dataset)}static get type(){return"ModalLayerInterstitialElement"}static get defaults(){return{closeButton:".nm-button-cancel"}}static async getContent(e){return new K(e)}addEvents(){this.closeButton.addEventListener("click",this._closeLayer)}removeEvents(){this.closeButton.removeEventListener("click",this._closeLayer)}connectedCallback(){this._render().then((()=>this.addEvents()))}_bindContextToFunctions(){this._closeLayer=this._closeLayer.bind(this),this._render=this._render.bind(this)}async _render(){const e=SETUPS.get("nemo.InterstitialLayerLink");this.data.body=await this._fetchContent(e),this.innerHTML=h.template.render('\n\t<div class="modal-layer__inner" role="alert">\n\t\t<div class="modal-layer__inner-header">\n\t\t</div>\n\t\t<div class="modal-layer__inner-content">\n\t\t\t<div data-layer-options=\'{"onEscClick": false, "onShaderClick": false, "centerVertically": true, "addCssClass": "nm-module-interstitial-layer"}\'>\n\t\t\t\t{{=it.body}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n',this.data),this.closeButton=this.querySelector(K.defaults.closeButton);const t=new CustomEvent("content:rendered",{detail:{element:this}});document.dispatchEvent(t)}async _fetchContent(e){try{return await r.content.getContent(e,!1)}catch(e){return e.message}}beforeClose(){this._dispatchCloseInterstitialEvent()}_closeLayer(e){e.preventDefault(),e.stopPropagation(),this._triggerClose();let t=e.target.getAttribute("href");t&&"#"!==t&&r.router.open("",t)}_dispatchCloseInterstitialEvent(){document.dispatchEvent(new CustomEvent(r.appEvents.INTERSTITIAL_LAYER_CLOSE))}async _triggerClose(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const t=this.closest("modal-layer-wrapper");await t.close(this,e)}catch(e){throw console.warn("_triggerClose - modal layer wrapper missing."),e}}}r.modalLayer.registerLayerType(K),void 0===window.customElements.get("modal-layer-interstitial-element")&&window.customElements.define("modal-layer-interstitial-element",K);var Z={},J={__:Z};Z.oDefaults={sClassNotificationBar:"nm-md-notification-bar",sSelectorNotificationBarCancel:".nm-md-nb-cancel",sSelectorNotificationBarLink:".nm-md-nb-link",sValueNotificationCanceled:"nb-canceled"},Z.addEvents=function(){Z.eventBus.on(r.appEvents.PAGE_LOADED,Z.checkForNotificationBar),Z.domDelegate.on("click",Z.oDefaults.sSelectorNotificationBarCancel,Z.cancelNotificationbar),Z.domDelegate.on("click",Z.oDefaults.sSelectorNotificationBarLink,Z.cancelNotificationbar)},Z.readLocalStorageFlag=function(e){return Z.localStorageAlternative?Z.localStorageAlternative[e]:localStorage.getItem(e)},Z.writeLocalStorageFlag=function(e){try{localStorage.setItem(e,!0)}catch(t){Z.localStorageAlternative=Z.localStorageAlternative?Z.localStorageAlternative:{},Z.localStorageAlternative[e]=!0}},Z.checkForNotificationBar=function(){Z.readLocalStorageFlag(Z.oDefaults.sValueNotificationCanceled)||Z.showNotificationBar()},Z.showNotificationBar=function(){document.getElementsByClassName(Z.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(Z.oDefaults.sClassNotificationBar).length>0&&document.getElementsByClassName(Z.oDefaults.sClassNotificationBar)[0].classList.add("nm-j-notification-foldout")},Z.hideNotificationBar=function(){document.getElementsByClassName(Z.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(Z.oDefaults.sClassNotificationBar).length>0&&document.getElementsByClassName(Z.oDefaults.sClassNotificationBar)[0].classList.remove("nm-j-notification-foldout")},Z.cancelNotificationbar=function(){Z.writeLocalStorageFlag(Z.oDefaults.sValueNotificationCanceled),Z.hideNotificationBar()},J.initialize=function(e){Z.eventBus=e,Z.domDelegate=h.dom.getEventDelegate("body"),Z.addEvents(),Z.checkForNotificationBar()};s(558);const ee={},te={__:ee};ee.oDefaults={sSelectorPanoramaModule:".nm-module-panorama",sSelectorPanoramaWrapper:".nm-j-panorama",sSelectorPanoramaPoster:".nm-md-panorama-static",sSelectorPanoramaActivate:".nm-j-panorama-activate",sSelectorPanoramaCollapse:".nm-j-panorama-close-fullscreen"},ee.threejsURL=window.webpack_public_path+"bundle.panorama.js",ee.threejsLoaded=!1,ee.panoramaIsFullscreen=!1,ee.userInteraction=!1,ee.debugEnabled=!1,ee.gyroAvailable=void 0!==window.DeviceOrientationEvent,ee.iOS=h.device.isiOS(),ee.mobileDevice=h.device.isMobile(),ee.topRange=28,ee.bottomRange=-85,ee.animationID=null,ee.fullScreenElementID=null,ee.onMouseDownMouseX=0,ee.onMouseDownMouseY=0,ee.logitude=0,ee.onMouseDownLon=0,ee.latitude=0,ee.onMouseDownLat=0,ee.alpha=0,ee.beta=0,ee.gamma=0,ee.threeReady=function(e){ee.debug("threejs_loaded!"),ee.THREE=e.default,ee.threejsLoaded=!0,ee.addEvents(),ee.enableInteraction(),ee.addDeviceOrientationControls()},ee.enableInteraction=function(){h.dom.getElementsArray(ee.oDefaults.sSelectorPanoramaActivate).forEach((function(e){e.setAttribute("data-state","enabled"),ee.preloadTexture(e)}))},ee.preloadTexture=function(e){var t=new Image,n=h.dom.closest(e,ee.oDefaults.sSelectorPanoramaWrapper),a=h.dom.getDataAttribute(n,"texture-url");a=h.device.isMobile()?a+"?imwidth=4000":a,t.setAttribute("loading","lazy"),t.dataset.src=a},ee.activatePanoramaClickHandler=function(){var e,t=h.dom.closest(this,ee.oDefaults.sSelectorPanoramaModule);h.dom.isElement(t)&&(ee.initPanoramaViewer(t),ee.activateUserControls(t),ee.animatePanorama(),ee.isFullScreen()||(e=h.dom.getElement(ee.oDefaults.sSelectorPanoramaWrapper,t),ee.switchToFullScreen(e)))},ee.collapsePanoramaClickHandler=function(){var e=h.dom.closest(this,ee.oDefaults.sSelectorPanoramaModule);h.dom.isElement(e)&&(ee.deactivateUserControls(e),ee.closePanoramaViewer(e),ee.exitFullScreen())},ee.collapsePanoramaHandler=function(e){var t=h.dom.closest(e,ee.oDefaults.sSelectorPanoramaModule);h.dom.isElement(t)&&(ee.deactivateUserControls(t),ee.closePanoramaViewer(t))},ee.activateUserControls=function(e){var t=h.dom.getElement("canvas",e);ee.addWindowResizeEvent(),ee.addMouseInteractionEvents(t),ee.addTouchAndGesturesInteractionEvents(t),ee.addDeviceOrientationEvent()},ee.addWindowResizeEvent=function(){ee.throttleResizeHandler=h.dom.throttle(ee.panoramaResizeHandler,250),window.addEventListener("resize",ee.throttleResizeHandler)},ee.addMouseInteractionEvents=function(e){e.addEventListener("mousedown",ee.handlePanoramaMouseDown,!1),ee.throttlePanoramaMouseMove=h.dom.throttle(ee.handlePanoramaMouseMove,40),e.addEventListener("mousemove",ee.throttlePanoramaMouseMove,!1),e.addEventListener("mouseup",ee.handlePanoramaMouseUp,!1),ee.throttlePanoramaWheelAndMultitouchHandler=h.dom.throttle(ee.handlePanoramaWheelAndMultitouch,500),e.addEventListener("wheel",ee.throttlePanoramaWheelAndMultitouchHandler,!1),e.addEventListener("context",ee.handlePanoramaWheelAndMultitouch,!1)},ee.addTouchAndGesturesInteractionEvents=function(e){e.addEventListener("gesturestart",ee.handlePanoramaWheelAndMultitouch,!1),e.addEventListener("gesturechange",ee.throttlePanoramaWheelAndMultitouchHandler,!1),e.addEventListener("gestureend",ee.handlePanoramaWheelAndMultitouch,!1),e.addEventListener("touchstart",ee.handlePanoramaTouchStart,!1),ee.throttlePanoramaTouchMoveHandler=h.dom.throttle(ee.handlePanoramaTouchMove,20),e.addEventListener("touchmove",ee.throttlePanoramaTouchMoveHandler,!1),e.addEventListener("touchend",ee.handlePanoramaMouseUp,!1)},ee.addDeviceOrientationEvent=function(){ee.iOS?null!==window.DeviceMotionEvent&&(ee.throttleIOSMotionHandler=h.dom.throttle(ee.handleIOSMotion,20),window.addEventListener("devicemotion",ee.throttleIOSMotionHandler)):window.addEventListener("deviceorientation",ee.setAndroidOrientationControls,!0)},ee.deactivateUserControls=function(e){var t=h.dom.getElement("canvas",e);window.removeEventListener("resize",ee.throttleResizeHandler),t.removeEventListener("mousedown",ee.handlePanoramaMouseDown,!1),t.removeEventListener("mousemove",ee.throttlePanoramaMouseMove,!1),t.removeEventListener("mouseup",ee.handlePanoramaMouseUp,!1),t.removeEventListener("wheel",ee.throttlePanoramaWheelAndMultitouchHandler,!1),t.removeEventListener("context",ee.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("gesturestart",ee.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("gesturechange",ee.throttlePanoramaWheelAndMultitouchHandler,!1),t.removeEventListener("gestureend",ee.handlePanoramaWheelAndMultitouch,!1),t.removeEventListener("touchstart",ee.handlePanoramaTouchStart,!1),t.removeEventListener("touchmove",ee.throttlePanoramaTouchMoveHandler,!1),t.removeEventListener("touchend",ee.handlePanoramaMouseUp,!1),ee.iOS&&null!==window.DeviceMotionEvent&&window.removeEventListener("devicemotion",ee.throttleIOSMotionHandler)},ee.handleIOSMotion=function(e){var t=.02,n=Math.round(e.rotationRate.alpha),a=Math.round(e.rotationRate.beta);switch(window.orientation){case 0:ee.latitude+=n*t,ee.longitude-=a*t;break;case-90:ee.latitude+=a*t,ee.longitude+=n*t;break;case 180:ee.latitude-=n*t,ee.longitude+=a*t;break;case 90:ee.latitude-=a*t,ee.longitude-=n*t}},ee.setAndroidOrientationControls=function(e){e.alpha&&(ee.camera.lookAt(new ee.THREE.Vector3(-1,0,0)),ee.sphereMesh.rotateY(ee.THREE.Math.degToRad(180)),ee.androidOrientationControls=new ee.THREE.DeviceOrientationControls(ee.camera,!0),ee.androidOrientationControls.connect(),ee.androidOrientationControls.update(),window.removeEventListener("deviceorientation",ee.setAndroidOrientationControls,!0))},ee.handlePanoramaMouseDown=function(e){e.preventDefault(),ee.userInteraction=!0,ee.onMouseDownMouseX=e.clientX,ee.onMouseDownMouseY=e.clientY,ee.onMouseDownLon=ee.longitude,ee.onMouseDownLat=ee.latitude},ee.handlePanoramaMouseMove=function(e){e.preventDefault(),ee.userInteraction&&(ee.latitude=.1*(e.clientY-ee.onMouseDownMouseY)+ee.onMouseDownLat,ee.longitude=.1*(ee.onMouseDownMouseX-e.clientX)+ee.onMouseDownLon)},ee.handlePanoramaMouseUp=function(e){ee.userInteraction=!1,e.preventDefault()},ee.handlePanoramaTouchStart=function(e){var t=e.changedTouches[0];e.preventDefault(),1===e.touches.length&&(ee.userInteraction=!0,ee.onMouseDownMouseX=t.clientX,ee.onMouseDownMouseY=t.clientY,ee.onMouseDownLon=ee.longitude,ee.onMouseDownLat=ee.latitude)},ee.handlePanoramaTouchMove=function(e){var t=e.changedTouches[0];e.preventDefault(),1===e.touches.length&&ee.userInteraction&&(ee.latitude=.2*(t.clientY-ee.onMouseDownMouseY)+ee.onMouseDownLat,ee.longitude=.2*(ee.onMouseDownMouseX-t.clientX)+ee.onMouseDownLon)},ee.handlePanoramaWheelAndMultitouch=function(e){e.preventDefault()},ee.closePanoramaViewer=function(e){var t=h.dom.getElement(ee.oDefaults.sSelectorPanoramaWrapper,e);ee.debug("collapsePano - close"),t.setAttribute("data-state",null),t.removeChild(ee.renderer.domElement),ee.androidOrientationControls&&ee.androidOrientationControls.dispose(),ee.remove3DEntity()},ee.panoramaResizeHandler=function(){let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;ee.panoramaIsFullscreen&&(ee.camera.aspect=e/t,ee.camera.updateProjectionMatrix(),ee.renderer.setSize(e,t))},ee.isFullScreen=function(){return!!(document.fullscreenElement||document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)},ee.enterFullScreen=function(e){e.requestFullscreen||(e.requestFullscreen=e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen),e.requestFullscreen()},ee.isFullScreenClosed=function(){ee.isFullScreen()||(ee.fullScreenElement&&ee.collapsePanoramaHandler(ee.fullScreenElement),ee.exitFullScreen())},ee.exitFullScreen=function(){document.exitFullScreen||(document.exitFullScreen=document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen),document.exitFullScreen(),ee.handleFullscreenEvents(!1)},ee.switchToFullScreen=function(e){ee.handleFullscreenEvents(!0),ee.fullScreenElement=e,ee.enterFullScreen(e)},ee.handleFullscreenEvents=function(e){e?(document.addEventListener("webkitfullscreenchange",ee.isFullScreenClosed,!1),document.addEventListener("mozfullscreenchange",ee.isFullScreenClosed,!1),document.addEventListener("fullscreenchange",ee.isFullScreenClosed,!1),document.addEventListener("MSFullscreenChange",ee.isFullScreenClosed,!1)):(document.removeEventListener("webkitfullscreenchange",ee.isFullScreenClosed,!1),document.removeEventListener("mozfullscreenchange",ee.isFullScreenClosed,!1),document.removeEventListener("fullscreenchange",ee.isFullScreenClosed,!1),document.removeEventListener("MSFullscreenChange",ee.isFullScreenClosed,!1))},ee.initPanoramaViewer=function(e){var t=h.dom.getElement(ee.oDefaults.sSelectorPanoramaWrapper,e),n=h.dom.getDataAttribute(t,"texture-url"),a=window.innerWidth,i=window.innerHeight;n=ee.mobileDevice?n+"?imwidth=4000":n,ee.debug("initPanoView"),ee.longitude=0,ee.latitude=0,ee.setUpRenderer(a,i),ee.updateDOMWithRenderer(t),ee.createNewScene(),ee.createNewCamera(a/i),ee.createMeshAndAddPanoramaToScene(ee.createNewSphere(),ee.createSphereMaterial(n)),ee.animatePanorama()},ee.setUpRenderer=function(e,t){ee.renderer=new ee.THREE.WebGLRenderer,ee.renderer.setSize(e,t)},ee.updateDOMWithRenderer=function(e){e.setAttribute("data-state","active"),e.appendChild(ee.renderer.domElement),ee.panoramaIsFullscreen=!0},ee.createNewScene=function(){ee.scene=new ee.THREE.Scene},ee.createNewCamera=function(e){ee.camera=new ee.THREE.PerspectiveCamera(80,e,1,1e3),ee.camera.target=new ee.THREE.Vector3(0,0,0)},ee.createNewSphere=function(){var e=new ee.THREE.SphereGeometry(100,100,60,160);return e.applyMatrix((new ee.THREE.Matrix4).makeScale(-1,1,1)),e},ee.createSphereMaterial=function(e){var t=new ee.THREE.MeshBasicMaterial;return t.map=ee.THREE.ImageUtils.loadTexture(e),t},ee.createMeshAndAddPanoramaToScene=function(e,t){ee.sphereMesh=new ee.THREE.Mesh(e,t),ee.scene.add(ee.sphereMesh)},ee.remove3DEntity=function(){cancelAnimationFrame(ee.animationID),ee.panoramaIsFullscreen=!1,ee.scene=null,ee.camera=null,ee.renderer=null},ee.animatePanorama=function(){ee.panoramaIsFullscreen&&(ee.animationID=requestAnimationFrame(ee.animatePanorama),ee.updatePanoramaStage())},ee.updatePanoramaStage=function(){ee.androidOrientationControls?(ee.androidOrientationControls.alphaOffset=ee.THREE.Math.degToRad(-1*ee.longitude),ee.androidOrientationControls.update()):(ee.latitude=Math.max(ee.bottomRange,Math.min(ee.topRange,ee.latitude)),ee.camera.target.x=500*Math.sin(ee.THREE.Math.degToRad(90-ee.latitude))*Math.cos(ee.THREE.Math.degToRad(ee.longitude)),ee.camera.target.y=500*Math.cos(ee.THREE.Math.degToRad(90-ee.latitude)),ee.camera.target.z=500*Math.sin(ee.THREE.Math.degToRad(90-ee.latitude))*Math.sin(ee.THREE.Math.degToRad(ee.longitude)),ee.camera.lookAt(ee.camera.target)),ee.renderer.render(ee.scene,ee.camera)},ee.debug=function(e){ee.debugEnabled&&console.log("module_panorama: "+e)},ee.addEvents=function(){ee.domEventDelegate.on("click",ee.oDefaults.sSelectorPanoramaActivate,ee.activatePanoramaClickHandler),ee.domEventDelegate.on("click",ee.oDefaults.sSelectorPanoramaCollapse,ee.collapsePanoramaClickHandler)},ee.getContext=function(e){return e&&!e.context?e.domElement||e.element:document},ee.isPanoramaModuleInContext=function(e){var t=ee.getContext(e);return h.dom.getElementsArray(ee.oDefaults.sSelectorPanoramaModule,t).length>0},ee.loadThreeLibrary=function(e){ee.isPanoramaModuleInContext(e)&&Promise.all([s.e(995),s.e(60)]).then(s.bind(s,869)).then(ee.threeReady).catch((e=>{console.error(e)}))},ee.initialize=function(){ee.eventBus.on(r.appEvents.PAGE_LOADED,ee.loadThreeLibrary),ee.eventBus.on(r.appEvents.LAYER_LOADED,ee.loadThreeLibrary),ee.loadThreeLibrary()},ee.addDeviceOrientationControls=function(){ee.THREE.DeviceOrientationControls=function(e){var t,n,a,i,o=this,r=function(e){o.deviceOrientation=e},l=function(){o.screenOrientation=window.orientation||0},s=(t=new ee.THREE.Vector3(0,0,1),n=new ee.THREE.Euler,a=new ee.THREE.Quaternion,i=new ee.THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,o,r,l,s){n.set(r,o,-l,"YXZ"),e.setFromEuler(n),e.multiply(i),e.multiply(a.setFromAxisAngle(t,-s))});this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0,this.connect=function(){l(),window.addEventListener("orientationchange",l,!1),window.addEventListener("deviceorientation",r,!1),o.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",l,!1),window.removeEventListener("deviceorientation",r,!1),o.enabled=!1},this.update=function(){var e,t,n,a,i=o.deviceOrientation;!1!==o.enabled&&i&&(e=i.alpha?ee.THREE.Math.degToRad(i.alpha)+o.alphaOffset:0,t=i.beta?ee.THREE.Math.degToRad(i.beta):0,n=i.gamma?ee.THREE.Math.degToRad(i.gamma):0,a=o.screenOrientation?ee.THREE.Math.degToRad(o.screenOrientation):0,s(o.object.quaternion,e,t,n,a))},this.dispose=function(){o.disconnect()},this.connect()}},te.initialize=function(e){ee.domEventDelegate=h.dom.getEventDelegate("body"),ee.eventBus=e,ee.initialize()};class ne{constructor(){if(ne._instance)return ne._instance;this.handlePageType=this.handlePageType.bind(this),t.stateRegistry.addStore("dbadPageStoreFootnotes",{isNemoHome:!1},{updatePageType:function(e,t){return{...e,isNemoHome:"nemo"===t.typeName&&"home"===t.templateName}}}),ne._instance=this}initialize(e){this.eventBus=e,this.eventBus.on(r.appEvents.PAGE_LOADED,this.handlePageType),this.handlePageType()}handlePageType(){let e,n,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=null!==i&&void 0!==i.domElement?i.domElement.querySelector(".nm-content"):document.querySelector(".nm-content"),null!==e&&(n=e.getAttribute("data-type"),a=e.getAttribute("data-template"),t.stateRegistry.triggerAction("dbadPageStoreFootnotes","updatePageType",{typeName:n,templateName:a}))}}const ae=new ne;const ie=new class{constructor(){!0===SETUPS.get("scope.nemo.editorial.path.entryservice.links.dealer")&&(this._initialize(),this._onStateUpdate=this._onStateUpdate.bind(this),this._patchDealerLinks=this._patchDealerLinks.bind(this),this._markLinksWithPlaceholderAsProcessable=this._markLinksWithPlaceholderAsProcessable.bind(this),this._processLinksWithPlaceholder=this._processLinksWithPlaceholder.bind(this),this._getLinksToPatchWithGivenAttribute=this._getLinksToPatchWithGivenAttribute.bind(this),document.addEventListener("PAGE_READY",this._patchDealerLinks),document.addEventListener("LAYER_LOADED",this._patchDealerLinks),t.stateRegistry.subscribeToStore("dbadDealerStore",this._onStateUpdate))}_initialize(){this.kvpsidPlaceholder="{kvpsid}",this.kvpsid="",this.kvpsSyncIdPlaceholder="{kvpsSyncId}",this.kvpsSyncId=""}_onStateUpdate(e){this.kvpsid=e.kvpsid||"",this.kvpsSyncId=e.kvpsSyncId||"",this._patchDealerLinks()}_patchDealerLinks(){this._markLinksWithPlaceholderAsProcessable("href","data-href-placeholder-url"),this._markLinksWithPlaceholderAsProcessable("data-link-pattern","data-pattern-placeholder-url"),this._processLinksWithPlaceholder("href","data-href-placeholder-url"),this._processLinksWithPlaceholder("data-link-pattern","data-pattern-placeholder-url")}_markLinksWithPlaceholderAsProcessable(e,t){this._getLinksToPatchWithGivenAttribute(e).forEach((n=>{n.setAttribute(t,n.getAttribute(e))}))}_processLinksWithPlaceholder(e,t){this._getLinksToPatchWithGivenAttribute(t).forEach((n=>{const a=n.getAttribute(t).replace(new RegExp(this.kvpsidPlaceholder,"g"),this.kvpsid).replace(new RegExp(this.kvpsSyncIdPlaceholder,"g"),this.kvpsSyncId);n.setAttribute(e,a)}))}_getLinksToPatchWithGivenAttribute(e){return[...document.querySelectorAll("a["+e+'*="'+this.kvpsidPlaceholder+'"], a['+e+'*="'+this.kvpsSyncIdPlaceholder+'"]')]}};var oe=s(954);const re={},le={__:re};re.oDefaults={selectorModuleRenderStage:".nm-md-render-stage",selectorImagesInputs:".nm-render-stage-inputs",selectorThumbnails:".nm-render-stage-thumbnail-item-wrap",selectorThumbnailsContainer:".nm-render-stage-thumbnails",selectorThumbnailsWrapper:".nm-render-stage-thumbnails-wrapper",selectorRenderStage:".nm-render-stage",selectorStageItem:".nm-render-stage-item-wrap",selectorNavigationPrev:".nm-render-stage-prev",selectorNavigationNext:".nm-render-stage-next",selectorThumbnailNavigationPrev:".nm-render-stage-thumbnail-prev",selectorThumbnailNavigationNext:".nm-render-stage-thumbnail-next",selectorInitialRenderImage:"[data-is-initial]"},re.renderStages=[],re.isScrollSnapSupported="scrollSnapType"in document.documentElement.style||"webkitScrollSnapType"in document.documentElement.style||!("classList"in document.createElement("_")),re.nonPolyfillable=re.isScrollSnapSupported||!Element.prototype.addEventListener||!window.requestAnimationFrame,re.RenderStage=function(e){this.context=e,this.imageInputs=h.dom.getElementsArray(re.oDefaults.selectorImagesInputs,this.context),this.maxIndex=this.imageInputs.length,this.scrollContainer=h.dom.getElement(re.oDefaults.selectorRenderStage,this.context),this.scrollPosition=0,this.scrollContainerItem=h.dom.getElement(re.oDefaults.selectorStageItem,this.context),this.thumbnails=h.dom.getElementsArray(re.oDefaults.selectorThumbnails,this.context),this.thumbnailsContainer=h.dom.getElement(re.oDefaults.selectorThumbnailsContainer,this.context),this.thumbnailsWrapper=h.dom.getElement(re.oDefaults.selectorThumbnailsWrapper,this.context),this.currentIndex=0,this.slides=h.dom.getElementsArray(re.oDefaults.selectorStageItem,this.context),this.navNext=h.dom.getElement(re.oDefaults.selectorNavigationNext,this.context),this.navPrev=h.dom.getElement(re.oDefaults.selectorNavigationPrev,this.context),this.thumbnailNavNext=h.dom.getElement(re.oDefaults.selectorThumbnailNavigationNext,this.context),this.thumbnailNavPrev=h.dom.getElement(re.oDefaults.selectorThumbnailNavigationPrev,this.context),this.initialRenderImage=h.dom.getElement(re.oDefaults.selectorInitialRenderImage,this.context),this.initialRenderImage&&(this.currentIndex=this.initialRenderImage.getAttribute("data-index")-1,this.currentIndex>0&&this.jumpToImage(this.currentIndex)),this.scrollContainer.classList.remove("nm-render-stage--loading")},re.RenderStage.prototype.jumpToImage=function(e){const t=this.scrollContainerItem.clientWidth*e;this.scrollContainer.classList.add("nm-render-stage--no-animation"),this.scrollContainer.scrollLeft=t,this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext),this.changeInputPos(e),this.scrollContainer.classList.remove("nm-render-stage--no-animation")},re.RenderStage.prototype.navigationNextArrowClickHandler=function(){this.currentIndex<this.maxIndex&&(this.currentIndex++,this.scrollToImage(this.currentIndex))},re.RenderStage.prototype.navigationPrevArrowClickHandler=function(){this.currentIndex>0&&(this.currentIndex--,this.scrollToImage(this.currentIndex))},re.RenderStage.prototype.thumbnailClickhandler=async function(e){e.preventDefault();let t=0;const n=e.target;this.thumbnails.forEach(((e,a)=>{e===n&&(t=a)})),this.currentIndex=t,await this.scrollToImage(t)},re.RenderStage.prototype.intersectionHandler=function(){if("undefined"!=typeof IntersectionObserver){const e=new IntersectionObserver((e=>{if(e[0].intersectionRatio>=.25){const t=e[0].target.getAttribute("data-index")-1;this.changeInputPos(t),this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext)}}),{root:this.scrollContainer,threshold:.25});this.slides.forEach((t=>{e.observe(t)}))}},re.RenderStage.prototype.thumbnailsScrollHandler=function(){this.handleNavigationVisibility(this.thumbnails,this.thumbnailsContainer,this.thumbnailNavPrev,this.thumbnailNavNext,!0)},re.RenderStage.prototype.thumbnailsThrottleHandler=function(){return h.dom.throttle(this.thumbnailsScrollHandler.bind(this),15)},re.RenderStage.prototype.thumbnailNavigationNextClickhandler=function(){this.translateThumbnailContainer("next")},re.RenderStage.prototype.thumbnailNavigationPrevClickhandler=function(){this.translateThumbnailContainer("prev")},re.RenderStage.prototype.addStageEvents=function(){this.navigationNextArrowClickHandler=this.navigationNextArrowClickHandler.bind(this),this.navigationPrevArrowClickHandler=this.navigationPrevArrowClickHandler.bind(this),this.thumbnailClickhandler=this.thumbnailClickhandler.bind(this),this.thumbnailNavigationNextClickhandler=this.thumbnailNavigationNextClickhandler.bind(this),this.thumbnailNavigationPrevClickhandler=this.thumbnailNavigationPrevClickhandler.bind(this),this.thumbnailsThrottleHandler=this.thumbnailsThrottleHandler(),this.navNext.addEventListener("click",this.navigationNextArrowClickHandler),this.navPrev.addEventListener("click",this.navigationPrevArrowClickHandler),this.thumbnailsContainer.addEventListener("click",this.thumbnailClickhandler),this.thumbnailNavNext.addEventListener("click",this.thumbnailNavigationNextClickhandler),this.thumbnailNavPrev.addEventListener("click",this.thumbnailNavigationPrevClickhandler),this.thumbnailsContainer.addEventListener("scroll",this.thumbnailsThrottleHandler),this.intersectionHandler=this.intersectionHandler.bind(this),this.intersectionHandler(),re.nonPolyfillable||this.addScrollSnapPolyfill()},re.RenderStage.prototype.addScrollSnapPolyfill=function(){const e=h.dom.getElement(".nm-render-stage",this.context);this.snapObject=new oe.ScrollSnap(e,{scrollSnapDestination:"100% 0%",scrollTimeout:50,scrollTime:300}),this.handleScrollSnapEnd=this.handleScrollSnapEnd.bind(this),this.snapObject.bind(this.handleScrollSnapEnd)},re.RenderStage.prototype.handleScrollSnapEnd=function(){this.handleNavigationVisibility(this.slides,this.scrollContainer,this.navPrev,this.navNext)},re.RenderStage.prototype.removeStageEvents=function(){this.navNext.removeEventListener("click",this.navigationNextArrowClickHandler),this.navPrev.removeEventListener("click",this.navigationPrevArrowClickHandler),this.thumbnailsContainer.removeEventListener("click",this.thumbnailClickhandler),this.thumbnailNavNext.removeEventListener("click",this.thumbnailNavigationNextClickhandler),this.thumbnailNavPrev.removeEventListener("click",this.thumbnailNavigationPrevClickhandler),this.scrollContainer.removeEventListener("scroll",this.throttleHandler),this.thumbnailsContainer.removeEventListener("scroll",this.thumbnailsThrottleHandler),this.snapObject&&this.snapObject.unbind(this.handleScrollSnapEnd)},re.RenderStage.prototype.getVisibleThumbnailItems=function(){var e=this,t=[];return e.thumbnails.forEach((function(n){h.dom.isVisible(n,e.thumbnailsContainer,!1)&&t.push(n)})),t},re.RenderStage.prototype.calculateNewScrollPosition=function(e){var t=this.getVisibleThumbnailItems(),n=this.thumbnailsContainer.scrollLeft,a=this.thumbnailsContainer.clientWidth;return"next"===e?n+a-(re.getRightBound(this.thumbnailsContainer)-re.getLeftBound(t[t.length-1])):n-a-(re.getLeftBound(this.thumbnailsContainer)-re.getRightBound(t[0]))},re.RenderStage.prototype.translateThumbnailContainer=function(e){var t=this.calculateNewScrollPosition(e),n=this;h.dom.animateElementX(t,this.thumbnailsContainer,600).then((function(){n.handleNavigationVisibility(n.thumbnails,n.thumbnailsContainer,n.thumbnailNavPrev,n.thumbnailNavNext)})).catch((function(){}))},re.RenderStage.prototype.handleNavigationVisibility=function(e,t,n,a,i){var o=re.getItemVisiblityStatus(e[0],t),r=re.getItemVisiblityStatus(e[e.length-1],t);re.refreshNavigationVisibility(o,n,i),re.refreshNavigationVisibility(r,a,i)},re.RenderStage.prototype.scrollToImage=function(e){var t=this,n=this.scrollContainerItem.clientWidth*e;h.dom.animateElementX(n,this.scrollContainer,300).catch((function(){})).then((function(){t.centerThumb();/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&t.changeInputPos(e)}))},re.RenderStage.prototype.centerThumb=function(){var e=this.thumbnails[this.currentIndex],t=e.offsetLeft-(this.scrollContainer.clientWidth-e.clientWidth)/2;h.dom.isVisible(e,this.thumbnailsContainer,!0)||h.dom.animateElementX(t,this.thumbnailsContainer,300).catch((function(){}))},re.RenderStage.prototype.changeInputPos=function(e){this.imageInputs.map((function(e){e.checked=!1})),this.currentIndex=e,this.imageInputs[e].checked=!0},re.refreshNavigationVisibility=function(e,t,n){var a=n?100:20;2===e.visibleStatus||1===e.visibleStatus&&e.nearestParentBoundPercentage>=a?t.classList.add("nm-hidden"):t.classList.remove("nm-hidden")},re.getItemVisiblityStatus=function(e,t,n){var a,i,o,r,l=n||0;return t.parentNode.style.display="block",a=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=(Math.round(i.right)<=Math.round(a.right)||Math.round(100*Math.abs(i.right/a.right))>=100-l&&Math.round(100*Math.abs(i.right/a.right))<=100+l)&&Math.round(i.right)>=Math.round(a.left),r=(Math.round(i.left)>=Math.round(a.left)||Math.round(100*Math.abs(i.left/a.left))>=100-l&&Math.round(100*Math.abs(i.left/a.left))<=100+l)&&Math.round(i.left)<=Math.round(a.right),t.parentNode.style.display="",re.createBoundingObject(a,i,r,o)},re.createBoundingObject=function(e,t,n,a){var i={};return a&&n?(i.visible=!0,i.visibleStatus=2,i.visibleStatusText="full"):a||n?(i.visible=!0,i.visibleStatus=1,i.visibleStatusText="half"):(i.visible=!1,i.visibleStatus=0,i.visibleStatusText="no"),i.elemWidth=Math.round(t.width),t.right<e.right&&t.right<e.right-e.width/2?(i.nearestParentBound="left",i.nearestParentBoundPercentage=Math.round(100*Math.abs((t.right-e.left)/t.width))):(i.nearestParentBound="right",i.nearestParentBoundPercentage=Math.round(100*Math.abs((e.right-t.left)/t.width))),i},re.getNewIndex=function(e){return e.getAttribute("data-index")||0},re.getItemWidth=function(e){return e.clientWidth||0},re.getRightBound=function(e){return e.getBoundingClientRect().right||0},re.getLeftBound=function(e){return e.getBoundingClientRect().left||0},re.initiateStages=function(){var e,t,n=h.dom.getElementsArray(re.oDefaults.selectorModuleRenderStage);re.renderStages.forEach((function(e){(t=n.indexOf(e.context))>-1&&n.splice(t,1)})),n.forEach((function(t){e=new re.RenderStage(t),re.renderStages.push(e),e.addStageEvents()})),re.addOrDeleteResizeHandler()},re.removeStages=function(){for(var e=h.dom.getElementsArray(re.oDefaults.selectorModuleRenderStage),t=re.renderStages.length;t--;)e.indexOf(re.renderStages[t].context)<0&&(re.renderStages[t].removeStageEvents(),re.renderStages.splice(t,1));re.addOrDeleteResizeHandler()},re.resizeHandler=function(){re.renderStages.forEach((function(e){var t=e.scrollContainerItem.clientWidth*e.currentIndex;e.scrollContainer.scrollLeft=t,e.centerThumb()}))},re.addOrDeleteResizeHandler=function(){re.renderStages.length>0?(window.removeEventListener("resize",re.resizeDebounceHandler),window.addEventListener("resize",re.resizeDebounceHandler)):window.removeEventListener("resize",re.resizeDebounceHandler)},re.resizeDebounceHandler=h.dom.debounce(re.resizeHandler,200),re.addEvents=function(){re.eventBus.on(r.appEvents.PAGE_READY,re.initiateStages),re.eventBus.on(r.appEvents.LAYER_LOADED,re.initiateStages),re.eventBus.on(r.appEvents.LAYER_CLOSED,re.removeStages)},le.initialize=function(e){return new Promise((function(t){re.eventBus=e,re.initiateStages(),re.addEvents(),t("module/render-stage.js")}))};var se,de,ce={},ue={__:ce};ce.stage=null,ce.isAnimating=!1,ce.domElement=null,ce.lastRotationMillis=-1,ce.autorotateDisableWidth=1023,ce.maxViewIndex=-1,ce.viewNamesArr=null,ce.currentView=null,ce.selectedCategory=null,ce.direction=null,ce.oDefaults={sAttrAutorotation:"data-autorotation",sAttrViewName:"data-view-name",sAttrStartDate:"data-startdate",sAttrEndDate:"data-enddate",sAttrViewCategory:"data-view-category",sClassHidden:"nm-hidden",sClassHomepage:"nm-homepage",sClassMobileActive:"nm-mobile-ok",sClassBrowseForward:"nm-nextarrow",sClassSelectedMenu:"nm-bs-selected",sClassHasMobileImg:"nm-stage-has-mobileimg",sClassExtendedCTA:"nm-homepage-stage-extend-cta",sSelectorStage:"#nm-id-stage, .nm-module-mediathek-stage",sSelectorHomepage:".nm-homepage",sSelectorInitialContentArea:".nm-wrapper-content .nm-area-content:first-child",sSelectorNext:"ul.nm-stage-browse>li.nm-nextarrow",sSelectorPrevious:"ul.nm-stage-browse>li.nm-backarrow",sSelectorDot:"ul.nm-dots-navi .nm-dot",sSelectorDotNavi:"ul.nm-dots-navi",sSelectorStageItemScript:".nm-stage-item script",sSelectorHomepageStageContainer:".nm-homepage .nm-stage-container",sSelectorStageContainer:".nm-stage-container",sSelectorMenuItems:"li.nm-stage-item",sSelectorBsRemote:".nm-bs-remote",sSelectorStageContent:".nm-stage",sSelectorRenderImage:"nm-stage-img.nm-j-configurator-renderimage",sSelectorMenuIcons:"ul[class^=nm-stage-list-]",sSelectorStageContentWrap:".nm-homepage-stage-teaser-content-wrap",sSelectorStageMobileImage:".nm-stage-mobile-image",sSelectorCTALink:".nm-homepage-stage-teaser-content a",sDotTemplate:'<li><a class="nm-dot" href="#"></a></li>'},ce.initialize=function(){var e;ce.addEvents(),0===(e=jQuery(ce.oDefaults.sSelectorHomepage)).length&&(e=jQuery(ce.oDefaults.sSelectorInitialContentArea)),0!==e.length?ce.initializeOnDomElement(e):console.log("stage.js - no matching dom element")},ce.initializeOnDomElement=function(e){var t=e;0===t.length&&(t=jQuery(ce.oDefaults.sSelectorInitialContentArea)),ce.stage=t.find(ce.oDefaults.sSelectorStage),ce.addStageEvents(ce.stage),ce.domElement=t,ce.filterUnpublishedTeasers(t),ce.initializeAutorotationOfStage(ce.stage),ce.resetStage(t,ce.stage)},ce.initializeAutorotationOfStage=function(e){ce.lastRotationMillis=(new Date).getTime();let t=e.find("["+ce.oDefaults.sAttrAutorotation+"]");if(t.length>0){let e=t.attr(ce.oDefaults.sAttrAutorotation);if(void 0!==e){let t=1e3*Math.round(e);t>0&&window.setInterval((function(){if(jQuery(window).width()<=ce.autorotateDisableWidth)return;if((new Date).getTime()>ce.lastRotationMillis+t){let e=ce.showNextView();ue.setCurrentView(e)}}),t)}}},ce.filterUnpublishedTeasers=function(e){e.find(ce.oDefaults.sSelectorStageItemScript).each((function(){var t=e.find(this).html(),n=jQuery("<div/>").html(t).find(":first-child");if(n.length>0){let e=n.attr(ce.oDefaults.sAttrStartDate),t=n.attr(ce.oDefaults.sAttrEndDate);if(void 0===e||void 0===t)return;let a=Math.round(e),i=Math.round(t),o=(new Date).getTime();if(0===a&&0===i)return;if(a>0&&i>0){if(a<=o&&o<i)return}else if(a>0){if(a<=o)return}else if(i>0&&o<i)return}let a=jQuery(this).parent().attr(ce.oDefaults.sAttrViewName);$("["+ce.oDefaults.sAttrViewName+'="'+a+'"]').remove()}));let t=e.find(ce.oDefaults.sSelectorStageContainer);if(t.children().length<1){let n=e.find(ce.oDefaults.sSelectorStageItemScript).first().html();t.html(n)}e.find(ce.oDefaults.sSelectorHomepageStageContainer).css("visibility","visible")},ue.setCurrentView=function(e){var t,n,a,i,o,r,l=ce.currentView.attr(ce.oDefaults.sAttrViewName);if(l===e)return!1;ce.lastRotationMillis=(new Date).getTime(),ce.isAnimating=!0,t=parseInt(ce.getCurrentViewIndex(l),10),n=parseInt(ce.getCurrentViewIndex(e),10),ce.direction="left",(t>n&&(t!==ce.maxViewIndex||0!==n)||0===t&&n===ce.maxViewIndex)&&(ce.direction="right"),(a=ce.domElement.find(ce.oDefaults.sSelectorStageContainer).first()).find(".nm-j-configurator-renderimage").removeClass("nm-j-configurator-renderimage"),a.addClass("nm-stage-animation-start-"+ce.direction),i=ce.getTemplateByName(e),o=jQuery(i),ce.currentView=o.appendTo(ce.domElement.find(ce.oDefaults.sSelectorStageContainer)),ce.selectedCategory=ce.currentView.attr(ce.oDefaults.sAttrViewCategory),ce.updateSelectionStatus(ce.domElement,ce.stage),r="-"+.5*a.width()+"px",ce.updateRenderImageDataViewAttr(ce.domElement),"left"===ce.direction?a.animate({"margin-left":r},600,"easeOutSine",ce.animationEnded):a.css("margin-left",r).animate({"margin-left":0},600,"easeOutSine",ce.animationEnded)},ue.jumpToFirstRenderView=function(){var e=ce.getFirstRenderImageViewInList();e&&ue.setCurrentView(e)},ce.getFirstRenderImageViewInList=function(){var e,t=!1,n=ce.viewNamesArr,a=n.length;for(e=0;e<a;e++)if(jQuery(ce.getTemplateByName(n[e])).find(ce.oDefaults.sSelectorRenderImage).length)return t=n[e];return t},ce.animationEnded=function(){$(this).removeClass(["nm-stage-animation-start-",ce.direction].join("")).removeAttr("style").find(".nm-stage").first().remove(),ce.isAnimating=!1,ce.eventBus.emit(r.appEvents.STAGE_RENDERIMAGE_UPDATED)},ce.buildViewIndexArr=function(e){var t=[];return e.find(ce.oDefaults.sSelectorMenuItems).each((function(){t.push(this.getAttribute(ce.oDefaults.sAttrViewName))})),t},ce.getCurrentViewIndex=function(e){var t=e||ce.currentView.attr(ce.oDefaults.sAttrViewName);return jQuery.inArray(t,ce.viewNamesArr)},ce.buildOrUpdateDotNavi=function(e){var t=e.find(ce.oDefaults.sSelectorDotNavi),n=e.find(ce.oDefaults.sSelectorBsRemote),a=ce.oDefaults.sDotTemplate;if(t.children().length===ce.maxViewIndex+1)jQuery(ce.oDefaults.sSelectorDot).removeClass(ce.oDefaults.sClassSelectedMenu);else{t.empty();let e="";for(let t=0;t<=ce.maxViewIndex;t++)e+=a;t.append(jQuery(e))}let i=ce.getCurrentViewIndex(),o=jQuery(t.find(".nm-dot").get(i));ce.currentView.hasClass(ce.oDefaults.sClassHasMobileImg)?jQuery("body").hasClass(ce.oDefaults.sClassHomepage)?e.hasClass(ce.oDefaults.sClassMobileActive)?(t.addClass(ce.oDefaults.sClassHasMobileImg),n.addClass(ce.oDefaults.sClassHasMobileImg)):(t.removeClass(ce.oDefaults.sClassHasMobileImg),n.removeClass(ce.oDefaults.sClassHasMobileImg)):(t.addClass(ce.oDefaults.sClassHasMobileImg),n.addClass(ce.oDefaults.sClassHasMobileImg)):(t.removeClass(ce.oDefaults.sClassHasMobileImg),n.removeClass(ce.oDefaults.sClassHasMobileImg)),o.addClass(ce.oDefaults.sClassSelectedMenu)},ce.getViewAtIndex=function(e){var t=ce.domElement.find(ce.oDefaults.sSelectorMenuItems).get(e);return ce.domElement.find(t).attr(ce.oDefaults.sAttrViewName)},ce.getTemplateByName=function(e){return(jQuery(["#",e,"-tpl"].join("")).html()||"").trim()},ce.handleMenuClick=function(e){var t;e.preventDefault(),ce.isAnimating||(t=jQuery(e.currentTarget).find("li").first().attr(ce.oDefaults.sAttrViewName),ue.setCurrentView(t))},ce.handleDotClick=function(e){var t,n;e.preventDefault(),ce.isAnimating||(t=$(this).parent().index(),n=ce.getViewAtIndex(t),ue.setCurrentView(n))},ce.handlePrevNextClick=function(e){var t;e.preventDefault(),ce.isAnimating||(t=jQuery(e.currentTarget).attr("class")===ce.oDefaults.sClassBrowseForward?ce.showNextView():ce.showPreviousView(),ue.setCurrentView(t))},ce.getNextIndex=function(e){var t=e||ce.getCurrentViewIndex();return t=++t%(ce.maxViewIndex+1)},ce.getPreviousIndex=function(e){var t=e||ce.getCurrentViewIndex(),n=ce.maxViewIndex;return--t<0&&(t=n),t},ce.showNextView=function(){return ce.getViewAtIndex(ce.getNextIndex())},ce.showPreviousView=function(){return ce.getViewAtIndex(ce.getPreviousIndex())},ce.checkForExtendedCTA=function(){ce.currentView.hasClass(ce.oDefaults.sClassExtendedCTA)?(ce.currentView.find(ce.oDefaults.sSelectorStageContentWrap).on("click",ce.extendedCTAClickHandler),ce.currentView.find(ce.oDefaults.sSelectorStageMobileImage).on("click",ce.extendedCTAClickHandler)):(ce.currentView.find(ce.oDefaults.sSelectorStageContentWrap).off("click",ce.extendedCTAClickHandler),ce.currentView.find(ce.oDefaults.sSelectorStageMobileImage).off("click",ce.extendedCTAClickHandler))},ce.extendedCTAClickHandler=function(e){var t,n=$(e.target),a=n.find(ce.oDefaults.sSelectorCTALink);a&&a.length>0&&(t=a.attr("href"),n=a.attr("target"),t&&n?window.open(t,n):location.href=t)},ce.updateSelectionStatus=function(e,t){ce.checkForExtendedCTA(),ce.buildOrUpdateDotNavi(t),e.find(ce.oDefaults.sSelectorMenuIcons).removeClass(ce.oDefaults.sClassSelectedMenu).filter([".nm-stage-list-",ce.selectedCategory].join("")).addClass(ce.oDefaults.sClassSelectedMenu)},ce.updateRenderImageDataViewAttr=function(e){var t,n;n=ce.currentView.attr(ce.oDefaults.sAttrViewName),ce.domElement.find(ce.oDefaults.sSelectorRenderImage,e).each((function(){"fixed"!==(t=jQuery(this)).attr("data-renderimage-context")&&t.attr({"data-renderimage-view":n})})),ce.eventBus.emit(r.appEvents.UPDATE_VIEW_STATE,{currentView:n,domElement:e})},ce.handlePageLoaded=function(e){ce.initializeOnDomElement(jQuery(e.domElement||e.element))},ce.resetStage=function(e,t){var n=t.find(ce.oDefaults.sSelectorDotNavi),a=e.find(ce.oDefaults.sSelectorBsRemote);ce.maxViewIndex=e.find(ce.oDefaults.sSelectorMenuItems).length-1,0===ce.maxViewIndex?(n.addClass(ce.oDefaults.sClassHidden),a.addClass(ce.oDefaults.sClassHidden)):(n.removeClass(ce.oDefaults.sClassHidden),a.removeClass(ce.oDefaults.sClassHidden)),ce.viewNamesArr=ce.buildViewIndexArr(e),ce.isAnimating=!1,ce.currentView=e.find([ce.oDefaults.sSelectorStageContainer,">div",ce.oDefaults.sSelectorStageContent].join("")).first(),ce.selectedCategory=ce.currentView.attr(ce.oDefaults.sAttrViewCategory),ce.updateSelectionStatus(e,t);const i=e.find(".nm-basket-image");i.length&&ce.updateRenderImageDataViewAttr(i)},ce.addEvents=function(){ce.eventBus.on(r.appEvents.PAGE_LOADED,ce.handlePageLoaded),ce.eventBus.on(r.appEvents.LAYER_LOADED,ce.handlePageLoaded),ce.eventBus.on(r.appEvents.LAYER_CLOSED,ce.handlePageLoaded)},ce.addStageEvents=function(e){e.on("click.stage.menuitem",ce.oDefaults.sSelectorMenuIcons,ce.handleMenuClick),e.on("click.stage.remote",ce.oDefaults.sSelectorNext,ce.handlePrevNextClick),e.on("click.stage.remote",ce.oDefaults.sSelectorPrevious,ce.handlePrevNextClick),e.on("click.stage.dot touchend.stage.dots",ce.oDefaults.sSelectorDot,ce.handleDotClick)},ue.dispose=function(){ce.eventBus.off(r.appEvents.PAGE_LOADED,ce.handlePageLoaded),ce.eventBus.off(r.appEvents.LAYER_LOADED,ce.handlePageLoaded)},ue.initialize=function(e){ce.eventBus=e,ce.initialize()},de={__:se={}},se.oDefaults={sClassActive:"nm-active",sClassDuringAnimation:"nm-animating",sClassNoAnimation:"no-animation",sClassForwardAnimation:"nm-animation-forward",sClassBackwardAnimation:"nm-animation-backward",sSelectorStage:".nm-layer-multi-stage",sSelectorNext:".nm-nextarrow",sSelectorPrevious:".nm-backarrow",sSelectorLayerStageImageActive:".nm-layer-image.nm-active",sSelectorLayerStageImage:".nm-layer-image"},se.initialize=function(){se.addEvents()},se.addEvents=function(){se.eventBus.on(r.appEvents.PAGE_LOADED,se.handleLayerLoaded),se.eventBus.on(r.appEvents.LAYER_LOADED,se.handleLayerLoaded)},se.handleLayerLoaded=function(e){var t;e.domElement?t=e.domElement:e.element&&(t=e.element),t?se.addStageEvents(t):console.log("no dom element available")},se.addStageEvents=function(e){jQuery(e).on("click",se.oDefaults.sSelectorNext,se.handleNextClick),jQuery(e).on("click",se.oDefaults.sSelectorPrevious,se.handlePrevClick),jQuery(se.oDefaults.sSelectorStage).on("mousedown",se.activateSwipe),jQuery(se.oDefaults.sSelectorStage).on("touchstart",se.activateSwipe),jQuery(document).on("mouseup",se.deactivateSwipe),jQuery(document).on("touchend",se.deactivateSwipe)},se.handleNextClick=function(e){var t;e.preventDefault(),jQuery(se.oDefaults.sSelectorStage).hasClass(se.oDefaults.sClassDuringAnimation)||(jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassDuringAnimation),t=jQuery(se.oDefaults.sSelectorLayerStageImageActive),jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassForwardAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassNoAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorLayerStageImage).each((function(){$(this).is(t)?$(this).removeClass(se.oDefaults.sClassActive):$(this).addClass(se.oDefaults.sClassActive)})),jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassForwardAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassDuringAnimation)}),10)}),600)}),10))},se.handlePrevClick=function(e){var t;e.preventDefault(),jQuery(se.oDefaults.sSelectorStage).hasClass(se.oDefaults.sClassDuringAnimation)||(jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassDuringAnimation),t=jQuery(se.oDefaults.sSelectorLayerStageImageActive),jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassBackwardAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassNoAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).addClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorLayerStageImage).each((function(){$(this).is(t)?$(this).removeClass(se.oDefaults.sClassActive):$(this).addClass(se.oDefaults.sClassActive)})),jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassBackwardAnimation),setTimeout((function(){jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassNoAnimation),jQuery(se.oDefaults.sSelectorStage).removeClass(se.oDefaults.sClassDuringAnimation)}),10)}),600)}),10))},se.activateSwipe=function(e){"touchstart"===e.type?se.swipeX=e.originalEvent.pageX:se.swipeX=e.pageX,jQuery(document).on("mousemove",se.swipe),jQuery(document).on("touchmove",se.swipe)},se.deactivateSwipe=function(){jQuery(document).off("mousemove",se.swipe),jQuery(document).off("touchmove",se.swipe)},se.swipe=function(e){var t;(t="touchmove"===e.type?e.originalEvent.pageX:e.pageX)>=se.swipeX+5?(se.deactivateSwipe(e),se.handlePrevClick(e)):t<=se.swipeX-5&&(se.deactivateSwipe(e),se.handleNextClick(e))},de.initialize=function(e){se.eventBus=e,se.initialize()};var me=".nm-wrapper-content .nm-area-content:first-child",ge=".nm-navigation-derivative-main-list",he=".nm-navigation-derivative-sub-list",ve=".nm-layer .nm-navigation-derivative-sub-list",fe="nm-navigation-hidden-item",pe="nm-navigation-more-btn-show",ye="nm-navigation-more-btn-order",Se="nm-has-more-btn",Ee="#nm-basket-toggle",Ce="#nm-navigation-toggle-btn",De="#nm-supportbar-toggle",we=".nm-supportbar-toggle-label",be=".nm-supportbar-navigation",Le="#nm-matching-toggle",Ie=".nm-nav-wrap",Ae="nm-nav-loaded",ke=768,Me={isStockCar:!1},Pe={__:Me};Me.showMoreButton=function(e,t){var n,a=e.find(t+" > li:first-child"),i=e.find(he);a.length>0&&((n=e.find(t+" > li:last-child")).hasClass("nm-summary-mobile-link")&&(n=e.find(t+" > li:nth-last-child(2)")),(n.position().top>0||n.hasClass(fe))&&n.find("a").is(":visible")?(a.addClass(pe),a.removeClass(ye),i.addClass(Se),jQuery(e.find(t+" > li:not(.nm-navigation-hidden-item)").get()).each((function(){jQuery(this).find("a").length&&jQuery(this).find("a").position().top>0&&!jQuery(this).find("a").hasClass(pe)&&jQuery(this).addClass(fe)})),a.addClass(ye)):(a.removeClass(pe),i.removeClass(Se))),jQuery(Ie).addClass(Ae)},Me.setHiddenNavItems=function(e,t){e.find(t).length>0&&e.find(t+" > li").length>0&&(e.find(t+" > li").removeClass(fe),jQuery(e.find(t+" > li").get().reverse()).each((function(){if(!(jQuery(this).find("a").length&&jQuery(this).find("a").position().top>0))return!1;jQuery(this).addClass(fe)}))),Me.showMoreButton(e,t)},Me.initNavToggles=function(){var e,t;Me.legacyEventBus.on("change",Ee,Me.handleToggleChange),jQuery(Le).length&&Me.legacyEventBus.on("change",Le,Me.handleToggleChange),jQuery(De).length&&(Me.legacyEventBus.on("change",De,Me.handleToggleChange),jQuery(window).width()>ke&&!("ontouchstart"in window)&&!navigator.msMaxTouchPoints&&(e=jQuery(we),t=jQuery(be),e.on("mouseover mouseout",Me.handleShoppingToolsHover),t.on("mouseover mouseout",Me.handleShoppingToolsHover))),Me.legacyEventBus.on("change",Ce,Me.handleToggleChange)},Me.handleShoppingToolsHover=function(e){jQuery(De).prop("checked","mouseover"===e.type)},Me.handleToggleChange=function(e){const t=jQuery(".nm-basket"),n=t.length>0,a=jQuery(Le).length>0,i=jQuery(De).length>0;jQuery(e.target).is(Ee)&&n?(t.toggleClass("nm-basket-widget-is-open",jQuery(e.target).is(":checked")),jQuery("body").removeClass("nm-page-nav-is-open"),jQuery(Ce).is(":checked")&&jQuery(Ce).prop("checked",!1),i&&jQuery(De).is(":checked")&&jQuery(De).prop("checked",!1),a&&jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1)):jQuery(e.target).is(Ce)?(jQuery("body").toggleClass("nm-page-nav-is-open",jQuery(e.target).is(":checked")),n&&t.removeClass("nm-basket-widget-is-open"),jQuery(Ee).is(":checked")&&jQuery(Ee).prop("checked",!1),i&&jQuery(De).is(":checked")&&jQuery(De).prop("checked",!1),a&&jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1)):jQuery(e.target).is(De)?(jQuery("body").removeClass("nm-page-nav-is-open"),n&&t.removeClass("nm-basket-widget-is-open"),jQuery(Ee).is(":checked")&&jQuery(Ee).prop("checked",!1),jQuery(Ce).is(":checked")&&jQuery(Ce).prop("checked",!1),a&&jQuery(Le).is(":checked")&&jQuery(Le).prop("checked",!1)):jQuery(e.target).is(Le)&&(jQuery("body").removeClass("nm-page-nav-is-open"),n&&t.toggleClass("nm-basket-widget-is-open",jQuery(e.target).is(":checked")),jQuery(Ee).is(":checked")&&jQuery(Ee).prop("checked",!1),jQuery(Ce).is(":checked")&&jQuery(Ce).prop("checked",!1),i&&jQuery(De).is(":checked")&&jQuery(De).prop("checked",!1))},Me.checkForMoreBtn=function(e){var t,n;Me.setHiddenNavItems(e,ge),t=e.find(".nm-nav-wrap").attr("data-mainnav"),n=ge+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list',Me.setHiddenNavItems(e,n)},Me.checkForLayerMoreBtn=function(e){var t,n;Me.setHiddenNavItems(e,he),t=e.find(".nm-nav-wrap").attr("data-mainnav"),n=ge+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list',Me.setHiddenNavItems(e,n)},Me.handlerPageLoaded=function(e){Me.checkForMoreBtn(jQuery(e.domElement)),Me.initNavToggles()},Me.handlerLayerLoaded=function(){var e=jQuery(".nm-layer");Me.checkForLayerMoreBtn(e)},Me.initialize=function(){var e;Me.isStockCar=SETUPS.get("stockcar.context")&&"true"===SETUPS.get("stockcar.context").toString(),Me.isStockCar||(Me.checkForMoreBtn(jQuery(me)),(e=jQuery(".nm-layer"))&&e.length>0&&Me.checkForLayerMoreBtn(jQuery(ve).parent()),Me.eventBus.on(r.appEvents.PAGE_LOADED,Me.handlerPageLoaded),Me.eventBus.on(r.appEvents.LAYER_LOADED,Me.handlerLayerLoaded),jQuery(window).on("resize",(function(){Me.checkForMoreBtn(jQuery(me)),Me.checkForLayerMoreBtn(jQuery(ve).parent())})),jQuery(".nm-basket-navigation-item").on("click",(function(){setTimeout((function(){Me.checkForMoreBtn(jQuery(me)),Me.checkForLayerMoreBtn(jQuery(ve).parent())}),20)})),Me.initNavToggles())},Pe.initialize=function(e){Me.eventBus=e,Me.legacyEventBus=jQuery("body"),Me.initialize()},t.stateRegistry.subscribeToStore("dbadPageStore",(function(e){window.dbadPageStore=e}));const Te=[o,u,g,T,N,j,de,H,F,z,B,U,X,J,Pe,ae,te,le,ue,f,I],_e=r.signal.getEmitter();Te.forEach((e=>{try{e.initialize(_e)}catch(e){console.error(e)}}))})(),d})()));
//# sourceMappingURL=bundle.editorial.js.map