/*! @oneaudi/audi-core-ci 14.2.1 - Wed, 15 Nov 2023 14:23:22 GMT
License information can be found in audi-core-ci.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("core-ci",[],e):"object"==typeof exports?exports["core-ci"]=e():t["core-ci"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var l in i)t.o(i,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:i[l]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AudiDropdownFlyout:()=>i,AudiFilterSelector:()=>l,AudiFilterTag:()=>s,AudiRangeSlider:()=>n});class i extends HTMLElement{constructor(){super(),this.callbackFunction=null,this.flyoutItems=null,this.labelItem=null,this.selectItem=null,this._handleOpenClose=this._handleOpenClose.bind(this),this._handleClickOutside=this._handleClickOutside.bind(this),this._handleItemSelection=this._handleItemSelection.bind(this)}connectedCallback(){this._initializeModule()}disconnectedCallback(){this._removeEvents()}_initializeModule(){this._initializeVariables(),this._addEvents(),"open"===this.dataset.state&&this._setFlyoutMaxHeight()}_initializeVariables(){this.labelItem=this.querySelector(".audi-dropdown-flyout__label"),this.selectItem=this.querySelector(".audi-dropdown-flyout__select"),this.flyoutItems=this.querySelectorAll(".audi-dropdown-flyout__item"),this.maxHeight=288}_addEvents(){this.labelItem.addEventListener("click",this._handleOpenClose),document.body.addEventListener("click",this._handleClickOutside);const t=this;[...this.flyoutItems].forEach((function(e){e.addEventListener("click",t._handleItemSelection)}))}_removeEvents(){this.labelItem.removeEventListener("click",this._handleOpenClose),document.body.removeEventListener("click",this._handleClickOutside);const t=this;[...this.flyoutItems].forEach((function(e){e.removeEventListener("click",t._handleItemSelection)}))}_handleItemSelection(t){if(!t||!t.target)return;const e=t.target.closest(".audi-dropdown-flyout__item");e&&(this._updateFlyoutState(e),this._closeFlyout())}_triggerCallbackAction(t){if(!this.callbackFunction||!t)return;const e=t.dataset;this.callbackFunction(e)}_updateFlyoutState(t){const e=this.querySelector('[data-state="selected"]');t!==e&&(e&&(e.dataset.state=null),t.dataset.state="selected",this._udpateSelectLabel(t),this._triggerCallbackAction(t))}_udpateSelectLabel(t){let e="";e=t.querySelector(".audi-link-m__text")?t.querySelector(".audi-link-m__text").innerText:t.innerText,this.labelItem.querySelector(".audi-dropdown-flyout__current-label").innerText=e}_handleClickOutside(t){t&&t.target&&!this.contains(t.target)&&this._closeFlyout()}_handleOpenClose(){"open"===this.dataset.state?this._closeFlyout():this._openFlyout()}_closeFlyout(){this.dataset.state="closed",this._removeFlyoutMaxHeight()}_openFlyout(){this.dataset.state="open",this._setFlyoutMaxHeight()}_setFlyoutMaxHeight(){if(window.innerWidth>=768){let t=0;[...this.querySelectorAll(".audi-dropdown-flyout__select-group")].forEach((function(e){t+=e.getBoundingClientRect().height}));const e=t<this.maxHeight?t:this.maxHeight;this.selectItem.style.maxHeight=e+"px"}else{const t=this.labelItem.getBoundingClientRect().height;this.selectItem.style.maxHeight="calc(100vh - "+t+"px)"}}_removeFlyoutMaxHeight(){this.selectItem.style.maxHeight=""}subscribeToFlyout(t){this.callbackFunction=t}selectItemById(t){if(!t)return;const e=this.querySelector('[data-id="'+t+'"');e&&this._updateFlyoutState(e)}getSelectedItemData(){let t={};const e=this.querySelector('[data-state="selected"]');return e&&(t=e.dataset),t}}void 0===window.customElements.get("audi-dropdown-flyout")&&window.customElements.define("audi-dropdown-flyout",i);class l extends HTMLElement{constructor(){super(),this._initializeModule=this._initializeModule.bind(this)}connectedCallback(){this._initializeModule()}_initializeModule(){"ontouchstart"in window||navigator.maxTouchPoints||this.classList.add("audi-filter-selector--no-touch")}}void 0===window.customElements.get("audi-filter-selector")&&window.customElements.define("audi-filter-selector",l);class s extends HTMLElement{constructor(){super(),this._initializeModule=this._initializeModule.bind(this)}connectedCallback(){this._initializeModule()}_initializeModule(){"ontouchstart"in window||navigator.maxTouchPoints||this.classList.add("audi-filter-tag--no-touch")}}void 0===window.customElements.get("audi-filter-tag")&&window.customElements.define("audi-filter-tag",s);class n extends HTMLElement{constructor(){super(),this.input=null,this.output=null,this.outputDynamicText=null,this.tickmarks=null,this._initializeModule=this._initializeModule.bind(this),this._handleInputInteraction=this._handleInputInteraction.bind(this)}connectedCallback(){this._initializeModule()}_initializeModule(){this._initializeVariables(),this._updateCSSVariablesForProgressFill(),this._updateRangeStepsFilling(),this._updateOutputLabel(),this._addEvents()}_initializeVariables(){this.input=this.querySelector(".audi-range-slider__input"),this.output=this.querySelector(".audi-range-slider__label"),this.tickmarks=this.querySelectorAll(".audi-range-slider__tickmark-item"),this.outputDynamicText=null!==this.output?this.output.querySelector(".audi-range-slider__js-dynamic-text"):null,this.min=this.input.getAttribute("min")||"0",this.max=this.input.getAttribute("max")||"0"}_addEvents(){this.input.addEventListener("input",this._handleInputInteraction),this.input.addEventListener("change",this._handleInputInteraction)}_handleInputInteraction(){this._activateSlider(),this._updateCSSVariablesForProgressFill(),this._updateRangeStepsFilling(),this._updateOutputLabel()}_activateSlider(){"inactive"===this.getAttribute("data-state")&&this.removeAttribute("data-state")}_updateCSSVariablesForProgressFill(){let t="--val: "+this.input.value+"; --max: "+this.max+"; --min: "+this.min+";";this.classList.add("audi-range-slider--js-enabled"),this.input.setAttribute("style",t)}_updateRangeStepsFilling(){this.tickmarks.length&&[...this.tickmarks].forEach((t=>{let e=t.querySelector("option");parseInt(e.value,10)<parseInt(this.input.value,10)?t.setAttribute("data-state","filled"):t.removeAttribute("data-state")}))}_updateOutputLabel(){let t=null===this.outputDynamicText?this.output:this.outputDynamicText;null!==t&&(t.innerHTML=this.input.value,this.tickmarks.length&&[...this.tickmarks].forEach((e=>{let i=e.querySelector("option");parseInt(i.value,10)===parseInt(this.input.value,10)&&(t.innerHTML=i.label)})))}}return void 0===window.customElements.get("audi-range-slider")&&window.customElements.define("audi-range-slider",n),e})()));
//# sourceMappingURL=audi-core-ci.js.map