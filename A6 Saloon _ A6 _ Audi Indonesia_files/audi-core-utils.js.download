/*! @oneaudi/audi-core-utils 6.0.1 - Mon, 14 Aug 2023 08:25:24 GMT
License information can be found in audi-core-utils.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("core-vendor")):"function"==typeof define&&define.amd?define("core-utils",["core-vendor"],t):"object"==typeof exports?exports["core-utils"]=t(require("core-vendor")):e["core-utils"]=t(e["core-vendor"])}(self,(e=>(()=>{"use strict";var t={954:t=>{t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.r(i),o.d(i,{animate:()=>l,device:()=>m,dom:()=>g,fetch:()=>f,jsLoader:()=>w,polling:()=>T,swipe:()=>M,template:()=>x});class e{constructor(e){this.initEasing(e)}getValue(e,t,n,o){return this.easing(e,t,n,o)}initEasing(e){switch(e){case"none":case"noEasing":case"linear":this.easing=this.noEasing;break;case"noEasingInt":this.easing=this.noEasingInt;break;case"easeInQuad":this.easing=this.easeInQuad;break;case"easeOutExpo":this.easing=this.easeOutExpo;break;case"easeInOutSine":this.easing=this.easeInOutSine;break;case"easeInSine":this.easing=this.easeInSine;break;default:this.easing=this.easeOutSineFn}}easeInOutSine(e,t,n,o){return n/2*(1-Math.cos(Math.PI*e/o))+t}easeInSine(e,t,n,o){return n*(1-Math.cos(e/o*(Math.PI/2)))+t}easeOutSineFn(e,t,n,o){return n*(1-Math.cos(e/o*(Math.PI/2)))+t}noEasing(e,t,n,o){return n*e/o+t}noEasingInt(e,t,n,o){return Math.round(this.noEasing(e,t,n,o),0)}easeInQuad(e,t,n,o){return n*(e/=o)*e+t}easeOutExpo(e,t,n,o){return n*(1-Math.pow(2,-10*e/o))+t}}const t=0,n=1,r=2,s=4,a={duration:500,maxDuration:5e3,element:window,easing:"none"};class c{constructor(t,n){this.options=Object.assign({},a,n),this.elapsedTime=0,this.currentValue=this.options.startValue,this.targetValue=t,this.valueChange=this.targetValue-this.options.startValue,this.easing=new e(this.options.easing),this.render=this.options.renderFunction,this.animationFrameID=null,this.interrupted=!1}getDelta(){return Math.abs(this.valueChange)}startAnimation(){return new Promise(((e,t)=>{this.promiseResolveFn=e,this.promiseRejectFn=t,this.animationStep()}))}interruptAnimation(){this.interrupted=!0}animationStep(e){const t=e||0;this.startTime=this.startTime||t,this.elapsedTime=t-this.startTime,this.currentValue=this.easing.getValue(this.elapsedTime.toFixed(0),this.options.startValue,this.valueChange,this.options.duration),this.isAnimationRunning()&&(this.render(this),this.animationFrameID=window.requestAnimationFrame(this.animationStep.bind(this)))}setFinalState(){this.currentValue=this.targetValue,this.render(this)}getAnimationState(){return this.interrupted?s:this.elapsedTime>this.options.duration?n:this.elapsedTime>this.options.maxDuration?r:this.isTargetValueReached()?n:t}isTargetValueReached(){return this.valueChange<0?this.currentValue<=this.targetValue:this.currentValue>=this.targetValue}isAnimationRunning(){switch(this.getAnimationState()){case n:return this.completeAnimation(!0),this.promiseResolveFn(this),!1;case r:return this.completeAnimation(!0),this.promiseRejectFn(new Error("Animation was terminated")),!1;case s:return this.completeAnimation(!1),this.promiseResolveFn(this),!1;default:return!0}}completeAnimation(e){window.cancelAnimationFrame(this.animationFrameID),e&&this.setFinalState()}}let u={},l={__:u};u.runningAnimations=new Map,u.createNewAnimation=function(e,t){let n=u.runningAnimations.get(t.element);return n||(n={}),n[t.property]&&n[t.property].interruptAnimation&&(n[t.property].interruptAnimation(),delete n[t.property]),n[t.property]=new c(e,t),u.runningAnimations.set(t.element,n),n[t.property]},u.renderWindowY=function(e){window.scrollTo(0,e.currentValue)},u.renderElementProperty=function(e){e.options.element[e.options.property]=e.currentValue},l.animateWindowY=function(e,t){const n={property:"pageYOffset",easing:"linear",startValue:Math.round(window.pageYOffset),renderFunction:u.renderWindowY},o=Object.assign({},n,t),i=isNaN(e)||Math.round(e)<0?0:e;return l.animateElementProperty(i,window,o)},l.animateElementProperty=function(e,t,n){const o={element:t,easing:"easeOutSine",startValue:0,renderFunction:u.renderElementProperty},i=Object.assign({},o,n);if(!i.property||isNaN(e)||!t)return Promise.reject(new Error("animateElementProperty --\x3e wrong  params"));i.startValue=Math.round(parseFloat(t[i.property]||0));return u.createNewAnimation(e,i).startAnimation()},l.animateElementStyleProperty=function(e,t,n){return l.animateElementProperty(e,t.style,n)};const d={},m={__:d};d.oDefaults={classIsIOS:"nm-is-ios",classIsIPad:"nm-is-ipad",classIsIPhone:"nm-is-iphone"},m.isiPhone=function(){return"iphone"===d.getDevice()},m.isiPod=function(){return"ipod"===d.getDevice()},m.isiPad=function(){return"ipad"===d.getDevice()},m.isAndroid=function(){return"android"===d.getDevice()},m.isiOS=function(){return m.isiPhone()||m.isiPad()||m.isiPod()},m.isMobile=function(){return m.isiOS()||m.isAndroid()},d.addDeviceClassToBody=function(){m.isiOS()&&(document.querySelector("body").classList.add(d.oDefaults.classIsIOS),m.isiPhone()?document.querySelector("body").classList.add(d.oDefaults.classIsIPhone):m.isiPad()&&document.querySelector("body").classList.add(d.oDefaults.classIsIPad))},d.getDevice=function(){let e=window.navigator.userAgent.toLowerCase();return null!==e.match(/ipod/i)?e="ipod":null!==e.match(/ipad/i)?e="ipad":null!==e.match(/iphone/i)?e="iphone":null!==e.match(/android/i)?null!==e.match(/mobile/i)&&(e="android"):e="default",e},d.initialize=function(){d.addDeviceClassToBody()},d.initialize();var p=o(954);const h={},g={__:h};h.eventDelegates={},h.TRANSITION_TIMEOUT=1500,h.isValidDOMElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},h.getDummyElement=function(){return document.createElement("_")},g.selectorMatches=function(e,t){const n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)},g.isHidden=function(e){return null===e.offsetParent},g.isVisible=function(e,t,n){const o=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=Math.round(i.right)<=Math.round(o.right)&&Math.round(i.right)>=Math.round(o.left),s=Math.round(i.left)>=Math.round(o.left)&&Math.round(i.left)<=Math.round(o.right);return n?r&&s:r||s},g.handleDocumentReady=function(e){let t="loading";/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10&&(t="interactive"),document.readyState!==t?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()}))},g.getEventDelegate=function(e){const t=document.querySelector(e);return!h.eventDelegates[e]&&t&&(h.eventDelegates[e]=new p.domDelegate(t)),h.eventDelegates[e]},g.renderTemplate=function(e,t){let n="";try{n=p.doT.template(e)(t)}catch(e){console.warn("renderTemplate Error:",e)}return n},g.isElementOutsideOfElementWithSelector=function(e,t){let n;if(g.selectorMatches(e,t))return!1;for(n=e;!g.selectorMatches(n,t)&&n.parentNode!==document;)n=n.parentNode;return!g.selectorMatches(n,t)},g.getOffset=function(e,t){const n=g.getElement(e,t);let o,i,r,s;if(g.isElement(n))return n.getClientRects().length?(r=n.getBoundingClientRect(),r.width||r.height?(s=n.ownerDocument,i=window,o=s.documentElement,{top:r.top+i.pageYOffset-o.clientTop,left:r.left+i.pageXOffset-o.clientLeft}):r):{top:0,left:0}},g.appendHtmlString=function(e,t){let n,o;if(e&&t)for(n=document.createElement("div"),n.innerHTML=t,o=n.childNodes;o.length>0;)e.appendChild(o[0])},g.createElementsFromHtmlString=function(e){const t=document.createElement("div");return e&&(t.innerHTML=e),t.childNodes},g.getDataAttribute=function(e,t){const n=e.getAttribute("data-"+t)||e.getAttribute(t);let o={};try{return o=JSON.parse(n),o}catch(e){return n&&n.indexOf("{")<0&&n.indexOf("[")<0?n:(console.error("could not parse data attribute JSON",n),null)}},g.closest=function(e,t){let n,o;if(o=e,"function"==typeof e.closest)return e.closest(t);for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(n=e,!0)}));o;){if(o&&o[n](t))return o;o=o.parentElement}return null},g.siblings=function(e,t){const n=e.parentNode;let o=[];return n&&(o=Array.prototype.filter.call(n.children,(function(n){let o=n!==e;return t&&o&&(o=n.matches(t)),o}))),o},h.transitionEvent=function(){let e;const t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),g.handleTransition=function(e,t){return new Promise((function(n,o){e&&e.addEventListener||o("missing params"),e.addEventListener(h.transitionEvent,(function o(){e.removeEventListener(h.transitionEvent,o),t&&e.classList.remove(t),n(e)})),t&&e.classList.add(t),setTimeout((function(){o("transition timeout")}),h.TRANSITION_TIMEOUT)}))},g.handleCSSAnimation=function(e,t){return new Promise((function(n,o){e&&e.addEventListener||o("missing params"),e.addEventListener("animationend",(function o(){e.removeEventListener("animationend",o),t&&e.classList.remove(t),n(e)})),t&&e.classList.add(t),setTimeout((function(){o("animation timeout")}),h.TRANSITION_TIMEOUT)}))},g.getElement=function(e,t){return(t||document).querySelector(e)||h.getDummyElement()},g.selectorIsInLayerContext=function(e){const t=".nm-layer-opened .nm-layer "+e;return!!document.querySelector(t)},g.isInViewport=function(e){const t=e.getBoundingClientRect(),n=document.documentElement;return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||n.clientHeight)&&t.right<=(window.innerWidth||n.clientWidth)},g.getVisibleVerticalPercentageInViewport=function(e){const t=e.getBoundingClientRect();let n=window.innerHeight-t.top;return t.top<0&&(n=t.bottom),n<=0?0:n>=e.clientHeight?100:n/e.clientHeight*100},g.getViewportPercentageCovered=function(e){let t,n;return e?(t=e.getBoundingClientRect(),n=window.innerHeight,t.top<0&&t.bottom<=0||t.top>n?0:t.top>=0&&t.bottom<=n?100:t.top<0&&t.bottom<=n?t.bottom/n*100:t.top>=0&&t.top<n&&t.bottom>n?(n-t.top)/n*100:t.top<=0&&t.bottom>=n?100:0):0},g.isElement=function(e){const t="string"==typeof e?document.querySelector(e):e;return!!t&&"_"!==t.tagName&&h.isValidDOMElement(t)},g.getElementsArray=function(e,t){const n=t||document;return[].slice.call(n.querySelectorAll(e))},g.removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},h.now=function(){return(new Date).getTime()},g.debounce=function(e,t,n){let o,i,r,s,a;return function(){r=this,a=arguments,i=function(){o=null,n||e.apply(r,a)},s=n&&!o,clearTimeout(o),o=setTimeout(i,t),s&&e.apply(r,a)}},g.throttle=function(e,t){let n,o,i,r,s,a,c=null,u=0;return r=function(){u=h.now(),c=null,a=e.apply(n,s),n=s=null},function(){return o=h.now(),i=t-(o-u),n=this,s=arguments,i<=0?(clearTimeout(c),c=null,u=o,a=e.apply(n,s),n=s=null):c||(c=setTimeout(r,i)),a}},g.scrollTo=function(e,t){let n=t;return"number"==typeof t&&(n={duration:t}),l.animateWindowY(e,n)},g.animateElementX=function(e,t,n){let o=n;return"number"==typeof n&&(o={duration:n,property:"scrollLeft"}),l.animateElementProperty(e,t,o)},g.animateElementY=function(e,t,n){let o=n;return"number"==typeof n&&(o={duration:n,property:"scrollTop"}),l.animateElementProperty(e,t,o)},h.preloadImagePromise=function(e){return new Promise((function(t,n){const o=new Image;o.src=e,o.onload=function(){t(o)},o.onerror=function(e){n(e)}}))},g.preloadImages=function(e){const t=[];return e.forEach((function(e){t.push(h.preloadImagePromise(e.src))})),Promise.all(t)},g.getElementsAbsoluteTopPosition=function(e){const t=e.getBoundingClientRect().top;return window.pageYOffset+t};const f={};function y(e){return 200===e.status||0===e.status?Promise.resolve(e):Promise.reject(new Error("Error fetching: "+e.url))}function v(e){return e.blob()}function E(e){return e.json()}f.getBlob=function(e,t){return fetch(e,t||{}).then(y).then(v)},f.getJson=function(e){return fetch(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).then(y).then(E)};const w={__:{},loadURL:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,o){const i=document.createElement("script");i.onerror=function(){o(new Error("could not load Script from "+e))},i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,n())}:i.onload=function(){n()},[...t.attributes||[]].forEach((e=>{/^data-/.test(e.name)&&i.setAttribute(e.name,e.value)})),i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}))}},b={},T={__:b};b.defaultIntervalTime=50,b.run=function(e,t,n,o,i){let r,s,a;s=0,a=e(),a?o(a):r=setInterval((function(){a=e(),a?(clearInterval(r),o(a)):s>t&&(clearInterval(r),i(new Error)),s+=n}),n)},T.wait=function(e,t,n){let o=n||b.defaultIntervalTime;return new Promise((function(n,i){b.run(e,t,o,n,i)}))};const S={},M={__:S},I=[],D={touchonly:!1,swipedistance:15},O="down",P="left",A="right";S.mouseMoveTimeout=null,S.swipePosition={direction:{vertical:"",horizontal:""},vertical:0,horizontal:0},S.deactivateSwipe=function(e,t,n){g.getEventDelegate("body").off("mousemove",n.selector),g.getEventDelegate("body").off("mouseup",n.selector),g.getEventDelegate("body").off("touchmove",n.selector),g.getEventDelegate("body").off("touchend",n.selector),n.position.move&&n.callback(n.position,t),n.position.move=null,S.mouseMoveTimeout&&clearTimeout(S.mouseMoveTimeout)},S.getEventPos=function(e){const t={};return"touchmove"===e.type||"touchend"===e.type?e.originalEvent?(t.x=e.originalEvent.pageX,t.y=e.originalEvent.pageY):e.changedTouches&&(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},S.swipe=function(e,t,n){const o=S.getEventPos(e),i=g.getElement(n.selector).offsetWidth;o.x>=n.position.x+n.options.swipedistance?n.position.direction.horizontal=A:o.x<=n.position.x-n.options.swipedistance&&(n.position.direction.horizontal=P),o.y>=n.position.y+n.options.swipedistance?n.position.direction.vertical=O:o.y<=n.position.y-n.options.swipedistance&&(n.position.direction.vertical="up"),n.position.endX=o.x,n.position.endY=o.y,n.position.move=(o.x-n.position.x)/i*100,n.swipeCallback&&n.swipeCallback(n.position,t)},S.activateSwipe=function(e,t,n){let o;n.position.direction.horizontal="",n.position.direction.vertical="",n.position.x=0,n.position.endX=0,n.position.y=0,n.position.endY=0,"touchstart"===e.type?e.originalEvent?(n.position.x=e.originalEvent.pageX,n.position.y=e.originalEvent.pageY):e.changedTouches&&(n.position.x=e.changedTouches[0].pageX,n.position.y=e.changedTouches[0].pageY):(n.position.x=e.pageX,n.position.y=e.pageY),n.options.touchonly||(g.getEventDelegate("body").on("mousemove",n.selector,(function(e,t){S.swipe(e,t,n)})),g.getEventDelegate("body").on("mouseup",n.selector,(function(e,t){S.deactivateSwipe(e,t,n)}))),g.getEventDelegate("body").on("touchmove",n.selector,(function(e,t){S.swipe(e,t,n)})),g.getEventDelegate("body").on("touchend",n.selector,(function(e,t){S.swipe(e,t,n)})),S.mouseMoveTimeout&&clearTimeout(S.mouseMoveTimeout),S.mouseMoveTimeout=setTimeout((function(){o=document.createEvent?document.createEvent("MouseEvent"):new MouseEvent("click"),S.deactivateSwipe(o,t,n)}),300)},S.onStart=function(e){return function(t,n){S.activateSwipe(t,n,e)}},S.addEvents=function(){let e,t;for(e=0;e<I.length;e++)I[e].registered||(t=I[e],I[e].options.touchonly||g.getEventDelegate("body").on("mousedown",t.selector,S.onStart(t)),g.getEventDelegate("body").on("touchstart",t.selector,S.onStart(t)),I[e].registered=!0)},S.checkOptions=function(e,t){let n=D,o=t;return e&&(e.touchonly&&(n.touchonly=e.touchonly),e.swipedistance&&(n.swipedistance=e.swipedistance)),o.options=n,o},S.register=function(e,t,n,o){let i={};if(!e)throw new Error("swipe.js --\x3e no callback function defined");if(!(t&&t.length>0))throw new Error("swipe.js --\x3e no selector defined");i.selector=t,i.item=document.querySelector(t),i.callback=e,i.swipeCallback=o,i.initialized=!1,i.position=S.swipePosition,i=S.checkOptions(n,i),I.push(i),S.addEvents()},S.unregister=function(e){let t,n;if(e&&e.length>0)for(t=0;t<I.length;t++)n=I[t],n.selector===e&&n.registered&&(n.registered=!1,g.getEventDelegate("body").off("mousedown",e),g.getEventDelegate("body").off("mousemove",e),g.getEventDelegate("body").off("mouseup",e),g.getEventDelegate("body").off("touchstart",e),g.getEventDelegate("body").off("touchmove",e),g.getEventDelegate("body").off("touchend",e))},M.register=S.register,M.unregister=S.unregister,M.UP="up",M.DOWN=O,M.RIGHT=A,M.LEFT=P;const x={__:{},render:function(e,t){let n="";try{n=p.doT.template(e)(t)}catch(e){console.error("Error in dOT-template",e)}return n}}})(),i})()));
//# sourceMappingURL=audi-core-utils.js.map