/*! For license information please see bundle.configurator.js.LICENSE.txt */
/* nemo v170.0.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core-application"),require("core-utils"),require("core-global"),require("microkernel"),require("core-vendor")):"function"==typeof define&&define.amd?define("configurator",["core-application","core-utils","core-global","microkernel","core-vendor"],e):"object"==typeof exports?exports.configurator=e(require("core-application"),require("core-utils"),require("core-global"),require("microkernel"),require("core-vendor")):t.configurator=e(t["core-application"],t["core-utils"],t["core-global"],t.microkernel,t["core-vendor"])}(globalThis,((__WEBPACK_EXTERNAL_MODULE__799__,__WEBPACK_EXTERNAL_MODULE__39__,__WEBPACK_EXTERNAL_MODULE__386__,__WEBPACK_EXTERNAL_MODULE__214__,__WEBPACK_EXTERNAL_MODULE__954__)=>(()=>{var __webpack_modules__={367:(t,e,n)=>{"use strict";n.d(e,{w:()=>o});var i=n(799),r=n(585);const a={},o={__:a};a.oDefaults={},o.getPreviousWindowConfig=function(){let t,e=null,n=r.c.getCarline(),a=window&&window.name&&null!==window.name?window.name:i.cache.getItem("use_trampoline","data","localStorage");if(a)try{t=JSON.parse(a),t&&t.prstring&&t.subsession&&t.carline===n&&(e=t)}catch(t){console.log("we are not comming from a page were we set the window.name"),e=null}return i.cache.getItem("use_trampoline","data","localStorage")&&i.cache.removeItem("use_trampoline","data","localStorage"),e},o.getConfigurationRequestParam=function(){var t=null,e=a.getUrlVar("audicode"),n=a.getUrlVar("pr");return e&&((t={}).audicode=e),n&&((t={}).prstring=n),t},o.useTrampoline=function(t,e,n){let r=t.configuration.prstring,o=t.configuration.carline,s=a.getCarlineUrl(o);if(!s)return;const l=document.querySelector("meta[name=locale-market]")?.content?.toLowerCase(),c=t.audicode?.id;c&&/q8/gi.test(o)&&("ca"===l||"no"==l)&&(s=s.indexOf("?")<0?`${s}?audicode=${c}`:`${s}&audicode=${c}`),window.name='{"subsession":"'+e+'","carline":"'+o+'","prstring":"'+r+'","entryType":"'+n+'"}',i.cache.setItem("carline_mapping",e,JSON.stringify(t),"localStorage"),i.cache.setItem("use_trampoline","data",'{"subsession":"'+e+'","carline":"'+o+'","prstring":"'+r+'","entryType":"'+n+'"}',"localStorage"),setTimeout((function(){window.location.href=s}),150)},a.getCarlineUrl=function(t){return r.c.getCarlineUrl(t)},o.hasPreviousWindowConfiguration=function(){return!!o.getPreviousWindowConfig()},o.isMatchingConfiguration=function(t){let e,n,i,o,s,l,c;return e=!1,i=!!t,o=null,n=r.c.getCarline(),i&&t.configuration&&t.configuration.carline&&(o=t.configuration.carline),i&&t.configuration&&t.configuration.carline&&(o=t.configuration.carline),s=null,i&&t.configuration&&t.configuration.prstring&&(s=t.configuration.prstring),l=!1,c=a.getCarlineUrl(o),c&&(l=!0),o&&n!==o&&l&&(e=!1),o&&n===o&&(e=!0),console.log("isMatchingConfiguration: "+e+"  audiCodeCorrespondingPrstring: "+s),e},a.getUrlVars=function(t){let e,n,i,r,a={};for(n=t.slice(t.indexOf("?")+1).split("#")[0].split("&"),i=0,r=n.length;i<r;i++)e=n[i].split("="),a[e[0]]=e[1];return a},a.getUrlVar=function(t,e){const n=e||window.location.href;return a.getUrlVars(n)[t]||null}},330:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var i=n(649),r=n(39),a=n(600);const o=t=>{let e=new CustomEvent("configurationUpdate",{detail:t});document.dispatchEvent(e)};document.addEventListener("configurationDataRequest",(()=>(async()=>{await r.polling.wait(i.E.isDataInitialized,3e4);const t=a.V.getRawConfigurationData();o(t)})()))},747:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>exports});var core_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39),core_utils__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_utils__WEBPACK_IMPORTED_MODULE_0__),_dpu_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(585),core_application__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(799),core_application__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_application__WEBPACK_IMPORTED_MODULE_2__);const __={},exports={__};__.oDefaults={sSelectorOptionList:".nm-options-list",sSelectorOptionListAlternative:".nm-j-options-list-alternative",sSelectorConfiguratorContainer:".nm-configurator-container",sClassOptionListCollapsed:"nm-options-list-collapsed",sClassConfiguratorContainerShow:"nm-j-configurator-container-show",sClassConfiguratorContainerHide:"nm-j-configurator-container-hide"},__.toggleAlternativeOptions=function(t){var e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(__.oDefaults.sSelectorOptionList,t.target.parentNode);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&e.classList.toggle(__.oDefaults.sClassOptionListCollapsed)},__.getSelectedIdString=function(t,e){var n="";return e&&e.forEach((function(e){"idid"!==e&&t[e]&&t[e].status&&"11010"===t[e].status&&(n+=e)})),n},__.tilesExclusive=()=>{const exclusiveTiles=document.querySelectorAll(".nm-module-tiles-exclusive, .nm-md-tiles-exclusive");[...exclusiveTiles].forEach((element=>{const items=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.c.getItems()||{},optionsIncluded=eval(element.getAttribute("data-configurator-id-included")),selectedIdString=__.getSelectedIdString(items,optionsIncluded);element.setAttribute("data-tile-selected",selectedIdString)}))},__.hasSelectedItem=function(t,e){var n,i,r=e.length;for(i=0;i<r;i++)if((n=t[e[i]]||{}).status&&("11010"===n.status||"10011"===n.status))return!0;return!1},__.isHiddenByVersion=function(t){var e=!1;return __.hiddenItemsFromVersion&&null!==__.hiddenItemsFromVersion&&(e=__.hiddenItemsFromVersion.indexOf(t)>-1),e},__.isVisible=function(t,e){var n,i=!1,r=!1,a=!1;return e&&e.forEach((function(e){if(!1===i)return"idid"===e||(t[e]?(t[e].status&&"00000"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(a=!0),i=r&&a,!1):(!1===__.isHiddenByVersion(e)&&((n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document)).classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1))})),i},__.isVisibleSummary=function(t,e){var n,i=!1,r=!1,a=!1;return e&&e.forEach((function(e){if(!i)return t[e]?(t[e].status&&"11000"!==t[e].status&&"00000"!==t[e].status&&"11100"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(a=!0),i=r&&a,!0):(!1===__.isHiddenByVersion(e)&&(n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document),!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(n)||n.classList.contains("nm-j-configurator-status_11000")||n.classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_11100")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1)})),i},__.handler=function(){const t=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.c.getItems()||{};__.hiddenItemsFromVersion=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.c.getHiddenItemIDsFromVersion(),__.handleConfiguratorContainer(t),__.handleConfiguratorSummary(t),__.handleEquipmentContainer(t),__.handleOptionsListContainer(t)},__.handleConfiguratorContainer=function(items){let configuratorContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer);configuratorContainer.forEach((function(element){var optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisible(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleConfiguratorSummary=function(items){let configuratorContainerSummary=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer+".nm-summary-list-container");configuratorContainerSummary.forEach((function(element){let optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisibleSummary(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleEquipmentContainer=function(items){let equipmentContainers=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-j-selected-standard-equipment-container");equipmentContainers.forEach((function(container){let optionsIncluded=eval(container.getAttribute("data-configurator-id-included"));__.containsSelectedStandardEquipment(items,optionsIncluded)?(container.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),container.classList.add(__.oDefaults.sClassConfiguratorContainerShow)):(container.classList.add(__.oDefaults.sClassConfiguratorContainerHide),container.classList.remove(__.oDefaults.sClassConfiguratorContainerShow))}))},__.containsSelectedStandardEquipment=function(t,e){let n=!1;return e.forEach((function(e){t[e]&&t[e].status&&"10011"===t[e].status&&(n=!0)})),n},__.handleOptionsListContainer=function(items){let optionsListContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-md-options-list");optionsListContainer.forEach((function(element){let container=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer,element),optionsIncluded,isCollapsible,optionsList;if(0===container.length)return!0;optionsIncluded=eval(container[0].getAttribute("data-configurator-id-included")),isCollapsible=!1,container.forEach((function(t){let e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(".nm-j-options-list-alternative",t);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isHidden(e)&&(isCollapsible=!0)})),optionsList=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorOptionList,element),__.hasSelectedItem(items,optionsIncluded)&&isCollapsible?optionsList[0].classList.add(__.oDefaults.sClassOptionListCollapsed):optionsList[0].classList.remove(__.oDefaults.sClassOptionListCollapsed)}))},__.addEvents=function(){__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.MODELSINFO_LOAD_COMPLETE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.tilesExclusive),__.domEventDelegate.on("click",__.oDefaults.sSelectorOptionListAlternative,__.toggleAlternativeOptions)},exports.initialize=function(t){__.eventBus=t,__.domEventDelegate=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getEventDelegate("body"),__.addEvents()}},585:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var i=n(386),r=n(600);const a={},o={__:a};a.stored={},o.getSpecialFamilies=function(){var t,e=SETUPS.get("nemo.families"),n=o.getFamilies();if(!e&&n)for(t in e={},n)n[t].showstandard&&"true"===n[t].showstandard&&(e[t]=n[t]);return e||null},o.getFamilies=function(){return r.V.getFamilies()},o.sendRenderServiceRequest=function(t,e,n,i){return r.V.sendRenderServiceRequest(t,e,n,i)},o.search=function(t,e){var n=o.searchItems(t,e);return n.length>0?a.groupByFamily(n):[]},a.groupByFamily=function(t){var e,n,i={search:[]},r=o.getFamilies(),a={},s=o.getCarlineName(),l=t||{};return jQuery.each(l,(function(t,o){if(void 0===o.family)return console.log("Found item without family: ",o),!0;if(n=r[o.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.name||n.id,a[n.group]||(a[n.group]=1,e={key:n.group,value:{carlineName:s,family:n,items:[]}},i.search.push(e)),e.value.items.push(o)}})),i.search},a.groupByExtColorKey=function(t){var e,n,i=o.getFamilies(),r=["extcolors.uni","extcolors.metallic","extcolors.pearl","extcolors.exclusive","extcolors.o","extcolors.m","extcolors.p"],a=[],s=[],l=o.getCarlineName(),c=t||{};for(jQuery.each(c,(function(t,e){if(void 0===e.family)return console.log("Found item without family: ",e),!0;if(n=i[e.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.id||n.name,n.group=n.group.trim(),-1===r.indexOf(n.group)?console.log("Found unknown family group: ",n.group):(a[n.group]||(a[n.group]={key:n.group,value:{carlineName:l,family:n,items:[]}}),a[n.group].value.items.push(e))}})),e=0;e<r.length;e++)a[r[e]]&&s.push(a[r[e]]);return s},o.getRenderUrl=function(){return SETUPS.get("nemo.url.mediaservice")||null},o.getSelectedItems=function(){var t,e=o.getItems()||{},n=o.getSpecialFamilies(),i={},r=0;for(t in e)e[t].status&&"1"===e[t].status.charAt(3)&&("0"===e[t].status.charAt(4)&&(i[t]=e[t],r++),"1"===e[t].status.charAt(4)&&e[t].family&&n[e[t].family]&&(i[t]=e[t],r++));return r>0?i:null},o.getSelectedTrimline=function(){var t,e=o.getSelectedItems(),n=[];if(e)for(t=(n=Object.keys(e)).length;t--;)if(n[t].indexOf("trimline_")>-1)return n[t];return null},o.getSelectedItemsArray=function(){var t={};return jQuery.each(o.getItems(),(function(e,n){n.selectionMethod&&(t[n.selectionMethod]=t[n.selectionMethod]||[],t[n.selectionMethod].push(n))})),t},o.getCarline=function(){return r.V.getCarline()},o.getCarlineName=function(){var t=o.getConfiguration();return t&&t.carlineName?t.carlineName:null},o.getEngine=function(){var t=o.getConfiguration();return t&&t.model?t.model:null},o.getTechdata=function(){var t=o.getConfiguration();return t&&t.techdata?t.techdata:null},o.getExtColor=function(){var t,e,n=o.getSelectedItemsIDsArray();for(t=0,e=n.length;t<e;t++)if(4===n[t].length)return n[t];return null},o.getModelYear=function(){var t=o.getConfiguration();return t&&t.modelyear?t.modelyear:null},o.getPriceRateMode=function(){var t=r.V.getHeader();return t&&t.mode?t.mode:"price"},o.getVisitorId=function(){var t=r.V.getHeader();return t&&t["visitor-id"]?t["visitor-id"]:null},o.getHiddenItemIDsFromVersion=function(){return r.V.getHiddenItemIDsFromVersion()},o.getPrString=function(){return r.V.getPrString()},o.getConfigurationStartType=function(){return r.V.getConfigurationStartType()},o.isContinuedConfiguration=function(){return r.V.isContinuedConfiguration()},o.getContentVersion=function(){var t=r.V.getHeader();return t&&t.version?t.version:null},o.getMarketVersion=function(){var t=r.V.getHeader();return t&&t.marketVersion?t.marketVersion:null},o.isLoggedIn=function(){return!!(r.V.getHeader()&&!0===r.V.getHeader()["logged-in"])},o.setLogin=function(t,e){return r.V.setLogin(t,e)},o.getSearchStopWords=function(){return r.V.getSearchStopWords()},o.getConflicts=function(){return r.V.getConflicts()},o.getConflictTriggers=function(){var t=null,e=o.getConflicts();return e&&e.triggers&&e.triggers.length&&(t=e.triggers),t},o.getTransfers=function(){var t=r.V.getTransfers();return t&&t.deleted&&t.deleted.length?t:null},o.getAudicode=function(){return r.V.getAudicode()},o.getConfiguration=function(){return r.V.getConfiguration()},o.getVersion=function(){return r.V.getVersion()},o.getMemcacheVersion=function(){return r.V.getMemcacheVersion()},o.getDpuUrl=function(){return r.V.getDpuUrl()},o.getContext=function(){return r.V.getContext()},o.getSubsessionID=function(){return r.V.getSubsessionID()},o.setSubsessionID=function(t){return r.V.setSubsessionID(t)},o.getMotorcode=function(){var t=o.getConfiguration();return t&&t.model?t.model:null},o.getConfigurationAssets=function(){var t=o.getConfiguration();return t&&t.assets?t.assets:null},o.getCarImages=function(){return r.V.getImages()},o.getExtColors=function(){var t=a.getItemsByFamily("extcolors");return t?a.groupByExtColorKey(t):null},o.getDocrootUrl=function(){var t=window.location.protocol+"//"+window.location.host+(SETUPS.get("nemo.url.static")||"");return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t},o.isConfigurable=function(){return!!SETUPS.get("nemo.url.carinfo")},o.isInPreviewMode=function(){return!!SETUPS.get("nemo.url.preview")},o.getPageTree=function(){return SETUPS.get("pagetree")},o.getSearchResultsPageUrl=function(){return SETUPS.get("searchResultsLink")||null},o.searchNavigation=function(t,e){var n=[],i=[],r=t.toLowerCase();switch(e){case"model":i=a.getModelNavigationStorage();break;case"siteMap":i=a.getSiteNavigationStorage();break;case"footer":i=a.getFooterNavigationStorage();break;default:i=[]}return jQuery.each(i,(function(t,e){if(!e.search)return!0;-1!==e.search.indexOf(r)&&e.url&&n.push(e)})),n},o.getItems=function(){return r.V.getItems()||null},o.isConfigurationStarted=function(){return r.V.isConfigurationStarted()},o.hasCustomConfiguration=function(){return r.V.hasCustomConfiguration()},o.isOptionSelectedInConfiguration=function(t){return o.getSelectedItemsIDsArray().indexOf(t)>-1},o.getSelectedItemsIDsArray=function(){var t=o.getSelectedItems()||{};return Object.keys(t)},o.getPrices=function(){var t=o.getConfiguration();return t&&t.prices?t.prices:null},o.getItem=function(t){var e=o.getItems();return e&&e[t]?e[t]:null},o.getItemsByStatus=function(t){var e=o.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.status&&i.test(e.status)&&((n=n||{})[t]=e)}))),n},a.getItemsByFamily=function(t){var e=o.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.family&&i.test(e.family)&&((n=n||{})[t]=e)}))),n},o.getItemsByFamily=a.getItemsByFamily,o.getConfigurationCarPriceRate=function(){var t=o.getConfiguration();return t&&t.rate?t.rate:null},o.getNwbLink=function(){var t=o.getConfiguration();return t&&t.nwbLink?t.nwbLink:null},o.getVtpRequestUrl=function(){return SETUPS.get("nemo.vtp.request.url")},o.getVtpEntryUrl=function(){return SETUPS.get("nemo.vtp.entry.url")},o.getDOMStatusCode=function(t){var e=t?t.get(0).className:"";return-1===e.indexOf("nm-j-configurator-status_")?null:e.split("nm-j-configurator-status_")[1].split(" ")[0]},o.supportsLocalStorage=function(){if(null!==window.navigator.userAgent.toLowerCase().match(/adobeair/i))return!0;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return t.code===window.DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length}},o.getConfigurationFamilies=function(){var t=o.getConfiguration();return t&&t.families?t.families:null},o.getRecommendations=function(){var t=o.getConfiguration();return t&&t.recommendations?t.recommendations:[]},o.getDynamicRecommendations=function(){var t=o.getConfiguration();return t&&t.empfehlungenPoC&&t.empfehlungenPoC.recommendations?t.empfehlungenPoC.recommendations:[]},o.resolvePackagesInPrString=function(t){let e=[];if(t){const n=t.split("|"),i=this.getItems();for(let t=0;t<n.length;t++){const r=new RegExp("([\\d\\w]{2,})_in_"+n[t],"gi"),a=Object.getOwnPropertyNames(i).reduce(((t,e)=>{const n=r.exec(e);return n&&(t.find((t=>t===n[1]))||t.push(n[1])),t}),[n[t]]);e=[...e,...a]}return e.join("|")}},o.replacePackagesInPrString=function(t){let e=t;if(t){const t=/([\d\w]{2,})_in_[\d\w]{2,}(|$)?/gi;let n;for(;null!==(n=t.exec(e));)n&&n.length>1&&(e=e.replace(n[0],n[1]))}return e},a.getSiteNavigationStorage=function(){var t=SETUPS.get("siteNavigation");return t||[]},a.getModelNavigationStorage=function(){var t=SETUPS.get("modelNavigation");return t||[]},o.searchItems=function(t,e){var n,r=!!window.mss||i.state.getStateOfModeFor("debug")||!1,a=o.getItems()||{},s=[],l=o.getFamilies(),c=t.toLowerCase();return c=c.replace(/^\w\s/," ").replace(/\s\w$/," ").replace(/\s\w\s/," ").trim(),jQuery.each(a,(function(t,i){var a;if(!i.search||"string"!=typeof i.search)return!0;if(n=i.search,r&&i.mbvId&&(n+=" | "+i.mbvId.toLowerCase()),-1!==n.indexOf(c)){if(e&&("00000"===i.status||"10000"===i.status))return!0;if(void 0===i.family)return!0;if(!(a=l[i.family])||!a.name)return!0;s.push(i)}})),s},o.isInitialized=function(){return r.V.isInitialized()},o.getCarlineUrl=function(t){var e=SETUPS.get("nemo.carlineID2Url")||{},n=e[t];return!n&&(e=SETUPS.get("mssc.carlinemapping")||{})?(n=e[t])?n.posterViewUrl:void 0:n?n.baseurl:void 0},o.getCurrentCarlineUrl=function(){var t=o.getCarline();return o.getCarlineUrl(t)},a.d4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},a.guid=function(){return a.d4()+a.d4()+a.d4()+a.d4()+a.d4()},o.getConfigurationId=function(){return a.configurationID=a.configurationID||a.guid(),a.configurationID},o.getModelsInfo=function(t){return r.V.getModelsInfo(t)},o.getModelsInfoFootnotes=function(t){return r.V.getModelsInfoFootnotes(t)},o.getModelsInfoSectionFootnotes=function(t){return r.V.getModelsInfoSectionFootnotes(t)},o.getCurrentModelInfo=function(){var t=o.getEngine();return t?o.getModelsInfo(t):null},o.getModelDisclaimer=function(t){return r.V.getModelDisclaimer(t)},o.getAveString=function(){var t=o.getConfiguration();return t&&t.ave?t.ave:null},o.getSCSmatchingAttributes=function(){var t=o.getSCSAttributes();return t&&t.attrs?t.attrs:[]},o.getSCSAttributes=function(){var t=o.getConfiguration();return t&&t["stock-car-attrs"]?t["stock-car-attrs"]:null},o.getErrorMessage=function(t){const e=a.getErrorMessageFromI18N(t),n=a.getErrorMessageFromDpuError(t),i=e||n;return i||a.getErrorMessageFromI18N("DEFAULT")},a.getErrorMessageFromI18N=function(t){const e="string"==typeof t?t:t.id;return window.i18n["error.message."+e]},a.getErrorMessageFromDpuError=function(t){return t.message?t.message:null},o.getAltImagePath=function(t,e){var n,i;return!!((n=o.getCarline())&&t&&e)&&(i=a.setFallbackGroup(n),a.setImagePath(i,t,e))},a.setFallbackGroup=function(t){var e;return e=t.substring(0,1),0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},a.setImagePath=function(t,e,n){var i,r=".jpg";return i="selection-compare"!==e?t+"-"+n.split(".")[0]+"-"+e+r:t+"-"+e+(r=".jpg"),i="undefined"!=typeof mss?o.getDocrootUrl()+"/cms4i-nemo-mss/fallback-renderings/"+i:o.getDocrootUrl()+"/cms4i-nemo/fallback-renderings/"+i},o.getMinPriceForItemIds=function(t){const e=t.map((t=>o.getItem(t))).reduce(((t,e)=>!t||void 0===e.priceValue&&void 0!==t.priceValue||e.priceValue<t.priceValue?e:t),!1);return e&&e.priceValue?e.price:""},a.getFooterNavigationStorage=function(){var t=SETUPS.get("footerNavigation");return t||[]},o.openEngineDisclaimerLayer=function(){r.V.sendEngineDisclaimerLayerEvent()}},955:(t,e,n)=>{"use strict";n.d(e,{P:()=>s});var i=n(585),r=n(799),a=n(39);const o={},s={__:o};o.previousSelectedSolution=null,o.layerInstance=null,o.currentCancelLink="",o.oDefaults={sSelectorConflictLayer:".nm-layer-conflict",sSelectorConfigLayerOpen:"nm-config-layer-open",sSelectorDelegateConflictClick:".nm-j-configurator-delegate-conflict-click",sSelectorOptionsShow:".nm-j-conflict-options-show",sSelectorConflictSolution:".nm-conflict-solution",sSelectorDelegateClick:".nm-layer-wrapper-conflict .nm-j-configurator-delegate-click",sClassConflictSolutionShow:"nm-conflict-solution-show"},o.groupingWhitelist=["extcolor","upholstery"],o.debouncedConflictResolveHandler=a.dom.debounce((t=>{o.handleConflictResolveClick(t)}),500),o.addEvents=function(){o.legacyEventBus.on("click.nemo.configurator",o.oDefaults.sSelectorDelegateConflictClick,(t=>{t.preventDefault(),o.debouncedConflictResolveHandler(t)})),o.legacyEventBus.on("click.alternative-options",o.oDefaults.sSelectorOptionsShow,o.toggleAlternativeOptions),o.legacyEventBus.on("click.solution.store",o.oDefaults.sSelectorDelegateClick,o.handleConflictItemClick)},o.handleConflictItemClick=function(t){var e,n,i;if(o.cancelEvent(t),i=(n=(e=jQuery(this)).closest("div[data-solution-id]")).data("solution-id"),o.isSelectedItem(e.closest(".nm-j-configurator-item")))return console.log('ITEM "'+e.closest(".nm-j-configurator-item").attr("[nm-j-configurator-id]")+'" is already part of the configuration',e,n,i),!1;o.previousSelectedSolution=i,console.log("ITEM was clicked",e,n,i,o.previousSelectedSolution)},o.isSelectedItem=function(t){var e,n=t.get(0).className;return-1!==n.indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3])},o.toggleAlternativeOptions=function(){return jQuery(this).closest(".nm-conflict-solution").toggleClass(o.oDefaults.sClassConflictSolutionShow),!1},o.detectGroups=function(t,e,n){var i,r,a,s,l,c=t.items.length;if(t.sameTypeItems=!1,c<2)return t;for(i=c-1;i>=0;i--){if(!(r=n[t.items[i].id]))return t;if(!(a=e[r.family]))return t;if(l=a.name,i<c-1&&(s!==a.type||o.groupingWhitelist.indexOf(a.type)<0))return t;s=a.type}return t.sameTypeItems=!0,t.header=l,t},o.mergeData=function(t,e,n){var i,r,a,s,l,c,u,d,m,g,f=t,p=[];for(f.replacedByTriggers&&f.replacedByTriggers.length&&f.solutions.unshift(f.replacedByTriggers),jQuery.each(f.solutions,(function(t,i){(m={}).items=[],m.ids=[],l=[],jQuery.each(i,(function(t,i){(c=n[i.id])?(c.name&&delete i.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),i.effItems&&jQuery.each(i.effItems,(function(t,i){(c=n[i.id]).name&&delete i.name,(r=jQuery.extend(!0,{},c,i)).family&&e[r.family]&&(r.family=e[r.family]),r.items=[r],l.push(r)})),m.ids.push(u.id),m.items.push(u)})),m.id=m.ids.join(""),p.push(m),l.length>0&&(p=p.concat(l))})),f.solutions=p,a=f.solutions.length-1;a>=0;a--)f.solutions[a]=o.detectGroups(f.solutions[a],e,n);for(g=[],s=f.solutions[0].items.length;s--;)(i=f.solutions[0].items[s]).family&&i.family.id&&i.family.id.indexOf("synthetic.audi_exclusive")>-1?(g.push(i),f.solutions[0].items[s].exclusive=!0):f.solutions[0].items[s].exclusive=!1;return g.reverse(),f.solutions[0].exclusives=g,d=[],l=[],jQuery.each(f.triggers,(function(t,i){(c=n[i.id])?(c.name?delete i.name:i.name="#"+c.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),d.push(u),i.effItems&&jQuery.each(i.effItems,(function(t,e){(c=n[e.id]).name&&delete e.name,(r=jQuery.extend(!0,{},c,e)).items=[r],l.push(r)}))})),l.length>0&&(f.solutions=l.concat(f.solutions)),f.triggers=d,f},o.openLayer=function(t,e,n){return new Promise((function(i,a){r.layerApi.open(t,e,n).then((function(t){o.layerInstance=t,o.openSelectedSolutionAlternatives(),o.currentCancelLink=jQuery([o.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),i(o.layerInstance)}),(function(t){a(t)}))}))},o.closeLayer=function(){return o.layerInstance.close().then((function(){o.layerInstance=null,o.onLayerClose()}),(function(t){throw new TypeError("Error closing conflict Layer: "+t.message)}))},o.onLayerClose=function(){jQuery("body").removeClass(o.oDefaults.sSelectorConfigLayerOpen),o.conflict=null},o.handleConflictResolveClick=function(t){var e,n,i,a="cancel";t?(o.cancelEvent(t),e=jQuery(t.target),n=SETUPS.get("nemo.url.dpu")+e.attr("href"),e.data("conflict")&&(a=e.data("conflict"))):(a="cancel",n=(i=jQuery([o.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"))?SETUPS.get("nemo.url.dpu")+i:SETUPS.get("nemo.url.dpu")+o.currentCancelLink),o.eventBus.emit(r.appEvents.CONFLICT_CLOSE,{url:n,action:a}),o.closeLayer()},o.openSelectedSolutionAlternatives=function(){var t;o.previousSelectedSolution&&(t=jQuery("[data-solution-id='"+o.previousSelectedSolution+"']"),o.previousSelectedSolution||(o.previousSelectedSolution=void 0),t.addClass(o.oDefaults.sClassConflictSolutionShow))},o.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},s.handleConflict=function(t){return new Promise((function(e,n){var r=o.mergeData(t,i.c.getSpecialFamilies()||{},i.c.getItems()),s="conflict-layer",l=a.template.render('{{##def.options_tiles:\n<ul class="nm-options-list nm-options-tiles">\n\t<li>\n\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=p.header}}</span>\n\n\t\t<div class="nm-tile-block">\n\n\t\t\t<ul class="nm-tile-list clearfix">\n\n\t\t\t{{~ p.items :value:i }}\n\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t{{? !!value.image }}\n\t\t\t\t\t\t<div class="nm-tile-element-image">\n\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-click" href="#"><img src="{{=value.image}}" /></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\t<div class="nm-tile-element-info">\n\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">{{=value.name}}</span>\n\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t\t</ul>\n\n\t\t</div>\n\n\t</li>\n</ul>\n#}}\n\n\n{{##def.options_list:\n\x3c!-- Default options list --\x3e\n\n<ul class="nm-options-list">\n\t{{~ p.items :value:i }}\n\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\n\t\t<div class="nm-options-list-cell-cb clearfix">\n\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t</div>\n\n\t\t<div class="nm-options-cell-additional">\n\t\t\t{{? value.image }}\n\t\t\t<div class="nm-list-item-additional">\n\t\t\t\t<div class="nm-list-item-image">\n\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.image.name}}" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{?}}\n\n\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t{{? value.type === "add" }}\n\t\t\t\t<span class="nm-conflict-add-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.add-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{??}}\n\t\t\t\t<span class="nm-conflict-remove-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.remove-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{?}} {{=value.name}}\n\t\t\t</span>\n\t\t</div>\n\n\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t{{??}}\n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t{{?}}\n\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t</div>\n\t</li>\n\t{{~}}\n</ul>\n#}}\n\n\n<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-conflict">\n\t<div class="nm-layer nm-layer-conflict nm-layer-conflict-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="nm-module nm-md-conflict-layer" data-module="conflict-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.selection-conflict\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.triggers.length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.your-selection\']}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="nm-options-list nm-conflict-trigger">\n\t\t\t\t\t\t\t{{~it.triggers :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}} {{? 0 !== it.solutions[0].length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.mandatory-customizations\']}}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{~ it.solutions :p }}\n\t\t\t\t\t\t{{? !!p.id}}\n\t\t\t\t\t\t<div class="nm-conflict-solution" data-solution-id="{{=p.id}}">\n\n\t\t\t\t\t\t\t{{?!!p.sameTypeItems}}\n\t\t\t\t\t\t\t\t{{#def.options_tiles}}\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t{{#def.options_list}}\n\t\t\t\t\t\t\t\t{{? 1 < p.items.length}} <a href="" class="nm-j-conflict-options-show nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-show">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.show-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-hide">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.hide-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{~}} {{?}}\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-conflict-layer-total-price">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.overall-cutomizations\']}}: {{?\n\t\t\t\t\t\t\ttypeof it.totalPriceValue !== \'undefined\' && it.totalPriceValue\n\t\t\t\t\t\t\t< 0 }} <span class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t\t{{?}} {{=it.totalPrice}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t\t{{? !!it.urls.cancel }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-01 nm-at-btn-inv" data-conflict="cancel"\n\t\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'abort-label\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}} {{? !!it.urls.submit }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-02" data-conflict="submit"\n\t\t\t\t\t\t\t\thref="{{=it.urls.submit}}">{{=window.i18n[\'conflict-layer.label.submit\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',r);o.openLayer(s,l,o.debouncedConflictResolveHandler).then(e,n)}))},s.initialize=function(t){o.eventBus=t,o.legacyEventBus=jQuery("body"),o.addEvents()}},649:(t,e,n)=>{"use strict";n.d(e,{E:()=>p});var i=n(799),r=n(585),a=n(600),o=n(113),s=n(367),l=n(71),c=n(538),u=n(955),d=n(214),m=n(445);function g(t){return["audicode-input","teaser-audicode","audicode.visualizer","audicode-search","teaser-prstring","user-configuration","configuration-reset"].indexOf(t)>-1}const f={},p={__:f};let h=!1;f.dataInitialized=!1,f.initMaxTries=20,f.oDefaults={sSelectorDelegateClick:".nm-j-configurator-delegate-click",sSelectorDelegateChangeCount:".nm-quantity",sSelectorDelegateNewClick:".nm-configuration-new",sSelectorPrintBtn:".nm-configuration-print"},f.startLayerActivated=!1,f.openedLayer=null,f.configurationContinued=!1,f.unprocessedTrackingChange=null,f.addEvents=function(){f.legacyEventBus.on("click.configuration.item",f.oDefaults.sSelectorDelegateClick,{triggerAction:"click"},f.handleConfigurationItemChanges),f.legacyEventBus.on("change.configuration.count",f.oDefaults.sSelectorDelegateChangeCount,{triggerAction:"changeCount"},f.handleConfigurationItemChanges),f.legacyEventBus.on("click.configuration.new",f.oDefaults.sSelectorDelegateNewClick,f.handleNewConfigurationClick),f.addModeSwitchEventAfterReset(),f.eventBus.on(i.appEvents.CONFLICT_CLOSE,f.handleConflictClose),f.eventBus.on(i.appEvents.TRANSFER_CLOSE,f.handleTransferClose),f.eventBus.on(i.appEvents.STARTLAYER_CLOSE,f.handleStartlayerClose),f.legacyEventBus.on("click.nemo.configurator.print",f.oDefaults.sSelectorPrintBtn,f.callPrint),f.eventBus.on(i.appEvents.FORM_FINISHED,f.receiveAudicodeForm),document.addEventListener("changeItemInConfiguration",f.handleEventForConfigurationChange),document.addEventListener("configurationUpdateFromCoLa",f.handleEventForConfigurationChange),document.addEventListener("configurationUpdateFromOneGraph",f.handleEventForConfigurationChange),document.addEventListener("resetConfiguration",f.handleNewConfigurationClick)},f.callPrint=function(){f.eventBus.emit(i.appEvents.CONFIG_PDF);let t=SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint"),e=jQuery(this),n=r.c.getContext(),a=r.c.getSubsessionID()?"&subsession="+r.c.getSubsessionID():"",o=r.c.getPrString();return t=t+"?context="+n+a+"&ids="+encodeURIComponent(o),e.attr({href:t,target:"_blank"}),!0},f.isSelectedRadioButton=function(t){var e=t.closest(".nm-j-configurator-item");return!(!e.is(".nm-j-configurator-status_11010, .nm-j-configurator-status_100110")||e.is(".nm-md-bicolor-chooser-el-options")||!1!==t.data("is-deselectable"))},f.isPreselectedConflictItem=function(t){var e,n;return!!r.c.getConflicts()&&(-1!==(n=t.closest(".nm-j-configurator-item").get(0).className).indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3]))},f.handleConfigurationItemChanges=function(t){f.cancelEvent(t);let e=jQuery(t.target);if(f.isSelectedRadioButton(e)||f.isPreselectedConflictItem(e))return!1;let n,a=e.closest(".nm-j-configurator-item"),o=a.attr("data-configurator-id"),s=a.find(f.oDefaults.sSelectorDelegateChangeCount).val(),l=t.data.triggerAction||"no-GUI-action-defined",c=r.c.isOptionSelectedInConfiguration(o);switch(l){case"changeCount":if(!c)return!1;n="itemAdd";break;case"click":if(!1===f.isSelectableItem(a))return;n=c?"itemRemove":"itemAdd",n=f.isIndividualColorConfiguration(o)?"itemAdd":n;break;case"dropDown":a=jQuery(this),o=a.val(),c=r.c.isOptionSelectedInConfiguration(o),n=c?"itemRemove":"itemAdd";break;default:return}let u={id:o,count:s,action:n,itemInfo:r.c.getItem(o),configurationItems:r.c.getConfiguration()?.items};const d=jQuery.extend(!0,u,{triggerAction:l,$element:a});f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,d),f.triggerChangeRequest(u)},f.handleEventForConfigurationChange=function(t){try{t.detail.id&&f.triggerConfigurationChange(t.detail.id)}catch(t){console.error("handleEventForConfigurationChange: ","<id> is not defined")}},f.triggerConfigurationChange=function(t){var e={},n=r.c.isOptionSelectedInConfiguration(t);e.id=t,e.count=0,e.productInfo=r.c.getItem(t),e.action=n?"itemRemove":"itemAdd",f.triggerChangeRequest(e)},f.receiveAudicodeForm=function(t){f.cancelEvent(this),t.id&&t.id.indexOf("audicode")>-1&&(f.lockPrString(r.c.getPrString()),Promise.resolve(t.response).then((function(t){if(f.detectConfigurationChanges(r.c.getPrString()))throw new TypeError("receiveAudicodeForm:configuration changed while processing, loaded configuration was rejected");p.handleExternalConfiguration(t,{startType:"audicode-input"})})).then((()=>{f.dispatchCustomConfigurationStartEvent("audicode-input")})).catch((t=>{console.warn(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-audicode-error"],t.message])})))},p.generateAudiCode=function(t){return a.V.generateAudiCode(t)},f.lockPrString=function(t){f.lockedPrString=t},f.detectConfigurationChanges=function(t){return f.lockedPrString!==t},p.handleExternalConfiguration=function(t,e){if(!t||t&&t.audicode&&!1===t.audicode.success||t&&t.errorMessage){let e;if(t.audicode&&!t.audicode.success&&t.audicode&&t.audicode["other-url"])return void(window.location.href=t.audicode["other-url"]);throw e=t&&t.audicode&&t.audicode.message?t.audicode.message:t&&t.errorMessage?t.errorMessage:t&&t.header&&t.header.errormessages?t.header.errormessages.join(","):"unknown_error",new TypeError(e)}if(!e.startType)return a.V.adoptConfiguration(t).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));if(f.startLayerActivated=!0,"user-configuration"===e.startType&&(f.startLayerActivated=!1),s.w.isMatchingConfiguration(t))return a.V.adoptConfiguration(t).then((function(t){f.setConfigurationStartType(e.startType),f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));{let n=r.c.getSubsessionID();return t.subsession&&(n=t.subsession),t.header&&t.header.subsession&&(n=t.header.subsession),new Promise((function(){s.w.useTrampoline(t,n,e.startType),Promise.reject("using trampoline page")})).catch((function(t){console.err("Trampoline failed",t)}))}},f.setConfigurationStartType=function(t,e){const n="default"===a.V.getConfigurationStartType()&&"configuration-change"===t?"configuration-start":t;a.V.setConfigurationStartType(t),g(n)?f.configurationStartedByAudiCodeSearch=!0:f.dispatchCustomConfigurationStartEvent(n,e)},f.handleConfigurationUpdate=function(){f.eventBus.emit(i.appEvents.CONFIG_UPDATE),f.configurationStartedByAudiCodeSearch?f.configurationStartedByAudiCodeSearch=!1:f.dispatchCustomConfigurationUpdateEvent(),f.dispatchCustomEvent(),f.checkLayerQueue()},f.dispatchCustomEvent=function(){try{let t=r.c.getItems(),e=new CustomEvent("configurationItemsUpdate",{detail:{items:t}});document.dispatchEvent(e)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for the configuration-change could not be dispatched",t)}},f.dispatchCustomConfigurationStartEvent=function(t,e){const n=new CustomEvent("configuration-start-tracking",{detail:{type:t,changeEventData:e}});a.V.setConfigurationStartType(t),document.dispatchEvent(n)},f.dispatchCustomConfigurationUpdateEvent=function(){document.dispatchEvent(new CustomEvent("configuration-update-tracking"))},f.checkLayerQueue=function(){let t,e;e=r.c.getTransfers(),t=r.c.getConflicts();let n=!e&&!t,i=r.c.getConfigurationStartType();if(f.startLayerActivated&&n&&!r.c.isContinuedConfiguration()&&"default"!==i&&"configuration-change"!==i){if(f.startLayerActivated=!1,"configuration-reset"===i)return f.handleStartLayerDemand(),!1;{let t={configuration:r.c.getConfiguration(),assets:r.c.getConfigurationAssets(),images:r.c.getCarImages(),ms_url:r.c.getRenderUrl(),start_type:i};return f.handleStartLayerDemand(t),!1}}return f.unHandleStartLayerDemand(),e&&r.c.isContinuedConfiguration()?(c.x.handleTransfer(e),!1):!t||(u.P.handleConflict(t),!1)},f.handleStartLayerDemand=function(t){if(t&&t.configuration&&t.configuration["audicode-rescue-info"]){const e=f.getAudicodeRescueLayerMessages(t);if(e.length>0)return void f.triggerAudicodeRescueLayer(t,e)}o.Q.handleStartLayer(t).then((function(){}),(function(t){console.warn("handleStartLayerDemand Error",t.message)}))},f.unHandleStartLayerDemand=function(){o.Q.unHandleStartLayer()},f.getAudicodeRescueLayerMessages=t=>{const e=SETUPS.get("nemo.audicode.rescue.messages");if(!e)return[];return t.configuration["audicode-rescue-info"].history.reduce(((t,e)=>t.includes(e.repairType)?t:[...t,e.repairType]),[]).reduce(((t,n)=>{const i=e[n]?e[n].trim():void 0;return i&&!t.includes(i)?[...t,i]:t}),[])},f.triggerAudicodeRescueLayer=(t,e)=>{document.dispatchEvent(new CustomEvent("modalLayer:open",{detail:{layerType:"AudicodeRescueLayerElement",options:{addCssClass:"audicode-rescue-wrapper",onEscClick:!0,onShaderClick:!0,centerVertically:!0},dataset:{...t,rescueMessages:e}}}))},p.resetAudicodeRescueInfo=()=>{a.V.resetAudicodeRescueInfo()},f.handleConflictClose=function(t){let e=new Date;a.V.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)})),null!==f.unprocessedTrackingChange&&"submit"===t.action&&(f.setConfigurationStartType(f.unprocessedTrackingChange.startType,f.unprocessedTrackingChange.changeEventData),f.unprocessedTrackingChange=null),"cancel"===t.action&&(f.unprocessedTrackingChange=null)},f.handleTransferClose=function(t){if(a.V.transferCompleted(),t&&t.url){let e=new Date;a.V.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))}else f.checkLayerQueue()},f.handleStartlayerClose=function(){f.checkLayerQueue()},p.addToConfiguration=function(t){let e={action:"itemAdd",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},p.removeFromConfiguration=function(t){var e={action:"itemRemove",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},f.triggerChangeRequest=function(t){var e=new Date;return a.V.requestConfigurationChange(t).then((function(e){f.updateItemSelectionMethod(t,"active");r.c.getConflicts()?f.unprocessedTrackingChange={startType:"configuration-change",changeEventData:t}:(f.setConfigurationStartType("configuration-change",t),f.unprocessedTrackingChange=null),f.handleConfigurationUpdate(e)})).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))},f.updateItemSelectionMethod=function(t,e){var n;n=t.id,"itemAdd"===t.action?a.V.setItemSelectionMethod(n,e):a.V.setItemSelectionMethod(n,"")},f.updatePreselectedItems=function(){var t=r.c.getItems();jQuery.each(t,(function(t,e){e.status&&5===e.status.length&&"1"===e.status.substr(3,1)&&a.V.setItemSelectionMethod(t,"pre")}))},f.handleConfigurationUpdateError=function(t){console.error("Configuration Error",t);const e=r.c.getErrorMessage(t);f.eventBus.emit(i.appEvents.ERROR,e)},f.isIndividualColorConfiguration=function(t){return"Q0Q0"===t||"O0O0"===t||"BODY_Q0"===t||"BODY_O0"===t},f.isSelectableItem=function(t){var e=r.c.getDOMStatusCode(t).split(""),n=window.mss||null;return!!t.hasClass("nm-j-configurator-item-forceselectable")||"0"!==e[0]&&("0"!==e[1]&&(("1"!==e[4]||"1"!==e[3]||!n)&&(e[2],!0)))},f.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},f.handleNewConfigurationClick=function(t){f.cancelEvent(t),a.V.requestConfigurationReset().then((function(t){f.startLayerActivated=!0,a.V.setConfigurationStartType("configuration-reset"),f.handleConfigurationUpdate(t)})).then((()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")})).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.configurationErrors=function(t){console.warn("Configuration Error",t.mesage)},f.addModeSwitchEventAfterReset=function(){var t=jQuery("nm-price-rate-switch");t&&(t.checked=!1),f.legacyEventBus.on("change",".nm-price-rate-switch, .j-rate-switch",f.handleModeSwitchChange),document.addEventListener("rateSwitch",f.handleModeSwitchChange)},f.handleModeSwitchChange=function(t){let e;e=t.detail&&t.detail.mode?t.detail.mode:!0===t.target.checked?"rate":"price",a.V.changeRatePriceMode(e).then(f.handleConfigurationUpdate).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.onAjaxCompleted=function(t){f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_END)},f.initialize=function(){var t;h||(f.addEvents(),h=!0,t=new Date,f.dataInitialized=!1,a.V.fireDataInitializationChain().then((function(){f.initPreviousConfiguration().then((()=>{f.updatePreselectedItems(),a.V.dispatchPriceMode(r.c.getPriceRateMode()),f.dispatchCustomEvent(),f.dataInitialized=!0,console.info("fireDataInitializationChain completed after "+((new Date).getTime()-t.getTime())+" ms")}))}),(function(e){f.initPreviousConfiguration().then((()=>{f.dataInitialized=!0,console.warn("fireDataInitializationChain failed after "+((new Date).getTime()-t.getTime())+" ms:"+e.message)}))})))},p.isDataInitialized=function(){return f.dataInitialized},f.initPreviousConfiguration=function(){var t,e,n,a,o;if(window.location.search&&window.location.search.indexOf("new_config")>-1&&(e=!0),n=s.w.getPreviousWindowConfig(),a=s.w.getConfigurationRequestParam(),o=l.Z.getPreviousUserConfigurationPrString(),a){if(a.audicode)return p.loadConfigurationByAudiCode(a.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-audicode"})})).then((()=>{f.dispatchCustomConfigurationStartEvent("teaser-audicode"),d.stateRegistry.triggerAction(m.a,"update",{audicode:a.audicode})})).catch((e=>{t=r.c.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}));if(a.prstring)return p.loadConfigurationByPrString(a.prstring).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-prstring"})})).then((()=>{f.dispatchCustomConfigurationStartEvent("teaser-prstring")})).catch((e=>{t=r.c.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}))}return n?n.carline!==r.c.getCarline()?(s.w.useTrampoline(n,n.subsession,n.entryType),Promise.resolve()):p.loadConfigurationByPrString(n.prstring,n.subsession).then((t=>{p.handleExternalConfiguration(t,{startType:n.entryType})})).then((()=>{g(n.entryType)&&f.dispatchCustomConfigurationStartEvent(n.entryType)})).catch((e=>{t=r.c.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])})):n||a?Promise.resolve():e?p.loadConfigurationByPrString(SETUPS.get("nemo.default.prstring")).then((function(t){p.handleExternalConfiguration(t,{startType:"configuration-reset"})}),(function(t){console.warn(t.message)})).then((()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")})):(console.log("previousUserConfigurationPromise - loadConfiguration"),o.then((async function(t){await p.loadConfigurationByPrString(t).then((function(t){p.handleExternalConfiguration(t,{startType:"user-configuration"})}),(function(t){console.warn(t.message)})).then((()=>{f.dispatchCustomConfigurationStartEvent("user-configuration")}))})).catch((function(t){console.warn(t.message)})))},p.loadConfigurationByPrString=function(t,e){return a.V.loadConfigurationByPrString(t,e)},p.loadConfigurationFromTeaser=function(t,e){var n,a=r.c.getSubsessionID();return t.prstring?p.loadConfigurationByPrString(t.prstring,a).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then((()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)})).catch((function(t){n=r.c.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):t.audicode?p.loadConfigurationByAudiCode(t.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then((()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)})).catch((function(t){n=r.c.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):Promise.reject("No valid config option found")},p.loadConfigurationByAudiCode=function(t){return a.V.loadConfigurationByAudiCode(t)},p.listCarstoreItems=function(){return a.V.sendCarstoreRequest("list")},p.switchCarline=function(t,e,n,r){return a.V.switchCarline(t,e,n).then((function(){r?a.V.adoptConfiguration(r).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)})):(f.eventBus.emit(i.appEvents.CONFIG_RESET),a.V.setConfigurationStartType("switched-carline"))}))},p.loadCarstoreItem=function(t){return a.V.sendCarstoreRequest("load",{slot:t}).then((function(t){p.handleExternalConfiguration(t,{startType:"carstore"})}))},p.deleteCarstoreItem=function(t){return a.V.sendCarstoreRequest("delete",{slot:t})},p.setSubsessionID=function(t){a.V.setSubsessionID(t)},p.resetToDefaultSetupParams=function(){a.V.resetToDefaultSetupParams()},p.getAjaxMarker=function(){var t={marker:"",overwrites:!1};return new Promise((function(e){r.c.isConfigurable()?(t.marker=r.c.getMemcacheVersion(),t.overwrites=!0):t.marker=SETUPS.get("nemo.staticversion"),e(t)}))},p.setDpuExtra=function(t){a.V.setDpuExtra(t)},p.initialize=function(t){f.eventBus=t,f.legacyEventBus=jQuery("body"),i.content.registerMarkerProvider(p.getAjaxMarker),f.initialize()}},531:(t,e,n)=>{"use strict";n.d(e,{G:()=>l});var i=n(135);const r={exterior:{fullscreen:"aecwn8o1920x1152",flyout:"aecwn8o1920x600"},exterior_front:{fullscreen:"aecwn1o1920x1152",flyout:"aecwn1o1920x600"},exterior_back:{fullscreen:"aecwn6o1920x1152",flyout:"aecwn6o1920x600"},exterior_straight_front:{fullscreen:"aecwn3o1920x1152",flyout:"aecwn3o1920x600"},exterior_straight_back:{fullscreen:"aecwn5o1920x1152",flyout:"aecwn5o1920x600"},closeup_lights:{fullscreen:"aecwn2o1920x1152",flyout:"aecwn2o1920x600"},interior:{fullscreen:"aecwi1n1920x1152",flyout:"aecwi1n1920x600"},dashboard:{fullscreen:"aecwi2n1920x1152",flyout:"aecwi2n1920x600"}},a=Object.values(r).map((t=>[t?.flyout,t?.fullscreen]));function o(t,e){if(t&&t.length){const n=t.find((t=>t.config===e));return n?.url}return null}const s=t=>t?.startsWith("LC_PR"),l=async function(t){const e=t?.ave,n=t&&t["mbv-ids"];if(!e)return Promise.reject({});const l=e.split(","),c=l.slice(0,5),u=l.slice(5),d=l[3],m=l[4],g=l[2],f=l[1],p=t?.extColorCode?.selected,h=n?.exteriorColor||d,v=n?.interiorColor||m,y=n?.modelyear||t?.modelyear||g,S=f||n?.model||t?.model,C={client:i.P.I4,brand:"ALL",configs:[].concat(...a),live:i.P.a,modelRequests:[{modelCode:S,modelYear:y,exteriorColor:h,interiorColor:v,standardEquipments:u,mimeType:"image/png",...s(c[3])&&{aozEquipments:[p]}}]},E={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)};try{const t=await fetch(i.P.hi,E);if(t.ok)return t.json().then((t=>{const e=t.modelResults[0]?.urlResult.filter((t=>t?.url));return(t=>t?Object.entries(r).reduce(((e,n)=>({...e,[n[0]]:{fullscreen:o(t,n[1]?.fullscreen),flyout:o(t,n[1]?.flyout)}})),{}):[])(e)}));console.error("Response error from fetch images API: ",t)}catch(t){console.error("error occured when trying to fetch images from API:"+t)}}},600:(t,e,n)=>{"use strict";n.d(e,{V:()=>d});var i=n(799),r=n(680),a=n(214),o=n(39),s=n(330),l=n(531);const c=t=>{const e=new Error;if(e.status=t.statuscode,t.audicode&&t.audicode.message&&(e.name="custom-dpu-error"),t.header&&t.header.error){if(e.id=t.header.error.id,"HIDDEN_CARLINE"===e.id)return void(()=>{const t={layerType:"MessageLayerElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{headline:window.i18n["error.no_wltp_data.modal_layer.headline"],messageType:"string",message:window.i18n["error.no_wltp_data.modal_layer.message"],actionButtonLinkText:window.i18n["error.no_wltp_data.modal_layer.link.text"],actionButtonLinkUrl:window.i18n["error.no_wltp_data.modal_layer.link.url"]}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e)})();t.header.error.message?e.message=t.header.error.message:t.header.statusmessage&&(e.message=t.header.statusmessage)}throw e},u={},d={__:u};let m=!1;u.oDefaults={actionsLookup:{itemAdd:"set",removeItem:"remove",itemRemove:"remove"}},u.configurationStartType="default",u.configurationContinued=!1,u.dataInitialized=!1,u.configurationEndpoint="configuration",u.dpuExtra="",u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null,modelsInfo:null,images:null},u.sendResetRequest=function(){u.checkDefaultSetup();let t={context:d.getContext(),ids:u.getDefaultPrString()};t=u.addDpuExtraData(t),t=u.addSubsessionData(t);const e=new URLSearchParams(t),n=d.getDpuUrl()+u.configurationEndpoint+"?"+e.toString();return fetch(n,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.dispatchPriceMode=function(t){const e=new CustomEvent("setPriceMode",{detail:"rate"===t?"RATE":"PRICE"});document.dispatchEvent(e)},d.changeRatePriceMode=function(t){return u.checkDefaultSetup(),new Promise((function(e,n){const i=d.getHeader();if((i&&i.mode?i.mode:"price")===t)return n(new TypeError("Rate/Price mode did not change")),null;const r="rate"===t?"rate":"price";let a={context:d.getContext(),ids:d.getPrString(),mode:r};a=u.addDpuExtraData(a),u.isStatelessMode||(a=u.addSubsessionData(a));const o=d.getDpuUrl()+u.configurationEndpoint+"?"+new URLSearchParams(a).toString();return fetch(o,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus).then((t=>{u.setConfigurationRaw(t).then((()=>{d.dispatchPriceMode(r),e(!0)}))}),(t=>{n(new TypeError("Error switching priceRateMode: "+t.message))}))}))},u.sendChangeRequest=function(t){const e=d.getDpuUrl()+u.configurationEndpoint+"?";let n=u.generateRequestData(t);n=u.addDpuExtraData(n),n=u.addSubsessionData(n);const i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus).catch((t=>{throw t.id||(t.id="NETWORK_ERROR"),t}))},u.setStatelessParams=function(t){var e=d.getConflicts();return u.isStatelessMode&&e&&(e.triggerIds&&(t.trigger=e.triggerIds),e.choiceIds&&(t.choices=e.choiceIds)),t},u.generateRequestData=function(t){var e=d.getSubsessionID(),n=u.oDefaults.actionsLookup[t.action]||"missing_action",i=t.id,r={context:d.getContext(),ids:d.getPrString()};return t.count&&(i+="*"+t.count),r[n]=i,r=u.setStatelessParams(r),e&&!u.isStatelessMode&&(r.subsession=e),u.isDebugMode()&&(r.dpu_extra="messages"),r},u.isDebugMode=function(){var t=document.querySelector("html");return new RegExp("(^| )nm-state-is-debug( |$)","gi").test(t.className)},d.getVersion=function(){var t=d.getHeader();return t&&t.version?t.version:null},d.getStaticVersion=function(){var t=SETUPS.get("nemo.staticversion");return t||null},d.isInitialized=function(){return u.dataInitialized},d.getMemcacheVersion=function(){var t,e,n="",i=d.getDpuHeader();return i&&(i.version&&(n=i.version),i.taggedVersion?n=i.taggedVersion:i.marketVersion&&(n=i.marketVersion),!!i.taggedVersion&&!!i.marketVersion&&i.manualRevision&&parseInt(i.manualRevision,10)>0&&(n+="."+i.manualRevision)),t=d.getStaticVersion(),(e=SETUPS.get("nemo.build.time"))&&t&&e!==t&&(n+="."+t),n&&0===n.toString().indexOf(".")&&(n=n.substring(1)),n},d.getContext=function(){var t=d.getHeader();return t&&t.context?t.context:null},d.getSubsessionID=function(){var t=d.getHeader();return t&&t.subsession?t.subsession:null},d.setSubsessionID=function(t){u.storage.header.subsession=t,u.updateConfigDataForConsumers()},d.getPrString=function(){var t=d.getConfiguration();return t&&t.prstring?t.prstring:null},u.getDefaultPrString=function(){return u.storage.defaultPrString||null},u.setDefaultPrString=function(t){u.storage.defaultPrString=t||null,u.updateConfigDataForConsumers()},d.handleConfigurationResponse=function(t){return u.setConfigurationRaw(t)},d.adoptConfiguration=function(t){return u.setConfigurationRaw(t)},u.setPrice=function(t){t&&t.configuration&&t.configuration.prices&&t.configuration.prices.rotr&&(u.storage.configuration.rotrprice=t.configuration.prices.rotr)},u.setConfigurationRaw=async function(t){let e,n=!0,i=d.getPrString();if(u.setHeader(t),u.setAudicode(t),u.setConfiguration(t),u.setPrice(t),u.setItems(t),u.setFamilies(t),u.storage.searchstopwords=t.searchstopwords||u.storage.searchstopwords||null,u.setConflictsAndTransfers(t),u.updateConfigDataForConsumers(),!t.configuration)return!1;d.sendEngineDisclaimerLayerEvent(),u.getDefaultPrString()||(e=SETUPS.get("nemo.default.prstring")||t.configuration.prstring,u.setDefaultPrString(e)),i&&i===d.getPrString()&&(n=!1);try{const t=await(0,l.G)(u.storage.configuration);u.setImages(t)}catch(t){console.error(t)}return n},u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY="engine-disclaimer-layer-shown",u.engineDisclaimerLayerShownNoSessionStorage={},u.getEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);return!!JSON.parse(t)[u.storage.configuration.model]}catch(t){return!!u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]}},u.setEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);let e;try{e=JSON.parse(t)||{}}catch(t){e={}}e[u.storage.configuration.model]=!0,window.sessionStorage.setItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY,JSON.stringify(e))}catch(t){u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]=!0}},d.sendEngineDisclaimerLayerEvent=async function(){const t=document.querySelector(".nm-content"),e=t?t.getAttribute("data-template"):"";if(u.getEngineDisclaimerLayerShown()||"home"===e)return;await o.polling.wait(d.isInitialized,5e3);const n=d.getConfiguration(),i=n&&n.model?d.getModelDisclaimer(n.model):null;if(i&&i.headline&&i.text){const t={layerType:"EngineDisclaimerLayerElement",options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0},dataset:{headline:i.headline,message:i.text}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e),u.setEngineDisclaimerLayerShown()}},u.setFamilies=function(t){t&&t.families&&(u.storage.families=jQuery.extend(!0,u.storage.families,t.families),u.updateConfigDataForConsumers())},d.getFamilies=function(){return u.storage.families||null},u.setConflictsAndTransfers=function(t){u.storage.conflicts=t.conflicts||null,u.storage.transfers=t.transfers||null},u.setAudicode=function(t){u.storage.audicode=!(!t.audicode||!t.audicode.id)&&t.audicode.id},u.setConfiguration=function(t){u.storage.configuration=jQuery.extend(!1,u.storage.configuration,t.configuration)},u.setImages=function(t){u.storage.images=jQuery.extend(!1,u.storage.images,t)},u.setHeader=function(t){var e;t&&t.header&&(e=u.storage&&u.storage.header&&u.storage.header.version?{version:u.storage.header.version}:{},u.storage.header=jQuery.extend(!0,u.storage.header,t.header,e))},u.setItems=function(t){var e,n;if("full"===t.itemsUpdateMode&&t.items)for(e in u.storage.items)u.storage.items.hasOwnProperty(e)&&u.storage.items[e].status&&(u.storage.items[e].status="00000");else for(n in console.log("DPU_MODEL.setItems::incrmental update…"),t.items)t.items[n].packageDescription||(t.items[n].packageDescription="");for(n in t.items)t.items[n].subname?t.items[n].subname="("+t.items[n].subname+")":t.items[n].subname="";for(e in u.storage.items=jQuery.extend(!0,u.storage.items,t.items),u.storage.items)u.storage.items.hasOwnProperty(e)&&("11001"!==u.storage.items[e].status&&"10011"!==u.storage.items[e].status||(u.storage.items[e].price=window.i18n&&window.i18n.standard||"***Serie***"))},u.sendVersionRequest=function(){const t=d.getDpuUrl()+"version?",e=d.getCarline();if(!e)return Promise.reject(new TypeError("no carline defined for version request"));let n={context:d.getContext(),carline:e};n=u.addDpuExtraData(n);const i=new URLSearchParams(n);return fetch(t+i,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},u.handleVersionResponse=function(t){var e,n=t.items,r=[];if(n)for(e in n)n.hasOwnProperty(e)&&!0===n[e].hidden&&r.push(e);u.storage.header=t.header,u.storage.headerItems=r,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.VERSION_LOAD_COMPLETE)},u.sendCarinfoRequest=function(){const t=u.getCarinfoUrl();return fetch(t,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},u.handleCarinfoResponse=function(t){return console.log("handleCarinfoResponse",t,d.isConfigurationStarted()),d.isConfigurationStarted()?(u.setFamilies(t),u.updateItemsFromCarinfo(t.items),u.eventBus.emit(i.appEvents.CARINFO_LOAD_COMPLETE),Promise.resolve(!1)):d.handleConfigurationResponse(t)},u.sendModelsinfoRequest=function(){const t=u.getModelsinfoUrl();return fetch(t,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},u.handleModelsinfoResponse=function(t){console.log("handleModelsinfoResponse",t,d.isConfigurationStarted()),u.storage.modelsInfo=t.models||null,u.storage.modelsInfoFootnotes=t.footnotes||null,u.storage.modelsInfoSectionFootnotes=t.sectionFootnotes||null,u.storage.modelsInfoDisclaimers=t.disclaimers||null,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.MODELSINFO_LOAD_COMPLETE)},d.getModelsInfo=function(t){var e;return t?((e=u.storage.modelsInfo)?e[t]:null)||null:u.storage.modelsInfo||null},d.getModelsInfoFootnotes=t=>t?u.storage.modelsInfoFootnotes&&u.storage.modelsInfoFootnotes[t]?u.storage.modelsInfoFootnotes[t]:null:u.storage.modelsInfoFootnotes||null,d.getModelsInfoSectionFootnotes=t=>t?u.storage.modelsInfoSectionFootnotes&&u.storage.modelsInfoSectionFootnotes[t]?u.storage.modelsInfoSectionFootnotes[t]:null:u.storage.modelsInfoSectionFootnotes||null,d.getModelDisclaimer=t=>{if(t){const e=u.storage.modelsInfoDisclaimers?u.storage.modelsInfoDisclaimers[t]:null;if(e&&Array.isArray(e)&&e.length>0)return e[0]}return null},u.updateItemsFromCarinfo=function(t){var e=jQuery.extend(!0,{},d.getItems());if(!t)return console.log("Carinfo Items missing!"),!1;u.storage.items=t,u.storage.items=jQuery.extend(!0,u.storage.items,e),u.updateConfigDataForConsumers()},u.getCarinfoUrl=function(){var t=SETUPS.get("nemo.url.carinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.getModelsinfoUrl=function(){var t=SETUPS.get("nemo.url.modelsinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.setLoginState=function(t){var e=d.getHeader();e&&(e["logged-in"]=t)},d.sendCarstoreRequest=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.checkDefaultSetup();if(-1===["list","delete","load"].indexOf(t))return Promise.reject(new TypeError("sendCarestoreRequest: invalid actionStr"));e.slot||(e.slot=null);const n=d.getDpuUrl()+"carstore?",i={action:t,context:d.getContext(),subsession:d.getSubsessionID()};let r=Object.assign({},i,e);r=u.addDpuExtraData(r);const a=n+new URLSearchParams(r).toString();return fetch(a,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},u.getFilteredPrNumbersFromCurrentConfig=function(t){var e,n,i,r,a,o=d.getPrString().split("|"),s=[];for(e=0,i=o.length,r=t.length;e<i;e++){for(a=!0,n=0;n<r;n++)o[e].indexOf(t[n])>-1&&(a=!1);!0===a&&s.push(o[e])}return s},d.sendRenderServiceRequest=function(t,e,n,i){u.checkDefaultSetup();const r=d.getDpuUrl()+"stateless-render-service?",a=u.getFilteredPrNumbersFromCurrentConfig(t);let o={context:d.getContext(),ids:a.join("|"),"render-prnrs":e,"render-views":n,"render-sizes":i};o=u.addDpuExtraData(o);const s=r+new URLSearchParams(o).toString();return fetch(s,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.sendCarstoreHistoryRequest=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"history?";let n=t;t&&""!==n&&void 0!==n||(n={}),n.slot&&""!==n.slot&&void 0!==n.slot||(n.slot=null);let i={context:d.getContext(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.setLogin=function(t,e){return new Promise((function(n,i){"boolean"==typeof t&&e?(d.setSubsessionID(e),u.setLoginState(t),n(t)):(u.setLoginState(!1),i(new TypeError("login failure")))}))},d.requestConfigurationChange=function(t){return new Promise((function(e,n){u.sendChangeRequest(t).then((function(t){e(d.handleConfigurationResponse(t))}),(function(t){n(t)})).catch((t=>{throw new Error(t)}))}))},d.requestConfigurationReset=function(){return new Promise((function(t,e){u.sendResetRequest().then((function(e){return t(d.handleConfigurationResponse(e))}),(function(t){e(t)}))}))},d.setItemSelectionMethod=function(t,e){var n=d.getItems();n&&n[t]&&(n[t].selectionMethod=e||null)},d.requestTransferOrConflictResolve=function(t){return new Promise((function(e,n){const i=u.addDpuExtraParam(t);return fetch(i,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus).then((t=>e(d.handleConfigurationResponse(t))),(t=>{n(t)}))}))},d.loadConfigurationByAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;void 0!==n&&(n=n.toUpperCase());let i={context:d.getContext(),audicode:n};i=u.addDpuExtraData(i),i=u.addSubsessionData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.loadConfigurationByAudiCodeStateless=t=>{if(!t)return;const e=d.getDpuUrl()+"stateless-audicode?",n=u.addDpuExtraData({context:d.getContext(),audicode:t.toUpperCase()}),i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"omit"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.generateAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;n&&""!==n&&void 0!==n||(n={});let i={context:d.getContext(),ids:d.getPrString(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus)},d.loadConfigurationByPrString=function(t,e){u.checkDefaultSetup();const n=d.getDpuUrl()+u.configurationEndpoint+"?";let i={context:d.getContext(),ids:t};e&&!u.isStatelessMode&&(i.subsession=e),i=u.addDpuExtraData(i);const r=n+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus).catch((e=>{if("PRSTRING_MODEL_NOT_FOUND"===e.id){const n=new CustomEvent("TNT_ERROR",{detail:{errorCode:e.id,prString:t}});document.dispatchEvent(n)}throw e}))},d.getHeader=function(){return u.storage.header||null},d.getHiddenItemIDsFromVersion=function(){return u.storage.headerItems||null},d.getSearchStopWords=function(){return u.storage.searchstopwords||null},d.transferCompleted=function(){u.storage.transfers=null,u.updateConfigDataForConsumers()},d.fireDataInitializationChain=function(){return u.dataInitialized=!1,u.checkDefaultSetup(),u.sendVersionRequest().then(u.handleVersionResponse).then(u.getSignedLink).then(u.sendCarinfoRequest).then(u.handleCarinfoResponse).then(u.sendModelsinfoRequest).then(u.handleModelsinfoResponse).then((function(){u.dataInitialized=!0}))},d.getConflicts=function(){return u.storage.conflicts||null},d.getDpuHeader=function(){return u.storage.header||null},d.getTransfers=function(){return u.storage.transfers||null},d.getRecommendations=function(){return u.storage.configuration.recommendations||[]},d.getAudicode=function(){return u.storage.audicode||!1},d.getConfiguration=function(){return u.storage.configuration||null},d.getRawConfigurationData=function(){return u.storage||null},d.getItems=function(){return u.storage.items||null},d.getImages=function(){return u.storage.images||null},d.getCarline=function(){var t=d.getConfiguration();return t&&t.carline?t.carline:SETUPS.get("nemo.default.carline")||null},d.getDpuUrl=function(){return SETUPS.get("nemo.url.dpu")||null},d.isConfigurationStarted=function(){return u.configurationStartType&&"default"!==u.configurationStartType},d.getFamilies=function(){return u.storage.families||null},d.hasCustomConfiguration=function(){return d.isConfigurationStarted()&&u.getDefaultPrString()!==d.getPrString()},d.isContinuedConfiguration=function(){return u.configurationContinued},u.getSignedLink=function(){const t=SETUPS.get("nemo.url.preview");return t?fetch(t,{credentials:"include"}).then((t=>{if(t.ok)return t.json();c({statuscode:t.status})})).then(u.checkDPUresponseStatus).then((t=>u.setConfigurationRaw(t)),(t=>console.warn("loading signedPreviewUrl failed: "+t.message))):Promise.resolve("no signedPreviewUrl available")},d.switchCarline=function(t,e,n){let i,r;return u.checkDefaultSetup(),e&&t?(SETUPS.set("nemo.default.carline",t),SETUPS.set("nemo.url.carinfo",e),SETUPS.set("nemo.url.modelsinfo",n),i=d.getContext(),r={configuration:{carline:t},header:{context:i}},u.clearConfigurationData(r),d.fireDataInitializationChain()):Promise.reject("switchCarline: missing params for initialization!")},u.clearConfigurationData=function(t){var e;if(u.configurationContinued=!1,u.configurationStartType="default",u.clearStorage(),t&&t)for(e in t)t[e]&&(u.storage[e]=t[e]);u.updateConfigDataForConsumers()},u.clearStorage=function(){u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null}},d.setConfigurationStartType=function(t){if("default"===d.getConfigurationStartType()&&"configuration-change"===t)return u.configurationContinued=!1,u.configurationStartType=t,void u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType);"configuration-change"!==t?(u.configurationStartType=t,u.configurationContinued=!1,u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType)):u.configurationContinued=!0},u.checkDPUresponseStatus=function(t){if(t.header&&t.header.statuscode){const e=Math.floor(t.header.statuscode/100);3!==e&&5!==e||c(t)}return t},d.getConfigurationStartType=function(){return u.configurationStartType},d.resetToDefaultSetupParams=function(){var t={prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration"),items:SETUPS.get("nemo.minimal.carinfoitems")||{}};u.clearConfigurationData(t)},u.checkDefaultSetup=function(){m||(u.isStatelessMode=SETUPS.get("scope.nemo.configuration.stateless"),u.configurationEndpoint=u.isStatelessMode?"stateless-configuration":"configuration",m=!0,d.resetToDefaultSetupParams())},d.setDpuExtra=function(t){u.dpuExtra=t,window.sessionStorage&&(t?window.sessionStorage.setItem("dpu_extra",t):window.sessionStorage.removeItem("dpu_extra"))},d.getDpuExtra=function(){let t="";return u.dpuExtra?t=u.dpuExtra:u.isDebugMode()&&(t="messages"),t},u.updateConfigDataForConsumers=function(){a.stateRegistry.triggerAction(r.a,"update",u.storage),(0,s.J)(u.storage)},u.restoreDpuExtra=function(){window.sessionStorage&&(u.dpuExtra=window.sessionStorage.getItem("dpu_extra"))},u.addDpuExtraData=function(t){const e=d.getDpuExtra();return e&&(t.dpu_extra=e),t},u.addDpuExtraParam=function(t){const e=d.getDpuExtra();return e?t.indexOf("?")>=0?t+"&dpu_extra="+e:t+"?dpu_extra="+e:t},u.addSubsessionData=function(t){const e=d.getSubsessionID();return e&&(t.subsession=e),t},d.resetAudicodeRescueInfo=()=>{u.storage.configuration["audicode-rescue-info"]=void 0,u.updateConfigDataForConsumers()},u.addEvents=function(){u.eventBus.on(i.appEvents.PAGE_READY,d.sendEngineDisclaimerLayerEvent)},d.initialize=function(t){u.eventBus=t,u.checkDefaultSetup(),u.restoreDpuExtra(),u.addEvents()}},538:(t,e,n)=>{"use strict";n.d(e,{x:()=>s});var i=n(585),r=n(799),a=n(39);const o={},s={__:o};o.oDefaults={sSelectorDelegateTransferClick:".nm-layer-transfer .nm-j-configurator-delegate-transfer-click"},o.transfer=null,o.layerInstance=null,o.layerIsOpening=!1,o.layerIsClosing=!1,o.mergeData=function(t){return{deleted:t.deleted?o.mergeItemList(t.deleted):[],transferred:t.transferred?o.mergeItemList(t.transferred):[],standard:t.standard?o.mergeItemList(t.standard):[],urls:t.urls}},o.mergeItemList=function(t){return t.map((t=>i.c.getItem(t.id)))},o.openLayer=function(t,e,n){let i;if(!o.layerIsClosing)return o.layerIsOpening=!0,i=r.layerApi.open(t,e,n),i.then((function(t){return o.layerIsOpening=!1,Promise.resolve(t)}),(function(t){return o.layerIsOpening=!1,Promise.reject(t)}));setTimeout((function(){o.openLayer(t,e,n)}),510)},o.closeLayer=function(){let t;o.layerIsClosing=!0,null===o.layerInstance&&o.layerIsOpening?setTimeout(o.closeLayer,510):(t=o.layerInstance.close(),t.then((function(){o.layerInstance=null,o.layerIsClosing=!1,o.onLayerClose()}),(function(){o.layerIsClosing=!1})))},o.onLayerClose=function(){o.transfer=null},o.handleTransferResolveClick=function(t){let e,n,i,s;t?(o.cancelEvent(t),e=a.dom.closest(t.target,o.oDefaults.sSelectorDelegateTransferClick),e&&(n=e.getAttribute("href"))):(i=a.dom.getElement(o.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='cancel']"),a.dom.isElement(i)?n=i.getAttribute("href"):(s=a.dom.getElement(o.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='submit']"),n=s.getAttribute("href"))),n&&(n=SETUPS.get("nemo.url.dpu")+n,o.eventBus.trigger(r.appEvents.TRANSFER_CLOSE,{url:n})),o.closeLayer()},o.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},o.handleTransferClose=function(){o.layerName&&o.handleTransferResolveClick()},s.handleTransfer=function(t){var e,n;e=o.mergeData(t),n=a.template.render('<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-transfer">\n\t<div class="nm-layer nm-layer-transfer nm-layer-transfer-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.deleted.length}}\n\t\t\t\t\t\t<strong class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer-warning\']}}:\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<ul class="nm-options-list nm-transfer-trigger nm-j-configurator-no-update">\n\t\t\t\t\t\t\t{{~it.deleted :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item">\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t<div class="nm-list-item-additional clearfix">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t/*<li>\n\t\t\t\t\t\t\t<a class="nm-b7 nm-j-configurator-delegate-transfer-click" data-transfer="cancel"\n\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'transfer-layer.label.cancel\']}}</a>\n\t\t\t\t\t\t</li>*/\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-transfer-click nm-el-btn nm-el-btn-01 nm-el-btn-ast" data-transfer="submit">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',e),o.openLayer("transfer-layer",n,o.handleTransferResolveClick).then((function(t){o.layerInstance=t}),(function(t){console.warn("TRANSFER Layer open failed",t.message)}))},s.initialize=function(t){o.eventBus=t,o.legacyEventBus=a.dom.getEventDelegate("body"),o.legacyEventBus.on("click",o.oDefaults.sSelectorDelegateTransferClick,o.handleTransferResolveClick)}},71:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(585),r=n(799),a={},o={__:a};a.STORAGE=window.sessionStorage||null,a.entryPrefix="__nemo__",a.handleConfigurationUpdates=function(){var t={prString:i.c.getPrString(),carlineID:i.c.getCarline()};a.writeEntry(t).then((function(t){console.log("user´s configuration storageID: "+t.stored)}),(function(t){console.warn("Error storing user´s configuration: "+t.message)}))},a.writeEntry=function(t){let e=t;return new Promise((function(t,n){var i;i=a.uuid(),e||n(new TypeError("writeEntry: missing param 'entry_'")),e=JSON.stringify(e),a.STORAGE||n(new TypeError("sessionStorage is not available")),a.STORAGE.setItem(i,e),t({stored:i})}))},a.uuid=function(){return a.entryPrefix+i.c.getVersion()},a.addEvents=function(){a.eventBus.on(r.appEvents.CONFIG_UPDATE,a.handleConfigurationUpdates)},a.readEntryFromStorage=function(){return new Promise((function(t,e){var n;a.STORAGE||e(new TypeError("Browserstorage is not available"));try{n=a.STORAGE.getItem(a.uuid()),t(n=JSON.parse(n))}catch(t){e(new TypeError("Error reading user´s configuration: "+t.message))}}))},a.initialize=function(){!i.c.isInPreviewMode()&&i.c.isConfigurable()?a.addEvents():console.log((i.c.isInPreviewMode(),"preview-mode"))},o.getPreviousUserConfigurationPrString=function(){return a.readEntryFromStorage().then((function(t){return t&&t.carlineID&&t.prString&&t.carlineID===i.c.getCarline()&&t.prString!==i.c.getPrString()?Promise.resolve(t.prString):Promise.reject(new TypeError("no valid user configuration available"))}),(function(){return Promise.reject(new TypeError("error reading user configuration from storage"))}))},a.debugEntries=function(){var t,e=[],n=new RegExp(a.entryPrefix);for(t in a.STORAGE)n.test(t)&&e.push(t);return e},o.initialize=function(t){a.eventBus=t,a.initialize()}},113:(t,e,n)=>{"use strict";n.d(e,{Q:()=>s});var i=n(799),r=n(39),a=n(386);const o={},s={__:o};o.instance=!1,o.enabled=!0,o.source=!1,o.oDefaults={sCloseLayerButtonSelector:".nm-configurationstart-layer-close"},o.addEvents=function(){o.legacyEventBus.on("click.layer.configstart.close",o.oDefaults.sCloseLayerButtonSelector,o.closeStartLayer)},o.removeEvents=function(){o.legacyEventBus.off("click.layer.configstart.close",o.oDefaults.sCloseLayerButtonSelector,o.closeStartLayer)},o.trackLoadConfigEvent=function(){return o.enabled?new Promise((function(t){var e=setInterval((function(){if(o.layerProcessed){if(clearInterval(e),!o.layerActive)return console.log("reject"),Promise.reject();console.log("resolve: ",o.source),"carstore"===o.source?t({source:"myAudi"}):"audicode-input"===o.source?t({source:"audicode"}):t({source:o.source})}}),50)})):Promise.reject()},o.isStartlayerNotToShow=function(){return!o.enabled||a.hideHeaderFooter.isHiddenHeaderFooter()||SETUPS.get("scope.nemo.hide_startlayer")},o.openStartLayer=function(t){var e=t;return o.isStartlayerNotToShow()?(o.layerProcessed=!0,o.layerActive=!1,Promise.reject(new Error("Start layers not supported."))):new Promise((function(n,a){let s,l,c="configurationstart-implicit";(e=t)?(c="configurationstart-loaded",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-simpleform nm-configurationstart-loaded-layer clearfix">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationloaded-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=\twindow.i18n[\'configurationloaded-layer-edit\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<img src="{{=it.ms_url}}{{=it.images.exterior_front[\'flyout\']}}"\n\t\t\t\t\t\tclass="nm-unscaled-image nm-alpha" />\n\t\t\t\t\t\t<div class="nm-start-information-overview">\n\t\t\t\t\t\t\t<div class="nm-start-inforamation-content">\n\t\t\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.carlineName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-engine nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.description}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<ul class="nm-car-price clearfix">\n\t\t\t\t\t\t\t\t\t<li class="nm-car-price-total nm-el-hdl nm-el-hdl-04 nm-at-hdl-b clearfix">\n\t\t\t\t\t\t\t\t\t\t/*<span class="nm-car-price-total-key">\n\t\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'totalprice-label\']}}\n\t\t\t\t\t\t\t\t\t\t</span>*/\n\t\t\t\t\t\t\t\t\t\t<span class="nm-car-price-total-value">\n\n\t\t\t\t\t\t\t\t\t\t\t{{? typeof(it.configuration.prices.rotr) !== \'undefined\' && parseInt(it.configuration.prices.rotr, 10) > 0 }}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.prices.rotr}}\n\t\t\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.price}}\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'):(c="configurationstart-implicit",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-md-configurationstart-implicit-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationstart-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">{{= window.i18n[\'configurationstart-layer-edit\']}}</p>\n\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast" style="float:right;">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),s=r.template.render(l,e||{}),setTimeout((function(){document.body.scrollTop=0,i.layerApi.open(c,s,o.closeStartLayer).then((function(t){o.layerProcessed=!0,o.layerActive=!1,e&&(o.source=e.start_type,o.layerActive=!0),o.instance=t,o.addEvents(),jQuery("body").addClass("nm-config-layer-open"),n(o.instance)}),(function(t){o.layerProcessed=!0,o.layerActive=!1,a(t)}))}),600)}))},o.closeStartLayer=function(t){o.cancelEvent(t),o.instance&&"function"==typeof o.instance.close&&o.instance.close(),o.eventBus.emit(i.appEvents.STARTLAYER_CLOSE),o.instance=null,o.removeEvents(),jQuery("body").removeClass("nm-config-layer-open")},o.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},o.initialize=function(){o.instance||(o.addEvents(),o.instance=!0,o.layerProcessed=!1,o.layerActive=!0)},s.handleStartLayer=function(t){return o.openStartLayer(t)},s.unHandleStartLayer=function(){o.layerProcessed=!0,o.layerActive=!1},s.setEnabled=function(t){o.enabled=t},s.initialize=function(t){o.eventBus=t,o.legacyEventBus=jQuery("body"),o.initialize()}},445:(t,e,n)=>{"use strict";n.d(e,{a:()=>r});var i=n(214);const r="dbadAudicodeStore";class a{constructor(){return a.instance||(this._initStore(),a.instance=this),a.instance}_initStore(){const t={update:this._update,invalidate:this._invalidate};i.stateRegistry.addStore(r,{audicode:null,configuration:null},t)}_update(t,e){return{...t,audicode:e.audicode,configuration:e.configuration}}_invalidate(t){return{...t,audicode:null,configuration:null}}}const o=new a;Object.freeze(o)},680:(t,e,n)=>{"use strict";n.d(e,{a:()=>r});var i=n(214);const r="dbadConfigurationStore";class a{constructor(){return a.instance||(this._initStore(),a.instance=this),a.instance}_initStore(){const t={update:this._update};i.stateRegistry.addStore(r,{configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null},t)}_update(t,e){return{...t,...e,...a._processUpdate(e)}}static _processUpdate(t){return{selectedTrimline:a._getSelectedTrimline(t)}}static _getSelectedTrimline(t){return t.items?Object.values(t.items).reduce(((t,e)=>a._isSelectedTrimline(e)?e.id:t),null):null}static _isSelectedTrimline(t){return a._isTrimlineItem(t)&&a._isSelectedItem(t)}static _isTrimlineItem(t){return t.id&&t.id.indexOf("trimline_")>-1}static _isSelectedItem(t){return t.status&&"1"===t.status.charAt(3)}}const o=new a;Object.freeze(o)},133:(t,e)=>{var n,i,r,a=function(){var t=function(t,e){var n=t,i=u[e],r=null,a=0,o=null,s=[],l={},c=function(t,e){r=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var i=0;i<t;i+=1)e[n][i]=null}return e}(a=4*n+17),d(0,0),d(a-7,0),d(0,a-7),g(),m(),p(t,e),n>=7&&f(t),null==o&&(o=v(n,i,s)),h(o,e)},d=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||a<=t+n))for(var i=-1;i<=7;i+=1)e+i<=-1||a<=e+i||(r[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},m=function(){for(var t=8;t<a-8;t+=1)null==r[t][6]&&(r[t][6]=t%2==0);for(var e=8;e<a-8;e+=1)null==r[6][e]&&(r[6][e]=e%2==0)},g=function(){for(var t=S.getPatternPosition(n),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var a=t[e],o=t[i];if(null==r[a][o])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)r[a+s][o+l]=-2==s||2==s||-2==l||2==l||0==s&&0==l}},f=function(t){for(var e=S.getBCHTypeNumber(n),i=0;i<18;i+=1){var o=!t&&1==(e>>i&1);r[Math.floor(i/3)][i%3+a-8-3]=o}for(i=0;i<18;i+=1){o=!t&&1==(e>>i&1);r[i%3+a-8-3][Math.floor(i/3)]=o}},p=function(t,e){for(var n=i<<3|e,o=S.getBCHTypeInfo(n),s=0;s<15;s+=1){var l=!t&&1==(o>>s&1);s<6?r[s][8]=l:s<8?r[s+1][8]=l:r[a-15+s][8]=l}for(s=0;s<15;s+=1){l=!t&&1==(o>>s&1);s<8?r[8][a-s-1]=l:s<9?r[8][15-s-1+1]=l:r[8][15-s-1]=l}r[a-8][8]=!t},h=function(t,e){for(var n=-1,i=a-1,o=7,s=0,l=S.getMaskFunction(e),c=a-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var u=0;u<2;u+=1)if(null==r[i][c-u]){var d=!1;s<t.length&&(d=1==(t[s]>>>o&1)),l(i,c-u)&&(d=!d),r[i][c-u]=d,-1==(o-=1)&&(s+=1,o=7)}if((i+=n)<0||a<=i){i-=n,n=-n;break}}},v=function(t,e,n){for(var i=w.getRSBlocks(t,e),r=b(),a=0;a<n.length;a+=1){var o=n[a];r.put(o.getMode(),4),r.put(o.getLength(),S.getLengthInBits(o.getMode(),t)),o.write(r)}var s=0;for(a=0;a<i.length;a+=1)s+=i[a].dataCount;if(r.getLengthInBits()>8*s)throw"code length overflow. ("+r.getLengthInBits()+">"+8*s+")";for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(236,8),r.getLengthInBits()>=8*s));)r.put(17,8);return function(t,e){for(var n=0,i=0,r=0,a=new Array(e.length),o=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),a[s]=new Array(l);for(var u=0;u<a[s].length;u+=1)a[s][u]=255&t.getBuffer()[u+n];n+=l;var d=S.getErrorCorrectPolynomial(c),m=E(a[s],d.getLength()-1).mod(d);for(o[s]=new Array(d.getLength()-1),u=0;u<o[s].length;u+=1){var g=u+m.getLength()-o[s].length;o[s][u]=g>=0?m.getAt(g):0}}var f=0;for(u=0;u<e.length;u+=1)f+=e[u].totalCount;var p=new Array(f),h=0;for(u=0;u<i;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(p[h]=a[s][u],h+=1);for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(p[h]=o[s][u],h+=1);return p}(r,i)};l.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=_(t);break;case"Alphanumeric":n=D(t);break;case"Byte":n=A(t);break;case"Kanji":n=k(t);break;default:throw"mode:"+e}s.push(n),o=null},l.isDark=function(t,e){if(t<0||a<=t||e<0||a<=e)throw t+","+e;return r[t][e]},l.getModuleCount=function(){return a},l.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=w.getRSBlocks(t,i),r=b(),a=0;a<s.length;a++){var o=s[a];r.put(o.getMode(),4),r.put(o.getLength(),S.getLengthInBits(o.getMode(),t)),o.write(r)}var u=0;for(a=0;a<e.length;a++)u+=e[a].dataCount;if(r.getLengthInBits()<=8*u)break}n=t}c(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){c(!0,n);var i=S.getLostPoint(l);(0==n||t>i)&&(t=i,e=n)}return e}())},l.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var i=0;i<l.getModuleCount();i+=1){n+="<tr>";for(var r=0;r<l.getModuleCount();r+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=l.isDark(i,r)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},l.createSvgTag=function(t,e,n,i){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,n=r.alt,i=r.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var a,o,s,c,u=l.getModuleCount()*t+2*e,d="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=r.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=i.text||n.text?' role="img" aria-labelledby="'+y([i.id,n.id].join(" ").trim())+'"':"",d+=">",d+=i.text?'<title id="'+y(i.id)+'">'+y(i.text)+"</title>":"",d+=n.text?'<description id="'+y(n.id)+'">'+y(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',o=0;o<l.getModuleCount();o+=1)for(s=o*t+e,a=0;a<l.getModuleCount();a+=1)l.isDark(o,a)&&(d+="M"+(a*t+e)+","+s+c);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=l.getModuleCount()*t+2*e,i=e,r=n-e;return T(n,n,(function(e,n){if(i<=e&&e<r&&i<=n&&n<r){var a=Math.floor((e-i)/t),o=Math.floor((n-i)/t);return l.isDark(o,a)?0:1}return 1}))},l.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var i=l.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=l.createDataURL(t,e),r+='"',r+=' width="',r+=i,r+='"',r+=' height="',r+=i,r+='"',n&&(r+=' alt="',r+=y(n),r+='"'),r+="/>"};var y=function(t){for(var e="",n=0;n<t.length;n+=1){var i=t.charAt(n);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,i,r,a,o=1*l.getModuleCount()+2*t,s=t,c=o-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},d={"██":"▀","█ ":"▀"," █":" ","  ":" "},m="";for(e=0;e<o;e+=2){for(i=Math.floor((e-s)/1),r=Math.floor((e+1-s)/1),n=0;n<o;n+=1)a="█",s<=n&&n<c&&s<=e&&e<c&&l.isDark(i,Math.floor((n-s)/1))&&(a=" "),s<=n&&n<c&&s<=e+1&&e+1<c&&l.isDark(r,Math.floor((n-s)/1))?a+=" ":a+="█",m+=t<1&&e+1>=c?d[a]:u[a];m+="\n"}return o%2&&t>0?m.substring(0,m.length-o-1)+Array(o+1).join("▀"):m.substring(0,m.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,i,r,a,o=l.getModuleCount()*t+2*e,s=e,c=o-e,u=Array(t+1).join("██"),d=Array(t+1).join("  "),m="",g="";for(n=0;n<o;n+=1){for(r=Math.floor((n-s)/t),g="",i=0;i<o;i+=1)a=1,s<=i&&i<c&&s<=n&&n<c&&l.isDark(r,Math.floor((i-s)/t))&&(a=0),g+=a?u:d;for(r=0;r<t;r+=1)m+=g+"\n"}return m.substring(0,m.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var n=l.getModuleCount(),i=0;i<n;i++)for(var r=0;r<n;r++)t.fillStyle=l.isDark(i,r)?"black":"white",t.fillRect(i*e,r*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t.charCodeAt(n);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=I(t),i=function(){var t=n.read();if(-1==t)throw"eof";return t},r=0,a={};;){var o=n.read();if(-1==o)break;var s=i(),l=i()<<8|i();a[String.fromCharCode(o<<8|s)]=l,r+=1}if(r!=e)throw r+" != "+e;return a}(),i="?".charCodeAt(0);return function(t){for(var e=[],r=0;r<t.length;r+=1){var a=t.charCodeAt(r);if(a<128)e.push(a);else{var o=n[t.charAt(r)];"number"==typeof o?(255&o)==o?e.push(o):(e.push(o>>>8),e.push(255&o)):e.push(i)}}return e}};var e,n,i,r,a,o=1,s=2,l=4,c=8,u={L:1,M:0,Q:3,H:2},d=0,m=1,g=2,f=3,p=4,h=5,v=6,y=7,S=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,i=7973,a=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(r={}).getBCHTypeInfo=function(t){for(var e=t<<10;a(e)-a(n)>=0;)e^=n<<a(e)-a(n);return 21522^(t<<10|e)},r.getBCHTypeNumber=function(t){for(var e=t<<12;a(e)-a(i)>=0;)e^=i<<a(e)-a(i);return t<<12|e},r.getPatternPosition=function(t){return e[t-1]},r.getMaskFunction=function(t){switch(t){case d:return function(t,e){return(t+e)%2==0};case m:return function(t,e){return t%2==0};case g:return function(t,e){return e%3==0};case f:return function(t,e){return(t+e)%3==0};case p:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case h:return function(t,e){return t*e%2+t*e%3==0};case v:return function(t,e){return(t*e%2+t*e%3)%2==0};case y:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},r.getErrorCorrectPolynomial=function(t){for(var e=E([1],0),n=0;n<t;n+=1)e=e.multiply(E([1,C.gexp(n)],0));return e},r.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case o:return 10;case s:return 9;case l:case c:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case o:return 12;case s:return 11;case l:return 16;case c:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case o:return 14;case s:return 13;case l:return 16;case c:return 12;default:throw"mode:"+t}}},r.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i+=1)for(var r=0;r<e;r+=1){for(var a=0,o=t.isDark(i,r),s=-1;s<=1;s+=1)if(!(i+s<0||e<=i+s))for(var l=-1;l<=1;l+=1)r+l<0||e<=r+l||0==s&&0==l||o==t.isDark(i+s,r+l)&&(a+=1);a>5&&(n+=3+a-5)}for(i=0;i<e-1;i+=1)for(r=0;r<e-1;r+=1){var c=0;t.isDark(i,r)&&(c+=1),t.isDark(i+1,r)&&(c+=1),t.isDark(i,r+1)&&(c+=1),t.isDark(i+1,r+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t.isDark(i,r)&&(u+=1);return n+=Math.abs(100*u/e/e-50)/5*10},r),C=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var i={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return i}();function E(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var i=new Array(t.length-n+e),r=0;r<t.length-n;r+=1)i[r]=t[r+n];return i}(),i={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),n=0;n<i.getLength();n+=1)for(var r=0;r<t.getLength();r+=1)e[n+r]^=C.gexp(C.glog(i.getAt(n))+C.glog(t.getAt(r)));return E(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=C.glog(i.getAt(0))-C.glog(t.getAt(0)),n=new Array(i.getLength()),r=0;r<i.getLength();r+=1)n[r]=i.getAt(r);for(r=0;r<t.getLength();r+=1)n[r]^=C.gexp(C.glog(t.getAt(r))+e);return E(n,0).mod(t)}};return i}var w=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,i){var r=function(e,n){switch(n){case u.L:return t[4*(e-1)+0];case u.M:return t[4*(e-1)+1];case u.Q:return t[4*(e-1)+2];case u.H:return t[4*(e-1)+3];default:return}}(n,i);if(void 0===r)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+i;for(var a=r.length/3,o=[],s=0;s<a;s+=1)for(var l=r[3*s+0],c=r[3*s+1],d=r[3*s+2],m=0;m<l;m+=1)o.push(e(c,d));return o},n}(),b=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)n.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(n){var i=Math.floor(e/8);t.length<=i&&t.push(0),n&&(t[i]|=128>>>e%8),e+=1}};return n},_=function(t){var e=o,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+2<e.length;)t.put(r(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(r(e.substring(i,i+1)),4):e.length-i==2&&t.put(r(e.substring(i,i+2)),7))}},r=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+a(t.charAt(n));return e},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return i},D=function(t){var e=s,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return i},A=function(e){var n=l,i=t.stringToBytes(e),r={getMode:function(){return n},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return r},k=function(e){var n=c,i=t.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(t,e){var n=i("友");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var r=i(e),a={getMode:function(){return n},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,n=0;n+1<e.length;){var i=(255&e[n])<<8|255&e[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(n+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return a},L=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,i){n=n||0,i=i||t.length;for(var r=0;r<i;r+=1)e.writeByte(t[r+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},I=function(t){var e=t,n=0,i=0,r=0,a={read:function(){for(;r<8;){if(n>=e.length){if(0==r)return-1;throw"unexpected end of file./"+r}var t=e.charAt(n);if(n+=1,"="==t)return r=0,-1;t.match(/^\s$/)||(i=i<<6|o(t.charCodeAt(0)),r+=6)}var a=i>>>r-8&255;return r-=8,a}},o=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return a},T=function(t,e,n){for(var i=function(t,e){var n=t,i=e,r=new Array(t*e),a={setPixel:function(t,e,i){r[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(i),t.writeByte(0);var e=o(2);t.writeByte(2);for(var r=0;e.length-r>255;)t.writeByte(255),t.writeBytes(e,r,255),r+=255;t.writeByte(e.length-r),t.writeBytes(e,r,e.length-r),t.writeByte(0),t.writeString(";")}},o=function(t){for(var e=1<<t,n=1+(1<<t),i=t+1,a=s(),o=0;o<e;o+=1)a.add(String.fromCharCode(o));a.add(String.fromCharCode(e)),a.add(String.fromCharCode(n));var l,c,u,d=L(),m=(l=d,c=0,u=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;c+e>=8;)l.writeByte(255&(t<<c|u)),e-=8-c,t>>>=8-c,u=0,c=0;u|=t<<c,c+=e},flush:function(){c>0&&l.writeByte(u)}});m.write(e,i);var g=0,f=String.fromCharCode(r[g]);for(g+=1;g<r.length;){var p=String.fromCharCode(r[g]);g+=1,a.contains(f+p)?f+=p:(m.write(a.indexOf(f),i),a.size()<4095&&(a.size()==1<<i&&(i+=1),a.add(f+p)),f=p)}return m.write(a.indexOf(f),i),m.write(n,i),m.flush(),d.toByteArray()},s=function(){var t={},e=0,n={add:function(i){if(n.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return a}(t,e),r=0;r<e;r+=1)for(var a=0;a<t;a+=1)i.setPixel(a,r,n(a,r));var o=L();i.write(o);for(var s=function(){var t=0,e=0,n=0,i="",r={},a=function(t){i+=String.fromCharCode(o(63&t))},o=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return r.writeByte=function(i){for(t=t<<8|255&i,e+=8,n+=1;e>=6;)a(t>>>e-6),e-=6},r.flush=function(){if(e>0&&(a(t<<6-e),t=0,e=0),n%3!=0)for(var r=3-n%3,o=0;o<r;o+=1)i+="="},r.toString=function(){return i},r}(),l=o.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return t}();a.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},i=[],void 0===(r="function"==typeof(n=function(){return a})?n.apply(e,i):n)||(t.exports=r)},799:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__799__},386:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__386__},39:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__39__},954:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__954__},214:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__214__},135:t=>{"use strict";t.exports=JSON.parse('{"P":{"hi":"https://mediaservice.audi.com/renderapi/v1/urls","I4":"4DWZjsGz","a":true}}')}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AUDICODE_STORE_ID:()=>o.a,CONFIGURATION_STORE_ID:()=>V.a,EngineDisclaimerLayerElement:()=>sn,USERDATA_STORE_ID:()=>s,audicode:()=>d,ave2cloud:()=>p,aveApi:()=>D,aveDom:()=>b,carlineMapping:()=>L.w,cart:()=>U,container:()=>W.n,domState:()=>Y,dpuApi:()=>r.c,dpuConflict:()=>X.P,dpuController:()=>m.E,dpuModel:()=>K.V,dpuSearch:()=>nt,dpuTransfer:()=>it.x,equipmentSearch:()=>ct,expertmode:()=>dt,formCore:()=>xt,formField:()=>pt,formGroup:()=>bt,formItem:()=>St,formSelect:()=>Ot,formSimple:()=>Bt,hiddenVersionItems:()=>Ft,infobox:()=>zt,inlinerendering:()=>qt,inlinerenderingAoz:()=>Nt,lastConfiguration:()=>Wt,loadingIndicator:()=>Zt,mediaLibrary:()=>Yt,pattern:()=>ve,patternAudicode:()=>ne,patternCarlineId:()=>re,patternConfiguration:()=>oe,patternLanguage:()=>le,patternLeadsource:()=>ue,patternPartnerId:()=>me,patternPrString:()=>ge,patternVehicleId:()=>pe,pdfServiceLink:()=>Ee,preconfigurationTeaser:()=>be,preconfsTeaser:()=>De,recommendations:()=>Le,renderinginjector:()=>Pe,scsAttributesInitial:()=>je,scsMatching:()=>Fe,scsMatchingBasket:()=>Be,setFlagsSearch:()=>Ve,startlayer:()=>Ue.Q,summaryTechdata:()=>Qe,tooltip:()=>Ye,userConfigurations:()=>$e.Z,visializer:()=>Ke,vtp:()=>Ze,wallet:()=>on,yourPayment:()=>cn,zipDownload:()=>dn});var t=__webpack_require__(799),e=__webpack_require__(133),n=__webpack_require__.n(e),i=__webpack_require__(39),r=__webpack_require__(585),a=__webpack_require__(214),o=__webpack_require__(445);const s="dbadUserdataStore";class l{constructor(){return l.instance||(this._initStore(),l.instance=this),l.instance}_initStore(){const t={update:this._update,logout:this._logout};a.stateRegistry.addStore(s,{audicodes:null,loggedIn:null,csrfToken:null},t)}_update(t,e){return{...t,...e}}_logout(t){return{...t,audicodes:null,loggedIn:!1,csrfToken:null}}}const c=new l;Object.freeze(c);const u={},d={__:u};u.audicode=null,u.eventBus=null,u.selectors={audicodeLink:".nm-j-audicode-link"},u.clickCallback=function(t){t.preventDefault();const e=i.dom.closest(t.target,u.selectors.audicodeLink);if("_blank"===e.getAttribute("target")){const t=window.open("","_blank");u.clickAudicodeLink(e,t)}else u.clickAudicodeLink(e,window)},u.addEvents=function(){u.eventBus.addListener(t.appEvents.CONFIG_UPDATE,u.deleteAudicode),u.eventBus.addListener(t.appEvents.LAYER_LOADED,u.onLayerLoaded),u.eventBus.addListener(t.appEvents.LAYER_LOADED,u.removeAudiCodeHref),u.eventBus.addListener(t.appEvents.PAGE_LOADED,u.removeAudiCodeHref),u.legacyEventBus.on("click",u.selectors.audicodeLink,u.clickCallback)},u.removeEvents=function(){u.eventBus.removeListener(t.appEvents.CONFIG_UPDATE,u.deleteAudicode),u.eventBus.removeListener(t.appEvents.LAYER_LOADED,u.onLayerLoaded),u.eventBus.removeListener(t.appEvents.LAYER_LOADED,u.removeAudiCodeHref),u.eventBus.removeListener(t.appEvents.PAGE_LOADED,u.removeAudiCodeHref),u.legacyEventBus.off("click",u.selectors.audicodeLink,u.clickCallback)},u.deleteAudicode=function(){u.audicode=null,a.stateRegistry.triggerAction(o.a,"invalidate"),u.eventBus.emit(t.appEvents.AUDICODE_DELETED)},u.loadAudiCodeRequest=async function(t){const e=r.c.getDpuUrl()+"audicode?"+new URLSearchParams({context:r.c.getContext(),subsession:r.c.getSubsessionID()||"",ids:t||r.c.getPrString()}).toString();return fetch(e,{credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).catch((t=>console.log("Error fetching AudiCode - server responded with: ",t)))},u.hasAudicode=function(t){return!!t&&!!t.header&&200===t.header.statuscode&&t.audicode&&!!t.audicode.id},d.loadAudiCode=function(){return new Promise((function(e,n){u.audicode&&u.prString&&u.prString===r.c.getPrString()?(u.updateAudicodeStore(),e(u.audicode)):(u.audicode=null,u.loadAudiCodeRequest().then((function(i){u.hasAudicode(i)?(u.audicode=i.audicode.id,u.updateAudicodeStore(),i.header.subsession&&r.c.setSubsessionID(i.header.subsession),u.prString=r.c.getPrString(),u.eventBus.emit(t.appEvents.AUDICODE_SUCCESS),e(u.audicode)):(u.eventBus.emit(t.appEvents.AUDICODE_FAILED),n(new TypeError("load AudiCode failed")))}),(function(e){console.error(e),u.eventBus.emit(t.appEvents.AUDICODE_FAILED),n(new TypeError("load AudiCode error: "+e.message))})))}))},u.isAudicodeFieldOnPage=function(){return i.dom.isElement(".nm-j-audicode")},d.getAudicode=function(){return u.audicode},u.onLayerLoaded=function(){if(u.isAudicodeFieldOnPage()){const t=u.getAudicodeFromUrl();t?(u.audicode=t,u.updateAudicodeStore(),u.updateAudicodeDomElements(),u.removeAudicodeFromUrl()):d.loadAudiCode().then(u.updateAudicodeDomElements).catch((function(t){u.error(t)}))}},u.getAudicodeFromUrl=()=>new URL(window.location.href).searchParams.get("audicode"),u.removeAudicodeFromUrl=()=>{const t=new URL(window.location.href);t.searchParams.delete("audicode"),window.history.replaceState({},document.title,t.href)},u.updateAudicodeStore=()=>{a.stateRegistry.triggerAction(o.a,"update",{audicode:u.audicode})},u.updateAudicodeDomElements=function(){u.audicode&&(u.generateQrCode(),i.dom.getElementsArray(".nm-j-audicode").forEach((t=>t.innerHTML=u.audicode)),i.dom.getElementsArray(".nm-j-audicode-show").forEach((t=>t.classList.remove("nm-j-audicode-failure","nm-j-audicode-loading"))),a.stateRegistry.triggerAction(s,"update",{currentAudicode:u.audicode}))},u.generateQrCode=function(){const t=i.dom.getElement(".nm-j-audicode-qrcode");let e,r;i.dom.isElement(t)&&(t.innerHTML="",e=t.getAttribute("data-qr-url"),r=new(n())(4,"L"),r.addData(e+u.audicode),r.make(),t.innerHTML=r.createSvgTag(4,0))},u.clickAudicodeLink=function(t,e){null===u.audicode?d.loadAudiCode().then((function(){u.setAudiCodeUrlAsLocation(t,e)})).catch((function(t){u.error(t)})):u.setAudiCodeUrlAsLocation(t,e)},u.setAudiCodeUrlAsLocation=function(t,e){let n;n=t.getAttribute("data-link-pattern"),n=n.replace("{{=audicode}}",u.audicode),e.location.href=n},u.removeAudiCodeHref=function(){document.querySelectorAll(u.selectors.audicodeLink).forEach((t=>{t.removeAttribute("href")}))},u.error=function(t){i.dom.getElement(".nm-j-audicode-show").classList.add("nm-j-audicode-failure"),console.log(t)},d.initialize=function(t){u.eventBus=t,u.legacyEventBus=i.dom.getEventDelegate("body"),u.removeAudiCodeHref(),u.addEvents()};var m=__webpack_require__(649);class g extends t.ModalLayerContentBase{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._closeLayer=this._closeLayer.bind(this);const e=t.dataset.configuration["audicode-rescue-info"];this.data={data:t.dataset,whatIsChanged:this._getIsWhatChanged(t.dataset.rescueMessages),pdfLink:this._getPdfLink(e)}}static get type(){return"AudicodeRescueLayerElement"}static async getContent(t){return new g(t)}connectedCallback(){this._render(),this.addEvents(),m.E.resetAudicodeRescueInfo()}addEvents(){[...this.querySelectorAll(".j-close")].map((t=>t.addEventListener("click",this._closeLayer)))}_getIsWhatChanged(t){return t.join(", ")}_getPdfLink(t){return SETUPS.get("scope.nemo.audicode.not_valid_pdflink")?SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode:""}_closeLayer(t){t&&(t.preventDefault(),t.stopPropagation()),this._triggerClose()}_render(){this.innerHTML=i.template.render('\n{{?!!it.data.configuration.extColorCode && !!it.data.configuration.extColorCode.selected}}\n\t{{var selected = it.data.configuration.extColorCode.selected;}}\n\t{{var backgroundcolor = \'extcolor--\' + selected;}}\n\t{{var textcolor = \'extcolor-text--\' + selected;}}\n{{??}}\n\t{{var selected = "";}}\n\t{{var backgroundcolor = "";}}\n\t{{var textcolor = "";}}\n{{?}}\n<div class="rescue-audicode">\n\t<div class="rescue-audi__close">\n\t\t<div class="nm-layer__close-button j-close" style="display: inline-flex;">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')}}/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="{{=textcolor}}">\n\t\t<div class="rescue-audicode__text-container {{=backgroundcolor}}">\n\t\t\t<p class="rescue-audicode__audicode audi-copy-s">{{=window.i18n[\'audicode.rescue.your_audicode\']}} {{=it.data.configuration[\'audicode-rescue-info\'].audicode}}</p>\n\t\t\t<h3 class="rescue-audicode__carline audi-headline-order-3">{{=it.data.configuration.carlineName}}</h3>\n\t\t\t<p class="rescue-audicode__description audi-copy-s">{{=it.data.configuration.description}}</p>\n\t\t\t<p class="rescue-audicode__price audi-copy-m">{{=it.data.configuration.prices.total}}</p>\n\t\t</div>\n\t\t<div class="rescue-audicode__image-container">\n\t\t\t<div class="rescue-audicode__image-background {{=backgroundcolor}}"></div>\n\t\t\t<div class="rescue-audicode__image-picture">\n                {{?!!it.data.images && it.data.images[\'exterior\'] && it.data.images[\'exterior\'][\'flyout\']}}\n                    <picture>\n                        <source media="(max-width: 427px)" srcset="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=470">\n                        <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=654">\n                    </picture>\n                {{??}}\n                    <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-audicode-flyout.png"}}" alt="Fallback Image">\n                {{?}}\n            </div>\n\t\t</div>\n\t</div>\n\n\t<div class="rescue-audicode__text-options-container">\n\t\t<p class="rescue-audicode__options_text audi-copy-m">{{=window.i18n[\'audicode.rescue.cant_load_audicode\']}}</p>\n\t\t<p class="rescue-audicode__options-changed audi-copy-s">\n\t\t\t{{=window.i18n[\'audicode.rescue.alternative_configuration\']}}<br/>\n\t\t\t{{=it.whatIsChanged}}\n\t\t</p>\n\n\t\t<a href="#" class="rescue-audicode__options-load-configuration audi-link-m audi-link--arrow j-close">{{=window.i18n[\'audicode.rescue.load_alternative_configuration\']}}</a><br />\n\t\t{{?it.pdfLink}}\n\t\t\t<a href="{{=it.pdfLink}}" class="rescue-audicode__options-pdf audi-link-m audi-link--arrow">{{=window.i18n[\'audicode.rescue.pdf\']}}</a>\n\t\t{{?}}\n\n\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t<div class="rescue-audicode__disclaimer-entries audi-copy-s">\n\t\t\t\t{{? it.data.configuration.techdata && (it.data.configuration.techdata[\'consumption-combined\'] || it.data.configuration.techdata[\'carbon-dioxide-emissions\'] || it.data.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t{{? it.data.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t{{?}}\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t{{?}}\n\n\t</div>\n</div>',this.data)}}t.modalLayer.registerLayerType(g),void 0===window.customElements.get("audi-audicode-rescue-layer-element")&&window.customElements.define("audi-audicode-rescue-layer-element",g);const f={},p={__:f};f.isAve2CloudAvailable=!1,f.containerId="avecanvas";const h=()=>{if(console.log("AVE2Cloud updateStreamResolution"),f.controllerFactory){const t=document.getElementById(f.containerId);f.controllerFactory.getUIAndApiController((e=>{e.updateSize(null,t.clientHeight)}))}},v=()=>{window.addEventListener("resize",h)},y=()=>{console.log("AVE2Cloud closeLayerHandler"),f.controllerFactory&&f.controllerFactory.getUIAndApiController((t=>{t.close()})),window.removeEventListener("resize",h)},S=()=>{f.controllerFactory=new Ave2CloudApplication.ControllerFactory,f.controllerFactory.getUIAndApiController(((t,e)=>{e.getFreeInstances().then((t=>{t.freeInstances>=1?(f.isAve2CloudAvailable=!0,console.log("AVE2Cloud: freeInstances: ",t.freeInstances)):console.log("AVE2Cloud: No free sessions")})).catch((t=>{console.error(t,"getFreeInstances")}))}))},C=()=>{console.log("AVE2Cloud connectToStream");const t=document.getElementById(f.containerId);t.classList.add("ave2cloud-container");const e={connectionParameters:{protocol:document.location.protocol.indexOf("https")>-1?"https":"http",customer:SETUPS.get("ave3d.customer")||"audi",environment:SETUPS.get("ave3d.env")||"live"},car:{manufacturer:"audi",model:r.c.getCarline(),year:r.c.getModelYear()},consumeMouseScrollEvents:!0,resolution:{x:t.clientWidth,y:t.clientHeight},setupCamera:"MRV1",setupPrCodes:r.c.getAveString().split(","),market:SETUPS.get("ave2cloud.market"),service:"web"};console.log("AVE2Cloud webSiteCar",JSON.stringify(e)),f.controllerFactory.getUIAndApiController(((n,i)=>{n.connect(e,f.containerId),n.on((t=>{console.log(t,"view-event"),"AVEConnected"===t&&i.loadCar(e)})),i.on((e=>{console.log(e.message,"api-event"),"LoadCarFinish"===e.message&&(n.updateSize(null,t.clientHeight),t.classList.add("ave2cloud-container--ready"))}))}))},E=()=>{f.eventBus.on(t.appEvents.CARINFO_LOAD_COMPLETE,S),f.eventBus.on(t.appEvents.CONFIG_UPDATE,S),f.eventBus.on("AVE2CLOUD.CONTAINER.READY",C),f.eventBus.on(t.appEvents.RENDERINGLAYER_LOADED,v),f.eventBus.on("jslayer.close",y)};p.isAve2CloudAvailable=()=>f.isAve2CloudAvailable,p.isAve2CloudEnabled=()=>SETUPS.get("ave2cloud.enabled"),p.initialize=t=>{if(f.eventBus=t,p.isAve2CloudEnabled()){console.log("AVE2Cloud initialize");const t=SETUPS.get("ave2cloud.url");i.jsLoader.loadURL(t).then(E)}};const w={},b={__:w};window.i18n=window.i18n||{},w.optionMappings={Trunk:window.i18n["rendering-layer.option-trunk"],Doors:window.i18n["rendering-layer.option-doors"],MMI:window.i18n["rendering-layer.option-mmi"],RTTVoid:window.i18n["rendering-layer.option-env-grey"],WhiteVoid:window.i18n["rendering-layer.option-env-white"],Tunnel_Env:window.i18n["rendering-layer.option-Tunnel_Env"],Iceland_Void:window.i18n["rendering-layer.option-Iceland_Void"],SoftTop:window.i18n["rendering-layer.option-SoftTop"]},w.oDefaults={sClassHidden:"nm-hidden",sClassActive:"nm-active",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sSelectorOptionsSelectorWrapper:".nm-ave-animation-selector-wrapper",sSelectorOptionsSelector:".nm-ave-animation-selector",sSelectorActive3dContainer:".nm-md-ave-container",sSelectorStreamWrapper:"#streamWrapper"},b.renderAnimationControls=function(t){var e,n,i="",r=Object.keys(w.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=w.renderAnimationOption(r[e],w.optionMappings[r[e]]));return i},b.renderEnvironmentControls=function(t){var e,n,i="",r=Object.keys(w.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=w.renderEnvironmentOption(r[e],w.optionMappings[r[e]]));return i},b.enableOptions=function(){i.dom.getElement(w.oDefaults.sSelectorOptionsSelector).classList.remove(w.oDefaults.sClassHidden),i.dom.getEventDelegate("body").off("click",w.oDefaults.sSelectorOptionsSelectorWrapper,w.handlerAnimationSelectorClick),i.dom.getEventDelegate("body").on("click",w.oDefaults.sSelectorOptionsSelectorWrapper,w.handlerAnimationSelectorClick)},w.renderAnimationOption=function(t,e){return'<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="'+t+'">'+e+"</li>"},w.renderEnvironmentOption=function(t,e){return'<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="'+t+'">'+e+"</li>"},w.handlerAnimationSelectorClick=function(t){var e=i.dom.getElement(w.oDefaults.sSelectorOptionsSelector),n=i.dom.getElement(w.oDefaults.sSelectorOptionsSelectorWrapper);t.preventDefault(),e.classList.contains(w.oDefaults.sClassSelectorClosed)?(e.classList.remove(w.oDefaults.sClassSelectorClosed),e.classList.add(w.oDefaults.sClassSelectorOpen),n.classList.add("active")):(e.classList.remove(w.oDefaults.sClassSelectorOpen),e.classList.add(w.oDefaults.sClassSelectorClosed),n.classList.remove("active"))},w.stopWheel=function(t){var e;(e=t||window.event)&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1)},w.catchScrollWheel=function(){document.addEventListener("mousewheel",w.stopWheel),document.addEventListener("DOMMouseScroll",w.stopWheel)},w.releaseScrollWheel=function(){document.removeEventListener("mousewheel",w.stopWheel),document.removeEventListener("DOMMouseScroll",w.stopWheel)},b.activateAveCanvas=function(t){console.log("ave-dom: activate ave canvas");var e=document.getElementById(t);if(i.dom.isElement(e)){var n=document.createElement("div");n.innerHTML=i.template.render('<div class="nm-ave-animation-selector-wrapper">\n\t<div class="nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white nm-hidden">\n\t\t<div class="options-text">{{=window.i18n[\'rendering-layer.options\']}}</div>\n\t</div>\n\t<ul class="nm-ave-animation-selection">\n\t\t<li class="nm-button-close">\n\t\t\t<svg class="nm-icon-cancel">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel.svg#nm-icon-cancel"}}></use>\n\t\t\t</svg>\n\t\t</li>\n\t</ul>\n</div>',{}),e.insertBefore(n.firstChild,e.firstChild),i.dom.getEventDelegate("body").on("mouseover","#"+t,w.catchScrollWheel),i.dom.getEventDelegate("body").on("mouseout","#"+t,w.releaseScrollWheel)}},b.resizeStreamWrapper=function(){console.log("resizeStream");var t=i.dom.getElement(w.oDefaults.sSelectorStreamWrapper);i.dom.isElement(t)&&(t.style.width="100%",t.style.height="100%",t.style.position="absolute")},b.moveAveCanvas=function(t,e){var n=document.getElementById(t),r=document.getElementById(e),a=i.dom.getElement(w.oDefaults.sSelectorOptionsSelectorWrapper,n);console.log("ave-dom: move ave canvas"),i.dom.isElement(n)&&i.dom.isElement(a)&&i.dom.isElement(r)&&(n.classList.remove(w.oDefaults.sClassActive),r.insertBefore(a,r.firstChild),i.dom.getEventDelegate("body").on("mouseover","#"+e,w.catchScrollWheel),i.dom.getEventDelegate("body").on("mouseout","#"+e,w.releaseScrollWheel))},b.deactivateAveCanvas=function(t){console.info("ave-dom: deactivate ave canvas");var e=document.getElementById(t);if(i.dom.isElement(e)){for(;e.hasChildNodes();)e.removeChild(e.firstChild);i.dom.getEventDelegate("body").off("mouseover","#"+t,w.catchScrollWheel),i.dom.getEventDelegate("body").off("mouseout","#"+t,w.releaseScrollWheel)}};const _={},D={__:_};_.oDefaults={sSelectorAnimationListSelector:".nm-ave-animation-selection"},_.debugEnabled=!0,_.zlLoaded=!1,_.zlValidated=!1,_.zlboltURL="",_.cameraMappings={closeup_lights:"FrontRightShare",closeup_wheels:"Rims",dashboard:"Interior",exterior:"MRVSide",exterior_back:"MRV4",exterior_front:"MRV1",exterior_straight_back:"MRV5",exterior_straight_front:"MRV6",interior:"InteriorSide_L0L",rearseat:"Interior_Rear_View"},_.defaultCamera="MRV1",_.zlGetCustomer=function(){const t=SETUPS.get("ave3d.customer");return _.zlLoaded||_.debug("zlbolt not yet loaded"),_.debug("zlbolt customer = "+t),t},_.zlGetEnv=function(){const t=SETUPS.get("ave3d.env");return _.zlLoaded||_.debug("zlbolt not yet loaded"),_.debug("zlbolt env = "+t),t},_.zlValidate=function(){if("undefined"!=typeof zlbolt&&!1===_.zlValidated){const e=_.buildUpValidateObject();zlbolt.validate(e,(function(e,n){n&&"valid"===n.status?(_.zlValidated=!0,_.eventBus.emit(t.appEvents.AVE_AVAILABLE)):n&&n.reason?_.debug("zl validation failed: "+n.reason):_.debug("zl validation failed")}))}else _.debug("failed zlbolt.validate")},_.zlSetReady=function(){_.debug("zlbolt loaded"),_.zlLoaded=!0,_.zlValidate()},_.prepareZLboltURL=function(){const t=SETUPS.get("ave3d.url");_.debug("zlbolt url = "+t),_.zlboltURL=t},_.zlSetAveString=function(t){_.zlLoaded?zlbolt.setPrCodes(t,(function(t){_.debug("set prcodes with msg: ",t)})):_.debug("zlbolt not yet loaded")},_.zlDisconnect=function(t,e){if(_.zlLoaded&&"undefined"!=typeof zlbolt&&!0===_.isConnected){_.debug("disconnect from zlbolt");try{zlbolt.disconnect((function(){t(e)}))}catch(n){_.debug("zl exception on disconnect: "+n),t(e)}_.isConnected=!1}else t(e)},_.zlActivateCamera=function(t){const e=_.cameraMappings[t];zlbolt.switchCamera(e,(function(t){_.debug("switched camera to "+e+" with result",t)}))},_.zlSetConnectCallbacks=function(e,n){zlbolt.isSupported((function(t,i){if(t||!i)return _.debug("zl this browser is not supported"),!1;zlbolt.connect(_.buildUpConnectObject(e,n),(function(t){t?(_.debug("zlbolt connect exited in error state: ",t),_.isConnected=!1):(_.debug("zlbolt connected"),_.isConnected=!0)}))})),zlbolt.onStreamReady=function(){!0===_.streamActive&&_.debug("stream already active - possible side effect"),_.streamActive=!0,_.isConnected=!0,_.eventBus.on(t.appEvents.CONFIG_UPDATE,_.handlerConfigUpdated),_.zlBuildOptionsControl(),zlbolt.enableMouseTracking(),window.addEventListener("resize",b.resizeStreamWrapper),_.dispatchStreamReadyEvent(),b.resizeStreamWrapper()},zlbolt.onMouseUp=function(t){_.debug("mouse up with x:"+t.x+" and y:"+t.y)},zlbolt.onError=function(t){_.debug("zlbolt Error: ",t)},zlbolt.onStreamDisconnect=function(){_.debug("zlbolt StreamDisconnect"),_.eventBus.off(t.appEvents.CONFIG_UPDATE,_.handlerConfigUpdated),window.removeEventListener("resize",b.resizeStreamWrapper),_.streamActive=!1},zlbolt.onClose=function(){_.debug("zlbolt stream close"),_.streamActive=!1}},_.zlConnect=function(t,e){return _.zlLoaded?"undefined"==typeof zlbolt?(_.debug("failed zlConnect"),!1):(_.debug("zlbolt StreamReady"),void _.zlSetConnectCallbacks(t,e)):(_.debug("zlbolt not yet loaded"),!1)},_.zlBuildOptionsControl=function(){_.debug("build options control"),zlbolt.enumerateAnimations((function(t){const e=i.dom.getElement(_.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(i.dom.isElement(e))for(n.innerHTML=b.renderAnimationControls(t.animations);n.firstChild;)e.appendChild(n.firstChild);i.dom.getEventDelegate("body").on("click",".nm-avectrl-animation",_.zlTriggerAnimation)})),zlbolt.enumerateEnvironments((function(t){const e=i.dom.getElement(_.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(i.dom.isElement(e)&&t.environments.length>1){for(n.innerHTML=b.renderEnvironmentControls(t.environments);n.firstChild;)e.appendChild(n.firstChild);i.dom.getEventDelegate("body").on("click",".nm-avectrl-environment",_.zlTriggerEnvironmentChange)}})),b.enableOptions()},_.zlTriggerAnimation=function(t){const e=i.dom.closest(t.target,".nm-avectrl-animation").getAttribute("data-animation");_.debug("trigger animation "+e),zlbolt.triggerAnimation(e,(function(t){_.debug("triggered "+e+" with result",t)}))},_.zlTriggerEnvironmentChange=function(t){const e=i.dom.closest(t.target,".nm-avectrl-environment").getAttribute("data-environment");_.debug("trigger environment change "+e),zlbolt.switchEnvironment(e,(function(t){_.debug("triggered "+e+" with result",t)}))},_.handlerConfigUpdated=function(){_.zlSetAveString(r.c.getAveString().split(","))},_.mapViewPerspeciveToCamera=function(t){return t in _.cameraMappings?_.cameraMappings[t]:(_.debug("falling back to default camera from "+t),_.defaultCamera)},_.getActiveProtocol=function(){return document.location.protocol.indexOf("https")>-1?"https":"http"},_.buildUpValidateObject=function(){return{connectionParameters:{protocol:_.getActiveProtocol(),customer:_.zlGetCustomer(),environment:_.zlGetEnv()},car:{manufacturer:"audi",model:r.c.getCarline(),year:r.c.getModelYear()},consumeMouseScrollEvents:!0}},_.buildUpConnectObject=function(t,e){const n=r.c.getAveString();let i=_.buildUpValidateObject();return i.resolution={x:1112,y:668},i.parent=t,i.setupCamera=_.mapViewPerspeciveToCamera(e),n&&(i.setupPrCodes=n.split(",")),i},_.dispatchStreamReadyEvent=function(){_.eventBus.emit(t.appEvents.AVE_STREAM_READY);const e=new CustomEvent("ave-stream-ready-tracking",{});document.dispatchEvent(e)},_.debug=function(t){_.debugEnabled&&console.log("ave-api: "+t)},D.isActiveCarline=function(){return"1"===SETUPS.get("scope.ave3d")&&"true"===SETUPS.get("ave3d.aveEnabled")},D.showPerspective=function(t){_.zlActivateCamera(t)},D.isAveAvailable=function(){return _.zlValidated},D.deactivate=function(t){_.zlDisconnect(b.deactivateAveCanvas,t)},D.activateAVE=function(t,e){b.activateAveCanvas(t),_.zlConnect(t,e)},D.moveAVE=function(t,e,n){_.debug("moving from "+t+" to "+e),zlbolt.moveStream(e),b.moveAveCanvas(t,e),void 0!==n&&!1!==n&&_.zlActivateCamera(n)},D.initialize=function(t){_.eventBus=t,D.isActiveCarline()&&(_.prepareZLboltURL(),i.jsLoader.loadURL(_.zlboltURL).then(_.zlSetReady))};class A extends HTMLElement{constructor(){super()}connectedCallback(){this.basketContainer=this.querySelector(".nm-basket-container"),this.footerCheck=this.parentNode.querySelector(".nm-basket-scroll-check-bottom"),this.topCheck=[...document.querySelectorAll(".nm-navigation-scroll-check")].pop(),this.contentContainer=this.parentNode.querySelector(".nm-content"),this.isStickyBottom=!1,this.addEvents(),this.setupPageForBasket(),this.observerTopScrollPosition=this.observeTopScrollPosition(),this.observerBottomScrollPosition=this.observeBottomScrollPosition(),this.observerMatchingWidget=this.observeMatchingWidget()}disconnectedCallback(){this.removeEvents(),this.observerTopScrollPosition.disconnect(),this.observerBottomScrollPosition.disconnect(),this.observerMatchingWidget.disconnect()}addEvents(){this.basketContainer.addEventListener("transitionend",i.dom.throttle((()=>this.setupPageForBasket()),500)),window.addEventListener("resize",(()=>this.setupPageForBasket()))}removeEvents(){this.basketContainer.removeEventListener("transitionend",i.dom.throttle((()=>this.setupPageForBasket()),500)),window.removeEventListener("resize",(()=>this.setupPageForBasket()))}setupPageForBasket(){const t=this.getBasketHeight();this.contentContainer.style.minHeight=t+"px",this.footerCheck.style.bottom=t+"px",this.isStickable=window.innerHeight>t,this.checkBottomPosition()}observeBottomScrollPosition(){const t=new IntersectionObserver((t=>t.forEach((t=>this.checkBottomPosition(t)))),{threshold:[0,1]});return t.observe(this.footerCheck),t}observeTopScrollPosition(){const t=new IntersectionObserver((t=>t.forEach((t=>this.checkTopPosition(t)))),{threshold:[0,1]});return t.observe(this.topCheck),t}observeMatchingWidget(){const t=new MutationObserver((()=>{this.setupPageForBasket()}));return t.observe(this,{childList:!0,subtree:!0}),t}checkTopPosition(t){const e=t||{boundingClientRect:this.topCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyTop=(this.isStickable||!this.isFullBasketShown)&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}checkBottomPosition(t){const e=t||{boundingClientRect:this.footerCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyBottom=this.isStickable&&this.isFullBasketShown&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}getBasketHeight(){this.classList.add("nm-basket-superwrap-hidden-measure");const t=this.basketContainer.clientHeight;return this.classList.remove("nm-basket-superwrap-hidden-measure"),t+this.getBasketOffset()}getBasketOffset(){const t=this.isFullBasketShown?54:0,e=document.querySelector(".nm-nav-wrap"),n=e?e.clientHeight:0,i=document.querySelector(".nm-module-current-consumption");return t+n+(i?i.clientHeight:0)}set isStickyBottom(t){t?this.classList.add("nm-basket-sticky-bottom"):this.classList.remove("nm-basket-sticky-bottom")}set isStickyTop(t){t?this.classList.add("nm-basket-sticky-top"):this.classList.remove("nm-basket-sticky-top"),t&&!this.isFullBasketShown?this.style.top=this.getBasketOffset()+"px":this.style.top=""}get isStickyTop(){return this.classList.contains("nm-basket-sticky-top")}set isStickable(t){this.setAttribute("data-is-stickable",t)}get isStickable(){return"true"===this.getAttribute("data-is-stickable")}get isFullBasketShown(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)>=1100}}window.customElements.get("audi-configurator-basket")||window.customElements.define("audi-configurator-basket",A);class k extends HTMLElement{constructor(){super()}connectedCallback(){this.isAudicodeParamInUrl()?this.injectCompareElement():d.loadAudiCode().then((t=>{this.updateURL(t)})).then((()=>{this.injectCompareElement()}))}isAudicodeParamInUrl(){return new URL(window.location.href).searchParams.has("ac")}updateURL(t){const e=new URL(window.location.href);e.searchParams.set("ac",t),window.history.replaceState({path:e.href},"",e.href)}injectCompareElement(){const t=document.createElement("car-compare");this.appendChild(t)}}void 0===window.customElements.get("audi-configurator-car-compare")&&window.customElements.define("audi-configurator-car-compare",k);var L=__webpack_require__(367);const I={selectedItemID:null},T={__:I};I.oDefaults={selectorCarstoreDeleteSection:".nm-j-carstore-delete-section",selectorAbortButton:".nm-j-abort-button",selectorDeleteButton:".nm-j-delete-button",selectorCarDetails:".nm-j-carstore-item-details",selectorForm:".nm-j-carstore-modify",selectorCarstoreItem:".nm-module-carstore .nm-j-carstore-item",selectorCarstoreList:".nm-j-carstore-list"},I.loadAgents=function(t){t.forEach((t=>{(new Image).src=t}))},I.addEvents=function(){I.legacyEventBus.on("submit",I.oDefaults.selectorForm,I.handleFormSubmit),I.eventBus.on(t.appEvents.FORM_FINISHED,I.handleFormFinished),I.eventBus.on(t.appEvents.FORM_ERROR,I.handlePossibleLoginStateChange),I.eventBus.on(t.appEvents.MYAUDI_LOGIN,I.list),I.eventBus.on(t.appEvents.LAYER_LOADED,I.list)},I.triggerLoginStateEvent=function(e){if(e){const e=r.c.getVisitorId();e?I.eventBus.emit(t.appEvents.MYAUDI_LOGIN,e):I.eventBus.emit(t.appEvents.MYAUDI_LOGIN)}else I.eventBus.emit(t.appEvents.MYAUDI_LOGOUT);I.updateLoginState()},I.handlePossibleLoginStateChange=function(t){t&&t.response&&t.response.header&&t.response.header["logged-in"]&&t.response.header.subsession&&r.c.setLogin(t.response.header["logged-in"],t.response.header.subsession).then(I.triggerLoginStateEvent).catch((t=>{I.triggerErrorLayer(t,"error.message.LOGIN_FAILED")}))},I.updateLoginState=function(){const t=i.dom.getElement("body");r.c.isLoggedIn()?t.classList.add("nm-logged-in"):t.classList.remove("nm-logged-in")},I.handleFormSubmit=function(t){t.preventDefault();I.selectedItemID=this.getAttribute("data-form-id");const e=i.dom.getElement("#carstore-select-"+I.selectedItemID),n=e&&e.options?e.options[e.selectedIndex].value:"none";"configuration-delete"===n?I.deleteCarstoreItem():"configuration-load"===n&&I.loadCarstoreItem()},I.renderCarstoreList=function(t){const e=i.dom.getElement(I.oDefaults.selectorCarstoreList);e.innerHTML=I.renderListTemplate(t.carstore),e.classList.remove("nm-loader")},I.renderListTemplate=function(t){return t.list?(t.altImage=r.c.getAltImagePath("selection-compare","none"),i.template.render('\n<div class="nm-module nm-module-carstore nm-carstore" data-module="carstore">\n\t<div class="nm-3col">\n\t\t<h2 class="nm-headline-medium nm-carstore-headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t\t<p class="nm-text-large">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t\t<ul class="nm-carstore-saved-items">\n\t\t\t{{~ it.list :value }}\n\t\t\t\t<li class="nm-carstore-item nm-j-carstore-item" data-item-position="{{=value.position}}">\n\t\t\t\t\t<span class="nm-carstore-item-position nm-headline-teaser">{{=value.position}}</span>\n\t\t\t\t\t<img class="nm-carstore-item-image" src="{{? !!value[\'exterior-image\']}}{{=value[\'exterior-image\']}}?alt={{?}}{{=it.altImage}}" alt="{{=value.name}}" />\n\t\t\t\t\t<div class="nm-carstore-item-content">\n\t\t\t\t\t\t<div class="nm-carstore-item-details nm-j-carstore-item-details">\n\t\t\t\t\t\t\t{{? !!value.name}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-headline-teaser">{{=value.name}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.shoppingCartName}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-text-block">{{=value.shoppingCartName}}<br />\n\t\t\t\t\t\t\t\t\t{{? !!value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t{{=value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.price && value.valid !== false}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-price nm-headline-teaser">{{=value.price}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.audicode}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-audicode nm-text-block">{{=window.i18n[\'audicode-label\']}}: {{=value.audicode}}</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<form class="nm-carstore-modify-section nm-j-carstore-modify" data-form-id="{{=value.position}}" action="#">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<select id="carstore-select-{{=value.position}}" class="nm-carstore-modify-select nm-j-carstore-modify-select">\n\t\t\t\t\t\t\t\t\t{{? value.valid !== false}}\n\t\t\t\t\t\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t<option>{{=window.i18n[\'carstore-layer.invalid-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<input type="hidden" name="carstore-position" value="{{=value.position}}">\n\t\t\t\t\t\t\t\t<button class="nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit" type="submit">submit</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class="nm-carstore-delete-section nm-j-carstore-delete-section nm-hidden">\n\t\t\t\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.delete-slot\']}}</strong>\n\t\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'carstore-layer.delete-dialog\']}}</p>\n\t\t\t\t\t\t\t<div class="nm-modify-buttons">\n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-j-abort-button" href="#">{{=window.i18n[\'abort-label\']}}</a> \n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-button" href="#">{{=window.i18n[\'delete-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n</div>',t)):t.statuscode&&800===t.statuscode?i.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-slots']}}</p>\n",{}):i.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n",{})},I.handleFormFinished=function(t){"login"===t.id?I.handleLoginFormFinished(t):"carstore"===t.id&&I.handleSaveFormFinished()},I.handleLoginFormFinished=function(t){I.loadAgents(t.response.login.agents.standard),I.loadAgents(t.response.login.agents.secure),I.handlePossibleLoginStateChange(t)},I.handleSaveFormFinished=function(){const t=i.dom.getElement(".nm-carstore-save .nm-j-carstore-save");t.classList.remove("nm-j-carstore-save"),t.classList.add("nm-j-carstore-list"),t.innerHTML="",I.list("carstore")},I.list=function(e){I.updateLoginState(),r.c.isLoggedIn()&&I.isCarstoreListOpen()&&(I.showLoader(),m.E.listCarstoreItems().then((function(n){if(I.renderCarstoreList(n),e&&"carstore"===e){const e=i.dom.getElement(".nm-j-audicode").innerText;I.eventBus.emit(t.appEvents.CONFIG_SAVED,e)}})).catch((function(t){I.triggerErrorLayer(t,"carstore-layer.error-loading-slots")})).then((function(){I.hideLoader()})))},I.isCarstoreListOpen=function(){return i.dom.getElementsArray(I.oDefaults.selectorCarstoreList).length>0},I.showLoader=function(){i.dom.getElementsArray(I.oDefaults.selectorCarstoreList).forEach((t=>{t.innerHTML="",t.classList.add("nm-loader")}))},I.hideLoader=function(){i.dom.getElementsArray(I.oDefaults.selectorCarstoreList).forEach((t=>{t.classList.remove("nm-loader")}))},I.deleteCarstoreItem=function(){I.toggleDeleteSectionVisibiblity(!0),I.addDeleteButtonEvents()},I.handleDeleteAbort=function(t){return t.preventDefault(),I.toggleDeleteSectionVisibiblity(!1),I.removeDeleteButtonEvents(),I.selectedItemID=null,!1},I.handleDeleteSubmit=function(t){return t.preventDefault(),I.selectedItemID&&m.E.deleteCarstoreItem(I.selectedItemID).then((function(t){I.list(t)})).catch((function(t){I.triggerErrorLayer(t,"carstore-layer.error-deleting-slot")})),I.removeDeleteButtonEvents(),I.selectedItemID=null,!1},I.toggleDeleteSectionVisibiblity=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=I.oDefaults.selectorCarstoreItem+"[data-item-position='"+I.selectedItemID+"'] ";i.dom.getElement(e+I.oDefaults.selectorCarstoreDeleteSection).classList.toggle("nm-hidden",!t),i.dom.getElement(e+I.oDefaults.selectorForm).classList.toggle("nm-hidden",t),i.dom.getElement(e+I.oDefaults.selectorCarDetails).classList.toggle("nm-hidden",t)},I.addDeleteButtonEvents=function(){const t=I.oDefaults.selectorCarstoreItem+"[data-item-position='"+I.selectedItemID+"'] ";I.legacyEventBus.on("click",t+I.oDefaults.selectorAbortButton,I.handleDeleteAbort),I.legacyEventBus.on("click",t+I.oDefaults.selectorDeleteButton,I.handleDeleteSubmit)},I.removeDeleteButtonEvents=function(){const t=I.oDefaults.selectorCarstoreItem+"[data-item-position='"+I.selectedItemID+"'] ";I.legacyEventBus.off("click",t+I.oDefaults.selectorAbortButton,I.handleDeleteAbort),I.legacyEventBus.off("click",t+I.oDefaults.selectorDeleteButton,I.handleDeleteSubmit)},I.loadCarstoreItem=function(){return m.E.loadCarstoreItem(I.selectedItemID).catch((function(t){I.triggerErrorLayer(t,"carstore-layer.error-loading-car")})).then((function(){t.router.open("page",r.c.getCurrentCarlineUrl()),setTimeout((function(){const t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1);i.dom.getElement(".nm-j-layer-close-button").dispatchEvent(t)}),100)})),!1},I.triggerErrorLayer=function(e,n){console.error(n,e);const i=r.c.getErrorMessage(e);I.eventBus.emit(t.appEvents.ERROR,[window.i18n[n],i])},T.initialize=function(t){I.eventBus=t,I.legacyEventBus=i.dom.getEventDelegate("body"),I.addEvents()};class x{constructor(){return x.instance||(this._init(),x.instance=this),x.instance}_init(){this.csrfToken=null,this._getCsrfToken=this._getCsrfToken.bind(this),this._requestAudicodeOperation=this._requestAudicodeOperation.bind(this),a.stateRegistry.subscribeToStore(s,this._getCsrfToken)}_getCsrfToken(t){t&&t.csrfToken&&(this.csrfToken=t.csrfToken)}async _requestAudicodeOperation(t,e){const n=SETUPS.get("myaudi.uds.url")+"carstore/"+e,i={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken},method:t};return fetch(n,i).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((t=>{a.stateRegistry.triggerAction(s,"update",{audicodes:t})})).catch((t=>console.log("CarstoreApi ERROR - audicode - ",t)))}async deleteAudicode(t){return this._requestAudicodeOperation("DELETE",t)}async saveAudicode(t){return this._requestAudicodeOperation("PATCH",t)}async getAudicodeList(){const t=SETUPS.get("myaudi.uds.url")+"carstore/listAudicodes",e={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};return fetch(t,e).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((t=>{a.stateRegistry.triggerAction(s,"update",{audicodes:t})})).catch((t=>console.log("CarstoreApi ERROR - listAudicodes - ",t)))}}const P=new x;class O extends HTMLElement{constructor(){super(),this.audicode=null,this.handleDeleteClick=this.handleDeleteClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.deleteButton=this.querySelector(".j-carstore-delete"),this.deleteButton.addEventListener("click",this.handleDeleteClick)}disconnectedCallback(){this.deleteButton&&this.deleteButton.removeEventListener("click",this.handleSaveClick)}handleDeleteClick(t){t.preventDefault(),P.deleteAudicode(this.audicode)}}void 0===window.customElements.get("audi-carstore-delete-audicode")&&window.customElements.define("audi-carstore-delete-audicode",O);var j=__webpack_require__(531);class R extends HTMLElement{constructor(){super(),this.currentConfigurations={},this.audicodeList=null,this.stateController=this.stateController.bind(this),this.renderList=this.renderList.bind(this),this.hasAudicodeListChanged=this.hasAudicodeListChanged.bind(this),this.handleListAudicodesResponse=this.handleListAudicodesResponse.bind(this)}connectedCallback(){a.stateRegistry.subscribeToStore(s,this.stateController),this.isToBeInitialized=!0}async renderList(t){if(this.currentConfigurations=t.configurations,this.wrapper=this.querySelector(".carstore-list__wrapper"),!this.wrapper)return;const e=Object.keys(this.currentConfigurations);let n="";if(0===e.length)n+=i.template.render("\n\t<p class=\"audi-copy-m carstore-list__error-message\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n");else for(const t of e)n+=await this.renderListItem(t);this.wrapper.innerHTML=n}async renderListItem(t){let e=this.currentConfigurations[t];const n=await(0,j.G)(e.configuration).then((t=>{if(!t)throw new Error;return t})),r=await n,a=Object.assign(e,{images:r},{mediaservice:SETUPS.get("nemo.url.mediaservice")}),o=e.error?'\n\t<div class="carstore-list-item carstore-list-item--fail">\n\t\t<div class="carstore-list-item__image-container">\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t</div>\n\t\t<p class="audi-copy-m carstore-list__error-message">\n\t\t\t<span class="carstore-list__error-message-text">{{=it.error.message}}</span>\n\t\t\t<span class="carstore-list__error-message-text">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode}}</span>\n\t\t</p>\n\t\t<form class="carstore-list-item__form">\n\t\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'delete-configuration-label\']}}</legend>\n\t\t\t<fieldset>\n\t\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode}}">\n\t\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n':'\n<audi-configurator-carstore-list-item class="carstore-list-item" data-module="carstore-list-item" data-audicode="{{=it.audicode.id}}">\n\t<div class="carstore-list-item__image-container">\n\t\t{{? !!it.images && !!it.images.exterior_front && !!it.images.exterior_front[\'flyout\']}}\n\t\t\t<img class="carstore-list-item__image" src="{{=it.mediaservice}}{{=it.images[\'exterior_front\'][\'flyout\']}}" alt="{{=it.configuration.carlineName}}" />\n\t\t{{??}}\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t{{?}}\n\t</div>\n\t<div class="carstore-list-item__description">\n\t\t{{? !!it.configuration.carlineName}}\n\t\t\t<div class="audi-headline-order-3 carstore-list-item__carline">{{=it.configuration.carlineName}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.description}}\n\t\t\t<div class="audi-copy-s carstore-list-item__engine">{{=it.configuration.description}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.prices.total}}\n\t\t\t<div class="audi-copy-m carstore-list-item__price">{{=it.configuration.prices.total}}</div>\n\t\t{{?}}\n\t</div>\n\t<form action="#" class="carstore-list-item__form">\n\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'carstore-layer.manage-slots\']}}</legend>\n\t\t<fieldset class="carstore-list-item__form-administration">\n\t\t\t<div class="audi-dropdown carstore-list-item__form-select-wrapper">\n\t\t\t\t<select name="carstore-list-item__form-select" class="audi-dropdown-select carstore-list-item__form-select">\n\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t</select>\n\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t{{? !!it.audicode.id}}\n\t\t\t\t<div class="audi-copy-s carstore-list-item__audicode">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode.id}}</div>\n\t\t\t{{?}}\n\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--submit j-carstore-submit">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'carstore-layer.continue-label\']}}</span>\n\t\t\t</button>\n\t\t</fieldset>\n\t\t<fieldset class="carstore-list-item__form-dialogue">\n\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode.id}}">\n\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t</button>\n\t\t\t\t<button class="audi-button audi-button--ghost carstore-list-item__button carstore-list-item__button--cancel j-carstore-cancel" type="reset">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'abort-label\']}}</span>\n\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</audi-configurator-carstore-list-item>\n';return i.template.render(o,a)}disconnectedCallback(){a.stateRegistry.unsubscribeFromStore(s,this.stateController)}createHeadlines(){this.innerHTML=i.template.render('\n\t<h2 class="audi-headline-order-2 carstore-list__headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t<p class="audi-copy-m carstore-list__intro-text">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t<div class="carstore-list__wrapper"></div>\n')}stateController(t){if(!t.loggedIn)return this.innerHTML="",this.audicodeList=null,void(this.currentConfigurations={});t.loggedIn&&(this.isToBeInitialized||null===t.audicodes&&null===this.audicodeList)&&(this.createHeadlines(),P.getAudicodeList(),this.isToBeInitialized=!1),t.audicodes!==this.audicodeList&&this.handleListAudicodesResponse(t.audicodes),t.configurations&&t.configurations!==this.currentConfigurations&&this.renderList(t)}async handleListAudicodesResponse(t){const e=this.filterAudicodesToLoad(t);let n={};if(e){const t=e.map((t=>K.V.loadConfigurationByAudiCodeStateless(t).catch((e=>({audicode:t,error:e}))))),i=await Promise.all(t);for(const t of i)t.error?n[t.audicode]={audicode:t.audicode,error:t.error}:n[t.audicode.id]={audicode:t.audicode,configuration:t.configuration}}this.audicodeList=t;const i=this.mergeConfigurations(t,n,this.currentConfigurations);a.stateRegistry.triggerAction(s,"update",{configurations:i})}mergeConfigurations(t,e,n){let i={};return t.forEach((t=>{i[t]=e[t]||n[t]})),i}filterAudicodesToLoad(t){return t?t.filter((t=>!this.currentConfigurations[t])):null}hasAudicodeListChanged(t,e){return!e||t.length!==e.length||!t.every((t=>e.includes(t)))}}void 0===window.customElements.get("audi-carstore-list")&&window.customElements.define("audi-carstore-list",R);class B extends HTMLElement{constructor(){super(),this.handleSubmitClick=this.handleSubmitClick.bind(this),this.handleCancelClick=this.handleCancelClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.form=this.querySelector("form"),this.formSelect=this.querySelector(".carstore-list-item__form-select"),this.submitButton=this.querySelector(".j-carstore-submit"),this.cancelButton=this.querySelector(".j-carstore-cancel"),this.addEvents()}addEvents(){this.submitButton&&this.submitButton.addEventListener("click",this.handleSubmitClick),this.cancelButton&&this.cancelButton.addEventListener("click",this.handleCancelClick)}handleSubmitClick(t){t.preventDefault(),"configuration-delete"===this.formSelect.value?this.classList.toggle("carstore-list-item--show-dialogue"):"configuration-load"===this.formSelect.value&&(window.location.href=window.i18n["audicode.direct-url"]+this.audicode)}handleCancelClick(){this.classList.remove("carstore-list-item--show-dialogue")}}void 0===window.customElements.get("audi-configurator-carstore-list-item")&&window.customElements.define("audi-configurator-carstore-list-item",B);class M extends HTMLElement{constructor(){super(),this.updateVisibility=this.updateVisibility.bind(this),this.handleSaveClick=this.handleSaveClick.bind(this)}connectedCallback(){a.stateRegistry.subscribeToStore(s,this.updateVisibility),this.button=this.querySelector("button"),this.button.addEventListener("click",this.handleSaveClick)}disconnectedCallback(){a.stateRegistry.unsubscribeFromStore(s,this.updateVisibility)}updateVisibility(t){const e=t.currentAudicode;this.setAttribute("data-audicode",e),e&&null!==t.audicodes&&!t.audicodes.includes(e)?this.classList.remove("nm-hidden"):this.classList.add("nm-hidden")}handleSaveClick(){const t=this.getAttribute("data-audicode");t&&P.saveAudicode(t)}}void 0===window.customElements.get("audi-carstore-save-audicode")&&window.customElements.define("audi-carstore-save-audicode",M);const F={},U={__:F};let z=!1;F.oDefaults={sSelectorCart:".nm-basket",sSelectorSnippetText:".nm-j-configurator-text-"},F.updateAndAnimatePrice=function(t,e){t.stop(!0,!0).animate({opacity:"0.01"},250,"easeInSine",(function(){jQuery(this).text(e)})).delay(400).animate({opacity:"1"},300,"easeOutSine")},F.hidePriceAndRate=function(t){var e,n,i={price:{},rate:{}};for(e in i)i.hasOwnProperty(e)&&""===(n=t.find([F.oDefaults.sSelectorSnippetText,e].join(""))).text()&&n.closest("div").addClass("nm-hidden")},F.hideRateIfUnavailable=function(t){var e;t.prices&&(void 0===(e=t.prices.totalRateRaw)||0===parseFloat(e)?jQuery("body").addClass("nm-no-rate"):jQuery("body").removeClass("nm-no-rate"))},F.updatePrice=function(t,e,n){var i,r,a=e.price;for(i in e)if(e.hasOwnProperty(i)){if(r=t.find([F.oDefaults.sSelectorSnippetText,i].join("")),"price"===i&&a&&n&&n.data&&n.data.animate){F.updateAndAnimatePrice(r,a);continue}r.text(e[i])}},F.updateCartText=function(t){var e,n=jQuery(F.oDefaults.sSelectorCart);if(r.c.isConfigurable()){if(!(e=r.c.getConfiguration()))return;F.updatePrice(n,e,t),F.hideRateIfUnavailable(e)}else F.hidePriceAndRate(n)},F.updateEngineLinks=function(){var t,e;r.c.isConfigurable()&&(t=jQuery("[data-link-pattern]"),e=r.c.getMotorcode(),t.each((function(){var t=jQuery(this),n=t.attr("data-link-pattern");n&&n.match(/{{=it.model}}/g)&&(n=n.replace(/{{=it.model}}/,e),t.attr("href",n))})))},F.updateSummaryStatus=function(t){"summary"===t||"onepage_configurator"===t?jQuery("body").addClass("nm-is-summary"):jQuery("body").removeClass("nm-is-summary")},F.updateBasketBodyClass=function(t,e){var n=jQuery(".nm-basket").length>0,i="nemo"===t.attr("data-type");n&&i&&!("home"===e)?jQuery("body").addClass("nm-has-basket"):jQuery("body").removeClass("nm-has-basket")},F.updateClasses=function(t){var e,n;n=(e=void 0!==t&&void 0!==t.domElement?jQuery(t.domElement).find(".nm-content"):jQuery(".nm-content")).attr("data-template"),F.updateSummaryStatus(n),F.updateBasketBodyClass(e,n)},F.handlerAnimated=function(){F.updateCartText({data:{animate:!0}}),F.updateEngineLinks()},F.handlerNotAnimated=function(){F.updateCartText({data:{animate:!1}}),F.updateEngineLinks()},F.addEvents=function(){F.eventBus.on(t.appEvents.CONFIG_UPDATE,F.handlerAnimated),F.eventBus.on(t.appEvents.LAYER_LOADED,F.handlerNotAnimated),F.eventBus.on(t.appEvents.CONFIG_START,F.handlerNotAnimated),F.eventBus.on(t.appEvents.PAGE_LOADED,F.handlerNotAnimated),F.eventBus.on(t.appEvents.PAGE_LOADED,F.updateEngineLinks),F.eventBus.on(t.appEvents.PAGE_LOADED,F.updateClasses)},U.dispose=function(){F.eventBus.off(t.appEvents.CONFIG_UPDATE,F.handlerAnimated),F.eventBus.off(t.appEvents.LAYER_LOADED,F.handlerNotAnimated),F.eventBus.off(t.appEvents.CONFIG_START,F.handlerNotAnimated),F.eventBus.off(t.appEvents.PAGE_LOADED,F.updateEngineLinks),F.eventBus.off(t.appEvents.PAGE_LOADED,F.updateClasses)},F.initialize=function(){z||(F.addEvents(),z=!0,F.updateClasses())},U.initialize=function(t){F.eventBus=t,F.initialize()};__webpack_require__(330);var V=__webpack_require__(680);class N extends HTMLElement{constructor(){super()}connectedCallback(){this.changeEngineButton=this.querySelector(".nm-engine-compare__button-change"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.changeEngineButton.addEventListener("click",(t=>this.showSearchWidget(t)))}removeEvents(){this.changeEngineButton.removeEventListener("click",(t=>this.showSearchWidget(t)))}showSearchWidget(t){t.preventDefault();[...document.querySelectorAll(".nm-engine-compare__widget")].forEach((t=>{t.contains(this)&&t.classList.add("nm-engine-compare__widget--show-search")}))}}window.customElements.get("audi-configurator-enginecompare-controls")||window.customElements.define("audi-configurator-enginecompare-controls",N);class Q extends HTMLElement{constructor(){super()}connectedCallback(){this.fuelDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="fuel"]'),this.engineDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="engine"]'),this.trimlineSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="trimline"]'),this.fuelSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="fuel"]'),this.engineSelect=this.querySelector(".nm-engine-compare__select[data-compare-type=engine]"),this.fuelOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="fuel"] option'),this.engineOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"] option'),this.hasTrimline=null!==this.trimlineSelect,this.selectedFuel=this.fuelSelect.value,this.selectedEngine=this.engineSelect.value,this.updateFuelAndEngineOptions(),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.hasTrimline&&this.trimlineSelect.addEventListener("change",(()=>{this.updateFuelAndEngineOptions()})),this.fuelSelect.addEventListener("change",(()=>{this.updateEngineOptions()}))}removeEvents(){this.hasTrimline&&this.trimlineSelect.removeEventListener("change",(()=>{this.updateFuelAndEngineOptions()})),this.fuelSelect.removeEventListener("change",(()=>{this.updateEngineOptions()}))}updateFuelAndEngineOptions(){this.updateFuelOptions(),this.updateEngineOptions()}updateFuelOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value,this.fuelSelect.innerHTML="",[...this.fuelOptions].forEach((t=>{this.isValidOptionForSelectedTrimline(t)&&(t.selected=t.value===this.selectedFuel,this.fuelSelect.add(t))})),this.setDropdownReadonly(this.fuelDropdown,1===this.fuelSelect.length))}updateEngineOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value),this.selectedFuel=this.fuelSelect.value,this.engineSelect.innerHTML="",[...this.engineOptions].forEach((t=>{this.isValidOptionForSelectedTrimlineAndFuel(t)&&(t.selected=t.value===this.selectedEngine,this.engineSelect.add(t))})),this.setDropdownReadonly(this.engineDropdown,1===this.engineSelect.length)}isValidOptionForSelectedTrimlineAndFuel(t){return this.isValidOptionForSelectedTrimline(t)&&this.isValidOptionForSelectedFuel(t)}isValidOptionForSelectedTrimline(t){return!this.hasTrimline||t.getAttribute("data-trimline")===this.selectedTrimline}isValidOptionForSelectedFuel(t){return t.getAttribute("data-fuel")===this.selectedFuel}setDropdownReadonly(t,e){e?t.classList.add("nm-form-readonly"):t.classList.remove("nm-form-readonly")}}window.customElements.get("audi-configurator-enginecompare-filter")||window.customElements.define("audi-configurator-enginecompare-filter",Q);var q=__webpack_require__(954);class H extends HTMLElement{constructor(){super()}connectedCallback(){this.form=this.querySelector(".nm-engine-compare__form"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.form.addEventListener("submit",(t=>{this.submitForm(t)}))}removeEvents(){this.form.removeEventListener("submit",(t=>{this.submitForm(t)}))}submitForm(e){e.preventDefault();const n=this.form.getAttribute("data-link-pattern");if(n){const e=q.doT.template(n)({motorcodes:this.getSelectedEngines()});t.router.open("layer",e)}}getSelectedEngines(){return[...this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"]')].map((t=>t.value))}}window.customElements.get("audi-configurator-enginecompare-form")||window.customElements.define("audi-configurator-enginecompare-form",H);var W=__webpack_require__(747);const G={},Y={__:G};G.$stage=null,G.oDefaults={sStageID:"#nm-id-stage",sSelectorCarPriceRate:".nm-car-price-rate",sSelectorRenderImage:".nm-j-configurator-renderimage",sSelectorConfigurationSummary:".nm-j-configuration-summary",sSelectorQuantityPicker:".nm-quantity",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorSnippetTextContainer:".nm-j-configurator-container-text-",sSelectorSnippetTextEec:".nm-j-configurator-text-eec-",selectorModelText:".js-configurator-model-text-",selectorModelImage:".js-configurator-model-image",selectorEecImage:".nm-j-configurator-image-eec",selectorTechdata:".nm-j-configurator-techdata-",equipmentList:".nm-module-summary-standard-equipment-list ul.nm-navigation"},G.textReplaceKeys=["bpm","carlineName","count","description","eec-co2emission","eec-consumption","eec-consumptioninner","eec-efficiency","eec-electricitycost","eec-energycost","eec-yearlytaxcost","financeGlobalDisclaimer","financeParameters","financeProductDisclaimer","financeProductName","modelPrice","nettoBase","nettoOptions","optionsPrice","pa","packageDescription","price","pricenm-price","rate","rotrprice","rotrRate","servicePackage","subname","taxableBenefit1","taxableBenefit2","taxTotal","totalRate","totalWithCharges","vat"],G.addEvents=function(){G.eventBus.on(t.appEvents.UPDATE_VIEW_STATE,G.handleViewStateUpdates),G.eventBus.on(t.appEvents.CONFIG_UPDATE,G.updateAllDomItems),G.eventBus.on(t.appEvents.PAGE_LOADED,G.handlePageLoaded),G.eventBus.on(t.appEvents.LAYER_LOADED,G.updateAllDomItems),G.eventBus.on(t.appEvents.TRIGGER_DOM_UPDATE,G.handleConflictAndTransferResolves),G.eventBus.on(t.appEvents.CONFIG_SEND,G.hideRenderImages),document.addEventListener("FOOTNOTES_RENDERED",G.handleFootnotesRendered)},G.handleFootnotesRendered=()=>{G.updateEffiencyClass(),G.updateTechdata(),G.updateFinancialFootnote()},G.updateFinancialFootnote=()=>{const t=r.c.getConfiguration();t&&t.financeParameters&&G.setDOMText(jQuery(".audi-footnotes"),t)},G.removeEvents=function(){G.eventBus.off(t.appEvents.UPDATE_VIEW_STATE,G.handleViewStateUpdates),G.eventBus.off(t.appEvents.CONFIG_UPDATE,G.updateAllDomItems),G.eventBus.off(t.appEvents.PAGE_LOADED,G.handlePageLoaded),G.eventBus.off(t.appEvents.LAYER_LOADED,G.updateAllDomItems),G.eventBus.off(t.appEvents.TRIGGER_DOM_UPDATE,G.handleConflictAndTransferResolves),G.eventBus.off(t.appEvents.CONFIG_SEND,G.hideRenderImages)},G.updateDomStatusItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=r.c.getItem(e);if(t.hasClass("nm-j-configurator-no-update"))return!0;e&&n&&n.status&&(G.setDOMStatusCode(t,n.status),n.message&&n.message[0].text&&""!==n.message[0].text&&G.setDebugOutput(t,n.message[0].text))}))},G.handlePageLoaded=function(e){let n=jQuery("body");e&&"domElement"in e&&(n=jQuery(e.domElement)),G.updateDomStatusItems(n),G.updateDomTextItems(n),G.updateDomTextPrices(),G.updateDomTextSummary(),G.updateDomRenderImages(),G.updateModeChangeItems(),G.updateEffiencyClass(),G.updateTechdata(),G.updateFinancialFootnote(),G.updateEnergyEfficiencyImage(),G.eventBus.emit(t.appEvents.DOM_UPDATED)},G.setDOMStatusCode=function(t,e){var n,i;if(e&&(i=(n=t.get(0)).className)!==(i=i.replace(/nm-j-configurator-status_[01]{5}/,["nm-j-configurator-status_",e].join("")))){n.className=i;const e=t.find(".nm-j-configurator-delegate-click"),r=e.attr("aria-checked");e.attr("aria-checked",!("true"===r))}},G.setDebugOutput=function(t,e){var n=e;n&&(n=" ("+n+")",(1===t.find(".nm-debug-item").length?jQuery(t.find(".nm-debug-item")[0]):t).attr("data-message",n))},G.handleConflictAndTransferResolves=function(){G.updateAllDomItems()},G.handleViewStateUpdates=function(t){var e;t&&t.domElement&&t.domElement.length&&(e=t.domElement),G.updateDomRenderImages(e)},G.changeLinkForTechDataLayer=function(){const t=document.querySelectorAll(".nm-module-summary-standard-equipment-list ul.nm-navigation li a");if(0===t.length)return null;const e=r.c.getConfiguration().model;t.forEach((t=>{if(t.href.includes("summary_layer_techdata.html")){const n=new URL(t.href);n.pathname=n.pathname.replace("summary_layer_techdata.html",`summary_layer_techdata.${e}.html`),t.href=n.pathname}}))},G.updateAllDomItems=function(){G.updateDomStatusItems(),G.updateDomTextItems(),G.updateDomTextPrices(),G.updateDomTextSummary(),G.updateDomRenderImages(),G.updateModeChangeItems(),G.updateEffiencyClass(),G.updateTechdata(),G.updateFinancialFootnote(),G.updateEnergyEfficiencyImage(),G.changeLinkForTechDataLayer(),G.eventBus.emit(t.appEvents.DOM_UPDATED)},G.updateDomTextPrices=function(){const t=r.c.getConfiguration();if(t&&t.prices){const e=jQuery("body");G.setDOMText(e,t.prices),G.setConfigDataContainersVisibility(e,t.prices)}},G.updateModeChangeItems=function(){var t,e,n,i,a,o;e="nm-mode-"+(t=r.c.getPriceRateMode()),jQuery("body").removeClass("nm-mode-rate nm-mode-price"),jQuery("body").addClass(e),(o=jQuery(".nm-engine-list a[data-module-maw-criteria=price]")).length>0&&(n="rate"===t?"Preis":"Rate",i="rate"===t?"Rate":"Preis",a=o.html(),o.html(a.replace(n,i))),jQuery(".nm-price-rate-switch, .j-rate-switch").each((function(){this.checked="rate"===t}))},G.updateDomTextItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=r.c.getItem(e);n&&G.setDOMText(t,n)}))},G.setDOMText=function(t,e){G.textReplaceKeys.filter((t=>e.hasOwnProperty(t))).forEach(G.changeText(t,e))},G.changeText=function(t,e){return n=>{const i=t.find(G.oDefaults.sSelectorSnippetText+n),r=i.find("a.audi-j-footnote-reference");"price"===n?i.html(e.priceWithFees||e[n]):i.html(e[n]),r.length>0&&i.append(r)}},G.setConfigDataContainersVisibility=function(t,e){G.textReplaceKeys.forEach((n=>{const i=t.find(G.oDefaults.sSelectorSnippetTextContainer+n);i&&(e.hasOwnProperty(n)&&""!==e[n]&&null!==e[n]?i.removeClass("nm-hidden"):i.addClass("nm-hidden"))}))},G.hideRenderImages=function(){jQuery(G.oDefaults.sSelectorRenderImage).each((function(){jQuery(this).addClass("nm-fade-out")}))},G.updateDomRenderImages=function(t){var e,n,i,a=r.c.getConfigurationAssets();a&&(e=t||jQuery("body"),jQuery(G.oDefaults.sSelectorRenderImage,e).each((function(){var t,e,o,s,l=jQuery(this);n=l.attr("data-renderimage-type"),i=l.attr("data-renderimage-view"),s=l.attr("data-resize-param"),n&&i&&(t=a[i])&&t[n]?(e=r.c.getRenderUrl()+t[n],0!==t[n].indexOf("/preview/")&&(o=r.c.getAltImagePath(i,n))&&(e+="?alt="+o),s&&(e+=-1!==e.indexOf("?")?"&":"?",e+=s),l.is("img")?e!==l.attr("src")?l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).on("load",(function(t){jQuery(t.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})).attr("src",e):l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in"):l.is("source")?l.attr("srcset",e):l.attr("data-url")!==e&&(l.attr("data-url",e),l.css("backgroundImage","url("+e+")"))):l.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})))},G.updateTechdata=function(){const t=r.c.getConfiguration();t&&t.techdata&&Object.entries(t.techdata).forEach((t=>{G.updateTechdataEntry(t[0],t[1])}))},G.updateTechdataEntry=function(t,e){[...document.querySelectorAll(G.oDefaults.selectorTechdata+t)].forEach((t=>{t.innerHTML=e}))},G.updateEffiencyClass=function(){const t=r.c.getConfiguration(),e=document.querySelectorAll(".nm-j-configurator-techdata-efficiency-class");t&&t.eec&&t.eec.efficiency&&e.length>0&&[...e].forEach((e=>{e.innerHTML=t.eec.efficiency,e.classList.remove("nm-hidden"),e.hasAttribute("data-has-techdata-container")&&G.updateTechdataContainerVisibility(e)}))},G.updateTechdataContainerVisibility=function(t){const e=i.dom.closest(t,".nm-j-configurator-techdata-container");e&&e.classList.remove("nm-hidden")},G.updateDomTextSummary=function(){let t=r.c.getMotorcode(),e=r.c.getItem(t),n=r.c.getModelsInfo(t),i=r.c.getConfiguration();i||console.warn("updateDomTextSummary: no configuration available!");let a,o,s=i&&i.eec?i.eec:{};i&&G.setDOMText(jQuery(G.oDefaults.sSelectorConfigurationSummary),i);let l=jQuery("[data-template='summary']");if(e=jQuery.extend(n,e),s&&!s.efficiency&&e&&e["energy-efficiency-category"]&&(s.efficiency=e["energy-efficiency-category"]),l.length){if(i&&i.description&&l.find(".nm-j-configurator-text-description").html(i.description),e)for(a in a="",e)e.hasOwnProperty(a)&&("image"===a?l.find(G.oDefaults.selectorModelImage).attr("src",e[a]):l.find([G.oDefaults.selectorModelText,a].join("")).html(e[a]));if(s){for(a in a="",s)s.hasOwnProperty(a)&&l.find([G.oDefaults.sSelectorSnippetTextEec,a].join("")).html(s[a]);s.efficiency&&s["efficiency-images"]&&(o=s["efficiency-images"].eec_image,l.find(G.oDefaults.selectorEecImage).attr("src",o))}}if(r.c.isConfigurable()){const t=[...document.querySelectorAll(G.oDefaults.sSelectorCarPriceRate)],e="nm-hidden",n=!!r.c.getConfigurationCarPriceRate();n?t.forEach((t=>{t.classList.remove(e)})):t.forEach((t=>{t.classList.add(e)})),G.toggleFinancingFootnoteVisibility(n)}},G.toggleFinancingFootnoteVisibility=t=>{const e=document.querySelector(".nm-footnote-finance"),n="nm-hidden",i=SETUPS.get("nemo.footnote-engine.active");e&&!i&&(t?e.classList.remove(n):e.classList.add(n))},G.updateEnergyEfficiencyImage=function(){const t=r.c.getConfiguration();if(document.querySelector('[data-template="summary"]')&&t&&t.eec&&t.eec["efficiency-images"]&&t.eec["efficiency-images"].eec_character){[...document.querySelectorAll(".nm-j-configurator-efficiency-class-image")].forEach((e=>{e.src=t.eec["efficiency-images"].eec_character}))}},Y.initialize=function(t){G.eventBus=t,G.$stage=jQuery(G.oDefaults.sStageID),r.c.isConfigurable()&&G.addEvents(),document.cookie.indexOf("myAudi=")>-1&&jQuery("body").addClass("nm-logged-in")};var X=__webpack_require__(955),K=__webpack_require__(600),J=__webpack_require__(386);const Z='<div class="nm-su-result">\n\t{{?!!it.audicode}}\n\t\t{{?!!it.configuration}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t<div class="nm-su-result-audicode clearfix">\n\t\t\t\t{{? SETUPS.get(\'scope.nemo.audicode.externallink\')}}\n\t\t\t\t\t{{var target = "target=\'blank\'";}}\n\t\t\t\t\t{{var link = \'/\' + it.audicode;}}\n\t\t\t\t{{??}}\n\t\t\t\t\t{{var target = "";}}\n\t\t\t\t\t{{var link = "#";}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.success===false}}\n\t\t\t\t\t{{?it[\'vtp-audicode\'] && it[\'other-url\']}}\n\t\t\t\t\t<div class="nm-su-vtp">\n\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-link-cta audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t\t <strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="nm-su-vtp-image"></div>\n\t\t\t\t\t\t<div class="nm-su-vtp-description">\n\t\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars\']}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars-info\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'search-layer.your-car\']}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.vtp-warning\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{??}}\n\t\t\t\t\t\t<strong class="nm-headline-teaser">{{=it.message}}</strong>\n\t\t\t\t\t{{?}}\n\t\t\t\t{{??}}\n\t\t\t\t\t<a href="{{=link}}" class="nm-link-cta nm-j-audicode-accept audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t<strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<img class="nm-su-result-audicode-image" src="{{=it.mediaservice}}{{=it.configuration.images[\'exterior_front\'][\'flyout\']}}"/>\n\t\t\t\t\t<div class="nm-su-result-audicode-description">\n\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.carlineName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.description}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<strong class="nm-headline-teaser nm-su-result-audicode-price">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.price}}\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<a href="{{=link}}" {{=target}} class="nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking">{{=window.i18n[\'search-layer.load-configuration\']}}</a>\n\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.configuration-overwrite-warning\']}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata && (it.configuration.configuration.techdata[\'consumption-combined\'] || it.configuration.configuration.techdata[\'carbon-dioxide-emissions\'] || it.configuration.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t\t\t\t<dl class="nm-su-result-audicode-consumption-entries clearfix audi-copy-s">\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t</div>\n\t\t{{??}}\n\t\t\t<div class="nm-su-result-audicode">\n\t\t\t\t<strong class="nm-headline-teaser">\n\t\t\t\t\t{{=window.i18n[\'search-layer.audicode-loading\']}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-j-audicode-loading nm-loading">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n\t{{?!it.audicode}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t{{?it.search.length}}\n\t\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t\t{{~ it.search :entry }}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<h2 class="nm-su-result-list-item-headline">\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.value.carlineName}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.key}}</span>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<ul class="nm-su-result-list">\n\t\t\t\t\t\t\t\t{{~ entry.value.items :item }}\n\t\t\t\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-j-configurator-name nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-text-list"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-info">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add clearfix">\n\t\t\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-price nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add-btn">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t<div class="nm-su-sitesearch-list">\n\t\t\t\t{{?it.modelSearch.length}}\n\t\t\t\t\t<ul class="nm-su-modelsearch-group">\n\t\t\t\t\t\t{{~it.modelSearch :modelItem}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=modelItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=modelItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.siteMapSearch.length}}\n\t\t\t\t\t<ul class="nm-su-sitemapsearch-group">\n\t\t\t\t\t\t{{~it.siteMapSearch :siteMapItem}}\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tvar itemName = siteMapItem.name;\n\t\t\t\t\t\t\t\tvar replacedName = itemName.replace( \'[rhombus]\', \'<span class="nm-icon-rhombus"></span>\' );\n\t\t\t\t\t\t\t\treplacedName = replacedName.replace( \':plus\', \'<span class="nm-brand-plus">:plus</span>\' );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=siteMapItem.url}}">\n\t\t\t\t\t\t\t\t\t<span>{{=replacedName}}</span>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.footerSearch.length}}\n\t\t\t\t\t<ul class="nm-su-footersearch-group">\n\t\t\t\t\t\t{{~it.footerSearch :footerItem}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=footerItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=footerItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t/*Proposals*/\n\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t{{?it.searchListProposals.length}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<ul class="nm-su-result-list nm-su-proposal-list">\n\t\t\t\t\t\t\t{{~it.searchListProposals :proposalItem}}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="{{=proposalItem.Url}}" x-cq-linkchecker="valid" class="nm-su-proposol-item{{?proposalItem.Type=="Layer"}} nm-layerLink{{?}} audi-j-quick-search-result-tracking">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!proposalItem.ImageUrl}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=proposalItem.ImageUrl}}" alt="{{=proposalItem.Headline}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-proposal-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<strong class="nm-text-list-bold">{{=proposalItem.Headline}}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">{{=proposalItem.Description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class="nm-link-basic" >\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'discover-now\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t{{?}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{?!!it.gsaSearchUrl}}\n\t\t\t<div class="nm-su-gsa">\n\t\t\t\t<a class="nm-j-tracking-search-submit nm-link-basic" href="{{=it.gsaSearchUrl}}">\n\t\t\t\t\t<span>{{=window.i18n[\'search-layer.search-audi-web\']}} &quot;<span class="nm-highlight">{{=it.searchString}}</span>&quot; {{=window.i18n[\'search-layer.search-for\']}}</span>\n\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n</div>',tt=".nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open",et={},nt={__:et};et.mobileBreakpoint=750,et.searchLayerOpen=!1,et.searcListProposalsArr=null,et.audicodeActivated=!1,et.oDefaults={sAcceptAudicodeButton:".nm-j-audicode-accept"},et.loadSearchListProposals=async function(){const t=SETUPS.get("nemo.url.searchproposals");return fetch(t,{credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((t=>{et.searcListProposalsArr=t&&t.Proposals?t.Proposals:[]})).catch((t=>console.log("Error fetching search proposals - server responded with: ",t)))},et.searchResultListProposals=function(t){var e,n=[];return t&&(e=t.toLowerCase(),et.searcListProposalsArr&&et.searcListProposalsArr.length&&jQuery.each(et.searcListProposalsArr,(function(t,i){if(!i.Search)return!0;i.Search.indexOf(e)>-1&&n.push(i)}))),n},et.addEvents=function(){var e="click";et.legacyEventBus.on("keyup",".nm-su .nm-su-input",et.onOpenSearchLayer),et.legacyEventBus.on("paste",".nm-su .nm-su-input",et.onOpenSearchLayerDelayed),et.legacyEventBus.on("click",".nm-su .nm-su-input",et.onOpenSearchLayer),et.legacyEventBus.on("click",".nm-su .nm-su-submit",et.onOpenSearchLayer),et.legacyEventBus.on("click",".nm-su .nm-su-reset",et.resetSearch),et.legacyEventBus.on("submit",".nm-su form",et.formSubmit),et.eventBus.on(t.appEvents.MENUFLYOUT_OPEN,et.clearSearch),et.eventBus.on(t.appEvents.MENUFLYOUT_CLOSE,et.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(e="touchstart"),et.legacyEventBus.on(e,et.onClickOutsideOfSearchLayer)},et.removeEvents=function(){var e="click";et.legacyEventBus.off("keyup",".nm-su .nm-su-input",et.onOpenSearchLayer),et.legacyEventBus.off("paste",".nm-su .nm-su-input",et.onOpenSearchLayerDelayed),et.legacyEventBus.off("click",".nm-su .nm-su-input",et.onOpenSearchLayer),et.legacyEventBus.off("click",".nm-su .nm-su-submit",et.onOpenSearchLayer),et.legacyEventBus.off("click",".nm-su .nm-su-reset",et.resetSearch),et.legacyEventBus.off("submit",".nm-su form",et.formSubmit),et.eventBus.off(t.appEvents.MENUFLYOUT_OPEN,et.clearSearch),et.eventBus.off(t.appEvents.MENUFLYOUT_CLOSE,et.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(e="touchstart"),et.legacyEventBus.off(e,et.onClickOutsideOfSearchLayer)},et.emptySearchResults=function(){jQuery(".nm-su-result-container").empty()},et.resetSearch=function(){jQuery(tt).find("input.nm-su-input").focus(),et.emptySearchResults(),jQuery(tt).find("input.nm-su-input").keyup()},et.clearSearch=function(t){void 0!==t.item&&(jQuery(tt).find("input.nm-su-input").val(""),jQuery(tt).find("input.nm-su-input").focus())},et.formSubmit=function(t){var e,n;return t&&"function"==typeof t.preventDefault&&t.preventDefault(),et.loadedConfiguration?(et.acceptLoadedConfiguration(),!1):(jQuery(".nm-j-audicode-loading").length||(e=et.readSearchStringFromInput()).length<=0||(n=et.buildSearchResultsPageUrl(e))&&et.performSearch(n,e),!1)},et.performSearch=function(t,e){const n=et.generateTrackingPayload(t,e),i=new CustomEvent("CUSTOM_TRACKING_EVENT",n);document.dispatchEvent(i),document.location=t},et.generateTrackingPayload=function(t,e){let n="button";document.activeElement.classList.contains("nm-su-input")&&(n="other");return{detail:{eventInfo:{eventAction:"internal_link",eventName:"main search - submit"},attributes:{componentName:"main search",label:"",currentURL:window.location.href,targetURL:t,clickID:"",elementName:n,value:e,pos:""}}}},et.readSearchStringFromInput=function(){var t=jQuery(".nm-su .nm-su-input").val();return t=t.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},et.onOpenSearchLayerDelayed=function(){var t=this;setTimeout((function(){jQuery(t).keyup()}),50)},et.preventEvent=function(){return!1},et.removeStopWordsFromSearchString=function(t){var e,n=t;return r.c.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+r.c.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),n},et.detectAndStoreAudiCode=function(t,e){return 8===e.length&&-1!==e.search(/[Aa]{1}[a-zA-Z0-9]{7}/)?(t.audicode=e.toUpperCase(),et.legacyEventBus.off("submit",".nm-su form",et.formSubmit),et.legacyEventBus.off("submit",".nm-su form",et.preventEvent),et.legacyEventBus.on("submit",".nm-su form",et.preventEvent)):(et.legacyEventBus.off("submit",".nm-su form",et.preventEvent),et.legacyEventBus.off("submit",".nm-su form",et.formSubmit),et.legacyEventBus.on("submit",".nm-su form",et.formSubmit)),t},et.handleAudiCodeInput=function(t,e){var n=SETUPS.get("nemo.search.audicodestopwords");return e.audicode&&!e.search.length&&n&&-1===n.indexOf(t)?et.triggerAudicodeLoad(e.audicode):e.audicode=null,e.searchString=t||et.readSearchStringFromInput(),e.siteMapSearch=r.c.searchNavigation(t,"siteMap"),e.modelSearch=r.c.searchNavigation(t,"model"),e.footerSearch=r.c.searchNavigation(t,"footer"),e.gsaSearchUrl=et.buildSearchResultsPageUrl(t),e.searchListProposals=et.searchResultListProposals(t),e},et.generateResultList=function(t){var e,n={},i=t;return et.searchLayerOpen=!0,n=et.detectAndStoreAudiCode(n,i),-1!==i.indexOf("|")&&(n.prstring=i),-1!==i.search(/^([a-z0-9]+)=((true)|(false))$/)&&(e=/^([a-z0-9]+)=((true)|(false))$/.exec(i),J.state.triggerModeChange(e[1],e[2])),-1!==i.search(/dpu_extra=(.*)/)&&(e=/^dpu_extra=(.*)/.exec(i),m.E.setDpuExtra(e[1])),i=et.removeStopWordsFromSearchString(i),n.search=SETUPS.get("showEquipmentsWithinSearchLayerContext")&&i&&i.length>1?r.c.search(i,!0):[],n=et.handleAudiCodeInput(i,n)},et.handleSearch=function(e,n,r,a){var o,s=et.generateResultList(r),l=n!==r||"click"===e.type;r.length>1&&l?(o=i.template.render(Z,s),a.empty().html(o),et.eventBus.emit(t.appEvents.SEARCH_OPEN,s)):r.length<=1&&et.closeSearchLayer()},et.handleSmallViewportSubmit=function(t,e){var n,i=e;jQuery(window).width()<et.mobileBreakpoint&&jQuery(t.target).hasClass("nm-su-submit")&&(jQuery(".nm-j-audicode-loading").length?et.audicodeActivated&&et.acceptLoadedConfiguration():(i=et.readSearchStringFromInput(),null!==(n=et.buildSearchResultsPageUrl(i))&&(document.location=n)))},et.isExitConditionFulfilled=function(t){if(et.audicodeActivated){if(13===t.keyCode&&jQuery(".nm-j-audicode-accept").is(":visible"))return et.acceptLoadedConfiguration(),!0}else et.loadedConfiguration=null;return 16===t.keyCode||13===t.keyCode},et.onOpenSearchLayer=function(t){let e,n,i,r;et.isExitConditionFulfilled(t)||(et.searchForm=jQuery(t.target).parents("form"),e=jQuery(this).closest(".nm-su"),n=e.find(".nm-su-result-container"),i=et.readSearchStringFromInput(),r=e.data("current")||"",r!==i&&(et.audicodeActivated=!1,et.loadedConfiguration=null),e.data("current",i),et.handleSearch(t,r,i,n),et.setFlyoutHeight(n),et.handleSmallViewportSubmit(t,i))},et.buildSearchResultsPageUrl=function(t){let e=r.c.getSearchResultsPageUrl();const n=SETUPS.get("nemo.newSiteSearch.enabled")?"?q=":"#search=";return e?(e+=n+encodeURIComponent(t.toLowerCase()),e):null},et.onClickOutsideOfSearchLayer=function(t){let e=t.target;et.searchLayerOpen&&et.isClickedTargetOutsideSearchLayer(e)&&et.isClickedTargetOutsideSearchSearchInputField(e)&&et.isClickedTargetOutsideAnyOtherLayer(e)&&et.closeSearchLayer()},et.isClickedTargetOutsideSearchLayer=function(t){return i.dom.isElementOutsideOfElementWithSelector(t,".nm-su-result-container")},et.isClickedTargetOutsideSearchSearchInputField=function(t){return i.dom.isElementOutsideOfElementWithSelector(t,"div.nm-su")},et.isClickedTargetOutsideAnyOtherLayer=function(t){return i.dom.isElementOutsideOfElementWithSelector(t,".nm-layer-wrapper")},et.closeSearchLayer=function(){setTimeout((function(){et.searchLayerOpen=!1,jQuery(".nm-su-result-container").empty(),et.eventBus.emit(t.appEvents.SEARCH_CLOSE)}),100)},et.triggerAudicodeLoad=async function(t){m.E.loadConfigurationByAudiCode(t).then((function(t){K.V.adoptConfiguration(t).then((()=>{const e=r.c.getCarImages();et.onAudiCodeLoaded({...t,images:e})}))}),(function(e){e.message=e.message||window.i18n["standard-audicode-error"],e.audicode=t,et.showAudiCodeLoadError(e)}))},et.showAudiCodeLoadError=function(t){var e,n=jQuery(".nm-su-result-container");if(t.message=r.c.getErrorMessage(t),"AUDICODE_CONF_NOT_VALID"===t.id&&SETUPS.get("scope.nemo.audicode.not_valid_pdflink")){t.pdflink=SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode;const e="search-layer.audicode-pdf";t.pdflabel=window.i18n&&window.i18n[e]?window.i18n[e]:"PDF anzeigen"}e=i.template.render('<div class="nm-su-result-audicode-wrap">\n\t<div class="nm-su-result-audicode">\n\t\t<h2 class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b">{{=window.i18n[\'search-layer.audicode.error\']}}: </h2>\n\t\t<div class="nm-error">\n\t\t\t<p class="nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator">{{=it.message}}</p>\n\t\t</div>\n\t\t{{?it.pdflink}}\n\t\t\t<a class="audi-link-s audi-link-s--arrow-front" href="{{=it.pdflink}}" target="_blank">\n\t\t\t\t<span class="audi-link-s__text">{{=it.pdflabel}}</span>\n\t\t\t\t<svg class="audi-link-s__icon">\n\t\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/print-small.svg#nm-icon-print-small"}}"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t{{?}}\n\t</div>\n</div>',t),console.error(t),et.legacyEventBus.off("submit",".nm-su form",et.preventEvent),et.legacyEventBus.on("submit",".nm-su form",et.formSubmit),n.empty().html(e),et.setFlyoutHeight(n)},et.handleAudiCodeError=function(t){let e={};t&&(e.message=t),et.audicodeActivated=!1,et.loadedConfiguration=void 0,et.showAudiCodeLoadError(e)},et.onAudiCodeLoaded=function(t){let e,n;et.loadedConfiguration=t,et.loadedConfiguration&&t.audicode&&et.loadedConfiguration.audicode.id?(e=et.loadedConfiguration.audicode.id.toUpperCase(),n=jQuery(".nm-su-input").filter((function(){return jQuery(this).val().toUpperCase()===e})),n&&1===n.length?(et.audicodeActivated=!0,et.showLoadedConfiguration(n)):et.handleAudiCodeError()):et.handleAudiCodeError(window.i18n["standard-audicode-error"],"ERROR loading Audicode")},et.showLoadedConfiguration=function(t){const e=t.closest(".nm-su").find(".nm-su-result-container"),n={search:{},audicode:et.loadedConfiguration.audicode.id,configuration:et.loadedConfiguration,mediaservice:r.c.getRenderUrl(),success:!!et.loadedConfiguration.audicode.success,"vtp-audicode":!!et.loadedConfiguration.audicode["other-url"],"other-url":et.loadedConfiguration.audicode["other-url"]?et.loadedConfiguration.audicode["other-url"]:null,message:et.loadedConfiguration.audicode.message},a=i.template.render(Z,n);e.one("click.accept.loaded.audicode",et.oDefaults.sAcceptAudicodeButton,et.acceptLoadedConfiguration),e.empty().html(a),et.setFlyoutHeight(e)},et.acceptLoadedConfiguration=function(e){let n=et.loadedConfiguration&&et.loadedConfiguration.audicode?et.loadedConfiguration.audicode:null;if(e&&!SETUPS.get("scope.nemo.audicode.externallink")&&"function"==typeof e.preventDefault&&e.preventDefault(),e&&SETUPS.get("scope.nemo.audicode.externallink"))return!0;if(et.eventBus.emit(t.appEvents.SEARCH_LOAD_AUDICODE,{audicode:n}),et.loadedConfiguration.audicode["other-url"]){if(""!==et.loadedConfiguration.audicode["other-url"]){if(SETUPS.get("scope.nemo.audicode.externallink"))return e.target.href=et.loadedConfiguration.audicode["other-url"],!0;window.location=et.loadedConfiguration.audicode["other-url"]}}else m.E.handleExternalConfiguration(et.loadedConfiguration,{startType:"audicode-search"}),t.router.open("page",r.c.getCurrentCarlineUrl());et.closeSearchLayer()},et.setFlyoutHeight=function(t){jQuery(".nm-su").removeClass("noSrcollbars"),t.height()<410&&jQuery(".nm-su").addClass("noSrcollbars");let e=t.height()+150;jQuery(".nm-has-additional-logo").length>0&&(e+=30),jQuery(tt).height(e)},nt.initialize=function(t){et.eventBus=t,et.legacyEventBus=jQuery("body"),et.addEvents(),et.loadSearchListProposals()};var it=__webpack_require__(538);class rt extends HTMLElement{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=t.signal.getEmitter(),J.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(rt.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(t.appEvents.CONFIG_UPDATE,(()=>{this.renderRecommendations()}))}removeEvents(){this.eventBus.off(t.appEvents.CONFIG_UPDATE,(()=>{this.renderRecommendations()}))}renderRecommendations(){const t=this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getRecommendations(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return r.c.getDynamicRecommendations().slice(0,t).map((t=>Object.assign({},t,r.c.getItem(t.id))))}renderTemplate(t){return i.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moduleContainer.innerHTML=t,e?this.classList.remove(rt.selectors.hidden):this.classList.add(rt.selectors.hidden)}}window.customElements.get("audi-configurator-dynamic-recommendation")||window.customElements.define("audi-configurator-dynamic-recommendation",rt);class at extends HTMLElement{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=t.signal.getEmitter(),J.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(at.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(t.appEvents.CONFIG_UPDATE,(()=>{this.renderRecommendations()}))}removeEvents(){this.eventBus.off(t.appEvents.CONFIG_UPDATE,(()=>{this.renderRecommendations()}))}async renderRecommendations(){const t=await this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getQueryParams(){const t=r.c.getContext();let e=r.c.getPrString();const n=this.getItemsToIgnore().join("");return t&&e?(e=r.c.replacePackagesInPrString(e),e=r.c.resolvePackagesInPrString(e),new URLSearchParams({context:t,ids:e,ignore:n})):null}getItemsFromData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return t.map((t=>{const e=r.c.getItem(t.id);return!e||this.shouldBeIgnored(e.status)?null:{...t,...e}})).filter((t=>null!==t)).slice(0,e)}shouldBeIgnored(t){return["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"].includes(t)}getItemsToIgnore(){const t=r.c.getItems();return t?Object.values(t).filter((t=>this.shouldBeIgnored(t.status)&&3===t.id.length)).map((t=>t.id)):[]}getRecommendationsBackendUrl(){const t=SETUPS.get("nemo.recommendationsBackendUrl"),e=this.getQueryParams();return e&&t?t+"?"+e.toString():null}async getRecommendations(){await i.polling.wait(r.c.isInitialized,5e3);const t=await this.fetchRecommendations();return t&&t.configuration&&t.configuration.recommendations?this.getItemsFromData(t.configuration.recommendations):[]}async fetchRecommendations(){const t=this.getRecommendationsBackendUrl();if(!t)return null;return fetch(t,{method:"GET"}).then((t=>t.json())).catch((t=>(console.error("Error:",t),null)))}renderTemplate(t){return i.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moduleContainer.innerHTML=t,e?this.classList.remove(at.selectors.hidden):this.classList.add(at.selectors.hidden)}}window.customElements.get("audi-configurator-dynamic-recommendation-bff")||window.customElements.define("audi-configurator-dynamic-recommendation-bff",at);class ot extends HTMLElement{static get selectors(){return{radioFilter:".nm-module-engine-selection-filter-radio",selectFilter:".nm-module-engine-selection-filter-select",engineEntry:".nm-module-engine-selection-engine",engineSubList:".nm-module-engine-selection-engine-list",trimlineDetailLinks:".nm-module-engine-selection-trimline-layerlink-icon",enginesVisibleCount:".nm-j-enginesVisible",noResults:".nm-module-engine-selection-no-results",resetButton:".nm-module-engine-selection-no-results-reset",notHidden:":not(.nm-hidden)",hidden:"nm-hidden"}}get isInitialFiltersReset(){return"true"===this.dataset.resetFilters}get isConfigurationObserver(){return"false"===this.dataset.resetFilters}connectedCallback(){this.initElements(),this.addEvents(),this.initTrimlineFilter=this.initTrimlineFilter.bind(this),this.isConfigurationObserver&&a.stateRegistry.subscribeToStore(V.a,this.initTrimlineFilter)}disconnectedCallback(){this.removeEvents(),this.isConfigurationObserver&&a.stateRegistry.unsubscribeFromStore(V.a,this.initTrimlineFilter)}addEvents(){this.resetButton.addEventListener("click",(()=>this.resetFilters())),[...this.radioFilters].forEach((t=>{t.addEventListener("change",(()=>this.updateRadioFilterSelection(t)))})),[...this.selectFilters].forEach((t=>{t.addEventListener("change",(()=>this.updateFilters()))}))}removeEvents(){this.resetButton.removeEventListener("click",(()=>this.resetFilters())),[...this.radioFilters].forEach((t=>{t.removeEventListener("change",(()=>this.updateRadioFilterSelection(t)))})),[...this.selectFilters].forEach((t=>{t.removeEventListener("change",(()=>this.updateFilters()))}))}initElements(){this.engineEntries=this.querySelectorAll(ot.selectors.engineEntry),this.selectFilters=this.querySelectorAll(ot.selectors.selectFilter),this.radioFilters=this.querySelectorAll(ot.selectors.radioFilter),this.visibleCounter=this.querySelector(ot.selectors.enginesVisibleCount),this.noResultsBox=this.querySelector(ot.selectors.noResults),this.resetButton=this.querySelector(ot.selectors.resetButton),this.isInitialFiltersReset&&this.resetFilters()}resetFilters(){[...this.selectFilters].forEach((t=>t.value="")),[...this.radioFilters].forEach((t=>t.checked=!1)),this.updateFilters()}initTrimlineFilter(t){const e=t.selectedTrimline;e&&([...this.selectFilters].forEach((t=>{t.value=e})),this.updateFilters())}updateRadioFilterSelection(t){const e=t.getAttribute("name");[...this.querySelectorAll(`${ot.selectors.radioFilter}[name="${e}"]`)].filter((e=>e!==t)).forEach((t=>t.checked=!1)),this.updateFilters()}updateFilters(){const t=this.getRadioFiltersValues().concat(this.getSelectFiltersValues());this.updateTrimlineDetailLink(t),this.filterEngineList(t)}updateTrimlineDetailLink(t){const e=t.filter((t=>"trimline"===t.name));if([...this.querySelectorAll(ot.selectors.trimlineDetailLinks)].forEach((t=>t.classList.add(ot.selectors.hidden))),e.length>0){const t=this.querySelector(`${ot.selectors.trimlineDetailLinks}[data-trimline="${e[0].value}"]`);t&&t.classList.remove(ot.selectors.hidden)}}getRadioFiltersValues(){return[...this.radioFilters].filter((t=>!0===t.checked)).map((t=>this.getFilter(t)))}getSelectFiltersValues(){return[...this.selectFilters].filter((t=>""!==t.value)).map((t=>this.getFilter(t)))}getFilter(t){return{name:t.getAttribute("name"),value:t.value}}filterEngineList(t){const e=t.reduce(((t,e)=>`${t}[data-filter-${e.name}~="${e.value}"]`),ot.selectors.engineEntry);[...this.engineEntries].forEach((t=>t.classList.add(ot.selectors.hidden))),[...this.querySelectorAll(e)].forEach((t=>t.classList.remove(ot.selectors.hidden))),this.hideEmptyContainer(),this.updateVisibleEngineCounter()}hideEmptyContainer(){[...this.querySelectorAll(ot.selectors.engineSubList)].forEach((t=>{0===t.querySelectorAll(ot.selectors.engineEntry+ot.selectors.notHidden).length?t.classList.add(ot.selectors.hidden):t.classList.remove(ot.selectors.hidden)}))}updateVisibleEngineCounter(){const t=this.querySelectorAll(ot.selectors.engineEntry+ot.selectors.notHidden).length;this.visibleCounter.innerHTML=t,0!==t?this.noResultsBox.classList.add(ot.selectors.hidden):this.noResultsBox.classList.remove(ot.selectors.hidden)}}window.customElements.get("audi-configurator-engine-selection")||window.customElements.define("audi-configurator-engine-selection",ot);class st extends HTMLElement{constructor(){super()}connectedCallback(){document.body.classList.add("nm-has-current-consumption")}disconnectedCallback(){document.body.classList.remove("nm-has-current-consumption")}}window.customElements.get("audi-configurator-current-consumption")||window.customElements.define("audi-configurator-current-consumption",st);const lt={},ct={__:lt,initialized:!1};lt.oDefaults={sSelectorLayerOuter:".nm-layer-equipment-search-layer",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorFooter:".nm-equipment-search-footer__inner-wrapper",sSelectorResultsWrap:".nm-equipment-search-result-container",sSelectorSearchInput:".nm-equipment-search-input",sSelectorSearchForm:".nm-equipment-search-form form"},lt.searchListArr=[],lt.getAllItems=function(){var t,e,n,i,a,o=r.c.getFamilies();if(lt.searchListArr=[],o)for(t in o)if(t&&"equipment"===o[t].type&&(i={family:o[t]},e=r.c.getItemsByFamily(t))){for(n in i.items=[],e)n&&(a=r.c.getItem(n),i.items.push(a));lt.searchListArr.push(i)}return lt.searchListArr},lt.handleConfigUpdate=function(){var t,e,n,i,r=lt.getLayer();r&&(lt.updateFooterText(r),(t=lt.getAllItems())&&((e=lt.getSearchString()).length>1?(n=lt.validateSearchString(e),i=lt.parseResults(n.search),lt.populateResultList(i)):lt.populateResultList(t)))},lt.parseResults=function(t){var e,n=[];if(t)for(e in t)e&&t[e].value&&n.push(t[e].value);return n},lt.populateResultList=function(t){var e,n=lt.getResultsWrapContainer();if(t&&n){e=i.template.render('{{?it.length}}\n\t{{~ it :group }}\n\t\t{{? !!group.family}}\n\t\t\t{{? !!group.items}}\n\n\n\t\t\t/*hide groups where all elements have hidden status*/\n\t\t\t{{var $hideGroup = false;}}\n\t\t\t{{~ group.items :itemcheck }}\n\t\t\t\t{{? !!itemcheck.status && itemcheck.status == "00000"}}\n\t\t\t\t\t{{$hideGroup = true;}}\n\t\t\t\t{{?}}\n\t\t\t{{~}}\n\n\t\t\t{{? !$hideGroup}}\n\t\t\t<ul class="nm-equipment-search-result-group">\n\t\t\t\t<li>\n\t\t\t\t\t<div class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=group.family.name}}</div>\n\t\t\t\t\t<ul class="nm-equipment-search-result-list">\n\t\t\t\t\t{{~ group.items :item }}\n\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t<div class="nm-equipment-search-result-item-wrap">\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-image">\n\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-content-wrap">\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-desc">\n\t\t\t\t\t\t\t\t\t\t<p class="nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">\n\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t<p class="nm-equipment-search-result-description nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t{{? SETUPS.get(\'scopes.nemo.SHOW_EU_TYRE_LABEL\') && item.family.includes(\'Raeder_Reifen\')}}\n\t\t\t\t\t\t\t\t\t\t\t{{ var randomId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15); }}\n\t\t\t\t\t\t\t\t\t\t\t<feature-app id="tyre-label-link:equipment-search:{{=randomId}}" base-url="https://fa-tyre-label-link.cdn.prod.arcade.apps.one.audi/v2.1.2/fh/" src="app.js" server-src="app.node.js" config=\'{"optionId": "{{=item.id}}"}\'></feature-app>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-icons">\n\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-add-btn">\n\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t{{?}}\n\t\t{{?}}\n\t{{~}}\n{{?}}',t),n.innerHTML=e;const r=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(r)}},lt.getLayer=function(){return!!document.querySelector(lt.oDefaults.sSelectorLayerOuter)&&document.querySelector(lt.oDefaults.sSelectorLayerOuter)},lt.getResultsWrapContainer=function(){var t=document.querySelector(lt.oDefaults.sSelectorResultsWrap);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return!1},lt.updateFooterText=function(t){let e=!1;const n=SETUPS.get("scope.nemo.hide_financing_rate")||!1;if(t)if(r.c.isConfigurable()&&r.c.getConfiguration()){const i=r.c.getConfiguration();for(const n in i)if(i[n]){"rate"===n&&(e=!0);const r=t.querySelector(lt.oDefaults.sSelectorFooter+" "+lt.oDefaults.sSelectorSnippetText+n);r&&(r.textContent=i[n])}t.querySelector(lt.oDefaults.sSelectorFooter+" > span").classList.remove("nm-hidden"),n||!e?t.querySelector(".nm-equipment-search-rate").classList.add("nm-hidden"):t.querySelector(".nm-equipment-search-rate").classList.remove("nm-hidden")}else t.querySelector(lt.oDefaults.sSelectorFooter+" > span").classList.add("nm-hidden")},lt.getSearchString=function(){var t=document.querySelector(lt.oDefaults.sSelectorSearchInput);return(t?t.value:"").replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"").replace(/:\/\//g,"").replace(/%3c/gi,"").replace(/\\/g,"").replace(/&quot/gi,"").replace(/&#/g,"").replace(/'/g,"").replace(/"/g,"").replace(/`/g,"")},lt.handleSearch=function(t){var e,n,i=lt.getSearchString(),r={},a=document.querySelector(lt.oDefaults.sSelectorSearchForm);if(a){if(n=(a.getAttribute("data-current")||"")!==i||"click"===t.type,t.preventDefault(),t.stopImmediatePropagation(),16===t.keyCode||13===t.keyCode)return;a.setAttribute("data-current",i),i.length>=2&&n?(r=lt.validateSearchString(i),e=lt.parseResults(r.search),lt.populateResultList(e)):0===i.length&&n&&lt.resetSearch()}},lt.searchDebounceHandler=i.dom.debounce(lt.handleSearch,300),lt.validateSearchString=function(t){var e,n=t,i={};return n&&0!==n.length?(-1!==n.indexOf("|")&&(i.prstring=n),r.c.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+r.c.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),i.search=(!!n&&n.length)>1?r.c.search(n,!0):[],i.searchString=n||lt.getSearchString(),i):[]},lt.resetSearch=function(){lt.searchListArr&&lt.searchListArr.length&&lt.populateResultList(lt.searchListArr)},lt.generateLayerHtml=function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer nm-default-layer"></div></div>'},lt.handleLayerLoaded=function(){var t=i.template.render('\n<div class="nm-layer-toolbar">\n\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t</svg>\n\t</div>\n</div>\n<div class="nm-layer-inner nm-equipment-search-layer-wrapper">\n\t<div class="nm-md-equipment-search">\n\t\t<header class="nm-equipment-search-header">\n\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02">{{=window.i18n[\'nemo.ui.equipment-search.headline\']}}</h2>\n\n\t\t\t<div class="nm-equipment-search-form">\n\t\t\t\t<form action="#" method="GET">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<input name="q" class="nm-equipment-search-input" type="text" placeholder=\'{{=window.i18n["search-layer.equipment-search-input-placeholder"]}}\'/>\n\t\t\t\t\t\t<input type="reset" class="nm-equipment-search-reset" value="X" />\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t\t<div class="nm-equipment-search-result-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t\t<footer class="nm-equipment-search-footer">\n\t\t\t<div class="nm-equipment-search-footer__inner-wrapper">\n\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"><span class="nm-j-configurator-text-carlineName"></span> <span class="nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01"></span></span>\n\t\t\t\t<span class="nm-equipment-search-footer__text-price-rate"><span class="nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"></span> <span class="nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate">({{=window.i18n["nemo.ui.equipment-search.rate"]}} <span class="nm-j-configurator-text-rate"></span>)</span></span>\n\t\t\t</div>\n\t\t</footer>\n\t\t<main class="nm-equipment-search-main">\n\t\t</main>\n\t</div>\n</div>',null),e=(document.querySelector(".nm-layer-wrapper-equipment-search-layer"),document.querySelector(lt.oDefaults.sSelectorLayerOuter));e&&(e.innerHTML=t,lt.legacyEventBus.on("keyup",".nm-equipment-search-input",lt.searchDebounceHandler),lt.legacyEventBus.on("paste",".nm-equipment-search-input",lt.handleSearch),lt.legacyEventBus.on("click",".nm-equipment-search-submit",lt.searchDebounceHandler),lt.legacyEventBus.on("click",".nm-equipment-search-reset",lt.resetSearch),lt.legacyEventBus.on("submit",".nm-equipment-search-form form",lt.searchDebounceHandler)),lt.handleConfigUpdate()},lt.addEvents=function(){t.clientLayer.register("equipmentSearchlayer",lt.generateLayerHtml),lt.eventBus.on(t.appEvents.LAYER_LOADED,lt.handleLayerLoaded),lt.eventBus.on(t.appEvents.CONFIG_UPDATE,lt.handleConfigUpdate),ct.initialized=!0},ct.dispose=function(){var e=document.querySelector(".nm-layer-wrapper-equipment-search-layer");console.log("dispose esmd"),lt.legacyEventBus.off("keyup",".nm-equipment-search-input",lt.searchDebounceHandler),lt.legacyEventBus.off("paste",".nm-equipment-search-input",lt.handleSearch),lt.legacyEventBus.off("click",".nm-equipment-search-submit",lt.searchDebounceHandler),lt.legacyEventBus.off("click",".nm-equipment-search-reset",lt.resetSearch),lt.legacyEventBus.off("submit",".nm-equipment-search-form form",lt.searchDebounceHandler),lt.eventBus.off(t.appEvents.LAYER_LOADED,lt.handleLayerLoaded),lt.eventBus.off(t.appEvents.CONFIG_UPDATE,lt.handleConfigUpdate),e&&e.removeEventListener("scroll")},ct.initialize=function(t){lt.eventBus=t,lt.legacyEventBus=jQuery("body"),lt.addEvents()};const ut={},dt={__:ut};ut.defaults={expertContainerSelector:".nm-mode-expert",selectorDelegateClick:"nm-toggle",toggleClass:"nm-toggle-open",optionsListHeadSelector:".nm-options-list-head, .nm-module-options-container-headline",optionsGroupListWrapperSelector:".nm-mode-expert-group-list-wrap",optionsGroupWrap:".nm-mode-expert-group-wrap",statusClassPrefix:"nm-j-configurator-status_",listClosedClass:"nm-closed",configurationItemSelector:'[class*="nm-j-configurator-status_"]',hiddenClass:"nm-hidden",counterWrapperSelector:".nm-module-options-container-selected-items",counterSelector:".nm-selected-items"},ut.handleToggleClick=function(e){const n=i.dom.closest(e.target,"."+ut.defaults.selectorDelegateClick),r=i.dom.closest(n,ut.defaults.optionsGroupWrap),a=i.dom.getElementsArray(ut.defaults.optionsGroupListWrapperSelector,r);n.classList.contains(ut.defaults.toggleClass)?n.classList.remove(ut.defaults.toggleClass):n.classList.add(ut.defaults.toggleClass),a.forEach(ut.toggleGroupList),ut.eventBus.emit(t.appEvents.CONTENT_RESIZE)},ut.toggleGroupList=function(t){t.classList.contains(ut.defaults.listClosedClass)?t.classList.remove(ut.defaults.listClosedClass):t.classList.add(ut.defaults.listClosedClass)},ut.getStatusCodeForItem=function(t){return t.className.indexOf(ut.defaults.statusClassPrefix)<0?"":t.className.split(ut.defaults.statusClassPrefix)[1].split(" ")[0]},ut.isItemSelected=function(t){const e=ut.getStatusCodeForItem(t);return/[0,1]{3}1[0,1]/.test(e)},ut.isItemSelectedStandard=function(t){const e=ut.getStatusCodeForItem(t);return/1001[0,1]/.test(e)},ut.isItemSelectedAndNotStandard=function(t){const e=ut.isItemSelected(t),n=ut.isItemSelectedStandard(t);return e&&!n},ut.getSelectedItemsCountFromList=function(t){return i.dom.getElementsArray(ut.defaults.configurationItemSelector,t).reduce(((t,e)=>ut.isItemSelectedAndNotStandard(e)?t+1:t),0)},ut.updateListCounter=function(t){const e=i.dom.getElement(ut.defaults.counterSelector,t);if(!i.dom.isElement(e))return;const n=i.dom.closest(t,ut.defaults.optionsGroupWrap),r=i.dom.closest(e,ut.defaults.counterWrapperSelector),a=ut.getSelectedItemsCountFromList(n);e.textContent=a,ut.setTitleForCounter(r,e,a),ut.toggleCounterVisibility(r,a)},ut.toggleCounterVisibility=function(t,e){e>0?t.classList.remove(ut.defaults.hiddenClass):t.classList.add(ut.defaults.hiddenClass)},ut.setTitleForCounter=function(t,e,n){let i="";n>0&&(i=n+" ",i+=1===n?e.getAttribute("data-text-selected-single"):e.getAttribute("data-text-selected-multi")),t.setAttribute("title",i)},ut.updateLists=function(){const t=i.dom.getElementsArray(ut.defaults.expertContainerSelector),e=i.dom.getElementsArray(ut.defaults.optionsListHeadSelector);t.length<1||e.forEach(ut.updateListCounter)},ut.addEvents=function(){ut.domEventDelegate.on("click",ut.defaults.optionsListHeadSelector,ut.handleToggleClick),ut.eventBus.on(t.appEvents.DOM_UPDATED,ut.updateLists),ut.eventBus.on(t.appEvents.PAGE_LOADED,ut.updateLists)},dt.initialize=function(t){ut.eventBus=t,ut.domEventDelegate=i.dom.getEventDelegate("body"),ut.addEvents(),ut.updateLists()};const mt={},gt={},ft={getTemplateFuncAsync:function(){var e,n,i=this.templateKey||null,r=function(){return""};if(null===i)return Promise.resolve(r);if(e=ft.getTemplateId(this,i),void 0===gt[e]){if(t.dynamicDot.requiresDynamicDot())return new Promise(((n,i)=>{t.dynamicDot.getTemplateFromBackend(e).then((t=>{gt[e]=q.doT.template(t),n(gt[e])})).catch((t=>{console.warn("Error reading dot-template with id: "+e,t),n(r)}))}));if(!(n=document.querySelector("#"+e))||!n.innerHTML)return Promise.resolve(r);gt[e]=q.doT.template(n.innerHTML.trim())}return Promise.resolve(gt[e])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",a="-tpl",o=t.form||t,s=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=ft.sanitizeId(t.id),void 0!==(i=mt[o.id+"-"+n]))return i;if(void 0!==s[i=r+o.id+"-"+o.pageId+"-"+n+a])return i;if(void 0!==s[i=r+o.id+"-"+n+a])return i}return"Form"===t.formConstructorName&&void 0!==(i=mt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+a,void 0!==mt[o.id+"-"+e]||void 0!==s[i=r+o.id+"-"+o.pageId+"-"+e+a]||void 0!==s[i=r+o.id+"-"+e+a]?i:i=r+e+a)},FormField:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormField",this.domId=ft.sanitizeId(this.id),void 0===this.name&&(this.name=this.id),this.form=e,this.templateKey=this.type,this}};ft.FormField.prototype.initializeTemplatesAsync=function(){return new Promise((t=>{this.getTemplateFuncAsync().then((e=>{this.getString=e,this.registerChange(),t(e)}))}))},ft.FormField.prototype.getTemplateFuncAsync=ft.getTemplateFuncAsync,ft.FormField.prototype.registerChange=function(){var t,e,n=this,i=this.type.toLowerCase();if("radio"===i){t="#"+this.form.id,e='input[type="radio"][name="'+this.domId+'"]';const i='input[type="hidden"][name="'+this.domId+'"]';jQuery(t).on("change",e,(function(){jQuery(i).remove(),(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))}else"select"===i||"checkbox"===i?(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("change",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))):(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("blur",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])})))},ft.FormField.prototype.toString=function(){return this.getString(this)};const pt=ft.FormField,ht={},vt={},yt={getTemplateFuncAsync:function(){var e,n,i=this.templateKey||null,r=function(){return""};if(null===i)return Promise.resolve(r);if(e=yt.getTemplateId(this,i),void 0===vt[e]){if(t.dynamicDot.requiresDynamicDot())return new Promise(((n,i)=>{t.dynamicDot.getTemplateFromBackend(e).then((t=>{vt[e]=q.doT.template(t),n(vt[e])})).catch((t=>{console.warn("Error reading dot-template with id: "+e,t),n(r)}))}));if(!(n=document.querySelector("#"+e))||!n.innerHTML)return Promise.resolve(r);vt[e]=q.doT.template(n.innerHTML.trim())}return Promise.resolve(vt[e])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){let n,i,r="nm-id-form-",a="-tpl",o=t.form||t,s=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=yt.sanitizeId(t.id),i=ht[o.id+"-"+n],void 0!==i)return i;if(i=r+o.id+"-"+o.pageId+"-"+n+a,void 0!==s[i])return i;if(i=r+o.id+"-"+n+a,void 0!==s[i])return i}return"Form"===t.formConstructorName&&(i=ht[o.id+"-"+o.pageId],void 0!==i)?i:(i=r+o.id+"-"+e+a,void 0!==ht[o.id+"-"+e]?i:(i=r+o.id+"-"+o.pageId+"-"+e+a,void 0!==s[i]?i:(i=r+o.id+"-"+e+a,void 0!==s[i]||(i=r+e+a),i)))}};yt.FormItem=function(t,e){return function(t,e){if(!t||!e)return!1;let n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,this),this.formConstructorName="FormItem",this.domId=yt.sanitizeId(this.id),this.dataFields=t&&"fields"in t?t.fields:[],this.form=e,this.templateKey="item",this.fields=[],this.namedFields={},this},yt.FormItem.prototype.initializeTemplatesAndFieldsAsync=function(){return new Promise((t=>{this.getTemplateFuncAsync().then((e=>{this.getString=e,this.processFieldsAsync().then((e=>{t(e)}))}))}))},yt.FormItem.prototype.getTemplateFuncAsync=yt.getTemplateFuncAsync,yt.FormItem.prototype.processFieldsAsync=function(){return new Promise((t=>{var e,n,i;if(void 0!==this.dataFields){1===this.dataFields.length&&void 0===this.dataFields[0].label&&(this.dataFields[0].label=this.name,delete this.name,this.info&&(this.dataFields[0].info=this.info,delete this.info));const r=[];for(e=0,n=this.dataFields.length;e<n;e++)i=new pt(this.dataFields[e],this.form),r.push(i.initializeTemplatesAsync()),this.fields.push(i),this.namedFields[i.id]=i;Promise.allSettled(r).then((()=>{t(this.fields)}))}else t(this.fields)}))},yt.FormItem.prototype.toString=function(){return this.getString(this)};const St=yt.FormItem,Ct={},Et={},wt={getTemplateFuncAsync:function(){let e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);let r=wt.getTemplateId(this,n);if(void 0===Et[r]){if(t.dynamicDot.requiresDynamicDot())return new Promise(((e,n)=>{t.dynamicDot.getTemplateFromBackend(r).then((t=>{Et[r]=q.doT.template(t),e(Et[r])})).catch((t=>{console.error("Error reading dot-template with id: "+r,t),e(i)}))}));if(e=document.querySelector("#"+r),!e||!e.innerHTML)return Promise.resolve(i);Et[r]=q.doT.template(e.innerHTML.trim())}return Promise.resolve(Et[r])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",a="-tpl",o=t.form||t,s=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=wt.sanitizeId(t.id),void 0!==(i=Ct[o.id+"-"+n]))return i;if(void 0!==s[i=r+o.id+"-"+o.pageId+"-"+n+a])return i;if(void 0!==s[i=r+o.id+"-"+n+a])return i}return"Form"===t.formConstructorName&&void 0!==(i=Ct[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+a,void 0!==Ct[o.id+"-"+e]||void 0!==s[i=r+o.id+"-"+o.pageId+"-"+e+a]||void 0!==s[i=r+o.id+"-"+e+a]?i:i=r+e+a)},FormGroup:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormGroup",this.form=e,this.domId=wt.sanitizeId(this.id),this.templateKey="group",this.dataItems=t.items,this.items=[],this.namedItems={},this}};wt.FormGroup.prototype.initializeGroupAsync=function(){return new Promise((t=>{this.processItemsAsync().then((e=>{this.getTemplateFuncAsync().then((e=>{this.getString=e,t(this.formGroup)}))}))}))},wt.FormGroup.prototype.getTemplateFuncAsync=wt.getTemplateFuncAsync,wt.FormGroup.prototype.processItemsAsync=function(){return new Promise((t=>{var e,n,i;if(this.dataItems){let r=[];for(e=0,n=this.dataItems.length;e<n;e++)i=new St(this.dataItems[e],this.form),r.push(i.initializeTemplatesAndFieldsAsync()),this.items.push(i),this.namedItems[i.id]=i;Promise.allSettled(r).then((()=>{t(this.items)}))}else t(this.items)}))},wt.FormGroup.prototype.toString=function(){return this.getString(this)};const bt=wt.FormGroup,_t={};let Dt,At={},kt={},Lt={},It={};const Tt={},xt={__:Tt};Tt.initFormAsync=function(t){return new Promise(((e,n)=>{const i=t.attr("id"),r=Tt.getUrl("start",i);void 0!==It[i]?(_t[i]=new Tt.Form(It[i],Lt),_t[i].initializeFormAsync().then((()=>{_t[i].el.appendTo(t),e(_t[i])}))):fetch(r,{credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((n=>{const r=xt.responseToObj(n);!1===r?(Tt.displayStandardError(i),e(i)):r.form?(_t[i]=new Tt.Form(r,Lt),_t[i].initializeFormAsync().then((()=>{_t[i].el.appendTo(t),e(_t[i]),r.header&&r.header.subsession&&m.E.setSubsessionID(r.header.subsession)}))):(Tt.displayStandardError(i),e(i))})).catch((t=>{Tt.displayStandardError(i),n(t)}))}))},Tt.bindEnablers=function(){jQuery("body .nm-form input[data-enables]").on("change",(function(t){var e,n,i,r,a;for(r=(e=(n=jQuery(t.target)).attr("data-enables").split(";")).length;r>-1;r--)e[r]=Tt.sanitizeId(e[r]);for(i="off"===(i=n.attr("data-active")||"off")?"on":"off",n.attr("data-active",i),r=e.length;r>-1;r--)e[r]&&(a="off"===i&&"disabled",jQuery("#nm-id-form-field-"+e[r]+" input").attr("disabled",a))}))},Tt.getCustomTemplateIds=function(e){var n={};return t.dynamicDot.requiresDynamicDot()?(n["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,n["nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl"]=!0,n["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,n["nm-id-form-tdrdealerreq-vvega-probe-request-page-Item-VehicleConfigurationInterest-VehicleCarlineInterest-tpl"]=!0):jQuery(e).each((function(){n[jQuery(this).attr("id")]=!0})),n},Tt.blockForm=function(t){var e=jQuery("#"+t.id);e.find(".nm-form-shader").height(e.height()+"px").show()},Tt.handleFormAsync=function(e,n){return new Promise((i=>{var r={};let a=!0;!1===(e=xt.responseToObj(e))?Tt.displayStandardError(n.id):e.form?(jQuery("#"+n.id).off("blur, click, change"),jQuery("#"+n.id+" button[data-button-action]").off("click"),a=!1,_t[n.id]=new Tt.Form(e,Lt),_t[n.id].initializeFormAsync().then((()=>{jQuery("#"+e.form.id).html("").append(_t[n.id].el),Tt.scrollToTop(n.id),i(_t[n.id])}))):e.success?(r.formHeadline=n.data.form.name,r.message=e.message,jQuery("#"+n.id).html(n.getSuccessString(r)),jQuery("#"+n.id).attr("data-form-is-finished",1),Tt.eventBus.emit(t.appEvents.FORM_FINISHED,{id:n.id}),e.configuration&&m.E.handleExternalConfiguration(e,{startType:null}),delete _t[n.id]):(Tt.displayStandardError(n.id),delete _t[n.id]),a&&(Tt.scrollToTop(n.id),i(n.id))}))},Tt.scrollToTop=function(t){jQuery("#"+t).closest(".nm-layer-wrapper").length?jQuery(".nm-layer-wrapper").scrollTop(0):jQuery("body").scrollTop(0)},Tt.displayStandardError=function(t){var e=jQuery("#"+t),n=e.find(".nm-form-shader"),i=e.find(".nm-form-standard-error");n.hide(),e.html(i.html())},Tt.getUrl=function(t,e){var n=r.c.getPrString(),i=r.c.getContext(),a=r.c.getSubsessionID(),o=!!r.c.getCarline(),s=[];return i&&s.push("context="+i),a&&s.push("subsession="+a),("tdrdealerreq"===e&&o&&n||"tdrdealerreq"!==e&&n)&&s.push("ids="+encodeURIComponent(n)),s.push("action="+encodeURIComponent(t)),s.push("id="+encodeURIComponent(e)),Dt+"?"+s.join("&")},Tt.parseData=function(t){var e;try{e=JSON.parse(t)}catch(t){return!1}return e},Tt.getTemplateFuncAsync=function(){let e,n,i=this.templateKey||null,r=function(){return""};if(null===i)return Promise.resolve(r);if(e=Tt.getTemplateId(this,i),void 0===kt[e]){if(t.dynamicDot.requiresDynamicDot())return new Promise(((n,i)=>{t.dynamicDot.getTemplateFromBackend(e).then((t=>{kt[e]=q.doT.template(t),n(kt[e])})).catch((t=>{console.error("Error reading dot-template with id: "+e,t),i(t)}))}));if(n=document.querySelector("#"+e),!n||!n.innerHTML)return Promise.resolve(r);kt[e]=q.doT.template(n.innerHTML.trim())}return Promise.resolve(kt[e])},Tt.sanitizeId=function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},Tt.getTemplateId=function(t,e){var n,i,r="nm-id-form-",a="-tpl",o=t.form||t,s=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=Tt.sanitizeId(t.id),void 0!==(i=At[o.id+"-"+n]))return i;if(void 0!==s[i=r+o.id+"-"+o.pageId+"-"+n+a])return i;if(void 0!==s[i=r+o.id+"-"+n+a])return i}return"Form"===t.formConstructorName&&void 0!==(i=At[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+a,void 0!==At[o.id+"-"+e]||void 0!==s[i=r+o.id+"-"+o.pageId+"-"+e+a]||void 0!==s[i=r+o.id+"-"+e+a]?i:i=r+e+a)},Tt.Form=function(t,e){return this.formConstructorName="Form",this.data=t,this.id=t.form?t.form.id:void 0,this.domId=Tt.sanitizeId(this.id),this.customTemplateIds=e||{},this.templateKey="form",this.groups=[],this.fields=[],this.pageId=this.getPageId(),this.processSteps=this.getProcessSteps(),this.processStepName=this.getStepHeadline(),this},Tt.Form.prototype.initializeFormAsync=function(){return new Promise(((t,e)=>{const n=[];n.push(this.processGroupsAsync()),n.push(this.getTemplateFuncAsync()),n.push(this.getSuccessTemplateFuncAsync()),Promise.all(n).then((e=>{const[n,i,r]=e;this.getString=i,this.getSuccessString=r,this.load(),t()})).catch((t=>{console.error("Error initializing form",t),e(t)}))}))},Tt.Form.prototype.getPageId=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].id;return null},Tt.Form.prototype.getStepHeadline=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].name;return null},Tt.Form.prototype.getProcessSteps=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return{step:t+1,maxSteps:this.data.pages.length};return null},Tt.Form.prototype.getSuccessTemplateFuncAsync=function(){var e,n="nm-id-form-success-tpl";if(void 0===kt[n]){if(t.dynamicDot.requiresDynamicDot())return new Promise(((e,i)=>{t.dynamicDot.getTemplateFromBackend(n).then((t=>{kt[n]=q.doT.template(t),e(kt[n])})).catch((t=>{console.error("Error reading dot-template with id: "+n,t),i(t)}))}));if(!(e=document.querySelector("#"+n))||!e.innerHTML)return Promise.resolve((function(){return""}));kt[n]=q.doT.template(e.innerHTML.trim())}return Promise.resolve(kt[n])},Tt.Form.prototype.getTemplateFuncAsync=Tt.getTemplateFuncAsync,Tt.Form.prototype.processGroupsAsync=function(){var t,e,n;return new Promise((i=>{if(this.data.form&&this.data.form.groups){const r=[];for(t=0,e=this.data.form.groups.length;t<e;t++)n=new bt(this.data.form.groups[t],this),r.push(n.initializeGroupAsync()),this.groups.push(n);Promise.allSettled(r).then((()=>{i(this.groups)}))}else i(this.groups)}))},Tt.Form.prototype.load=function(){var e,n;n={formHeadline:this.data.form.name,pageDisclaimers:this.data.form.disclaimers,pageHeadline:this.data.form.headline,pageDescription:this.data.form.description,pageError:this.data.form.error,groups:this.groups,pages:this.data.pages,id:this.data.form.id,actions:this.data.form.actions},void 0===(e=jQuery("#"+this.data.form.id)).attr("data-form-is-first-view")?e.attr("data-form-is-first-view",1):e.attr("data-form-is-first-view",0),void 0!==this.data.form.footnote&&(n.footnote=this.data.form.footnote),this.processSteps&&(e.attr("data-form-process-step",this.processSteps.step),e.attr("data-form-process-max",this.processSteps.maxSteps)),this.processStepName&&e.attr("data-form-process-name",this.processStepName),this.el=jQuery(this.getString(n));let i=this;window.setTimeout((function(){i.bindActions(),i.bindActionLinks(),i.preventSubmit(),Tt.eventBus.emit(t.appEvents.FORM_LOADED,{id:i.id,form:i})}),100)},Tt.Form.prototype.preventSubmit=function(){jQuery("#"+this.id+" form").on("submit",(function(t){return t.preventDefault(),!1}))},Tt.Form.prototype.bindActions=function(){var t=this;jQuery("#"+this.id+" button[data-button-action]").on("click",(function(e){var n,i,r;e.preventDefault(),i=(n=jQuery(e.target)).attr("data-button-action"),r=n.attr("data-form-id"),"cancel"===i&&n.addClass("nm-button-cancel"),r===t.id&&i&&(Tt.blockForm(t),t.serializeAndSend(i,t.id))}))},Tt.Form.prototype.bindActionLinks=function(){var t=this;jQuery("#"+this.id+" .nm-form-action-link").on("click",".nm-form-action-link",(function(e){e.preventDefault(),t.serializeAndSend(jQuery(this).attr("data-form-action"),t.id)}))},Tt.Form.prototype.disableButtons=function(){var t,e,n;if(this.data&&this.data.form&&this.data.form.actions)for(t=0,e=this.data.form.actions.length;t<e;t++)!0===(n=this.data.form.actions[t]).disable_on_change&&jQuery('button[data-button-action="'+n.action+'"]').hide()},Tt.Form.prototype.changed=function(){this.disableButtons()},Tt.Form.prototype.autoSubmit=function(t){var e=t||"submit";Tt.blockForm(this),this.serializeAndSend(e,this.id)},Tt.Form.prototype.serializeAndSend=function(t,e){var n,i,r=jQuery("#"+e+" form"),a=Tt.getUrl(t,e),o=r.serializeArray(),s=o.length,l=[],c=this,u=[];for(i=0;i<s;i+=1)-1!==o[i].name.indexOf("DateTime-")?(void 0===u[n=o[i].name.slice(9,o[i].name.length-2)]&&(u[n]=[]),u[n].push(o[i].value)):l.push(o[i]);for(var d in u)u.hasOwnProperty(d)&&"0"!==u[n][0]&&"0"!==u[n][1]&&"0"!==u[n][2]&&(n=u[n].reverse().join("-"),l.push({name:d,value:n}));const m=l.reduce(((t,e,n)=>t+(n>0?"&":"")+e.name+"="+e.value),"");return fetch(a,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:m,credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((t=>Tt.handleFormAsync(t,c))).catch((()=>{Tt.displayStandardError(c)}))},xt.responseToObj=function(t){if(!t)return!1;if("object"==typeof t)return t;try{return JSON.parse(t)}catch(t){return!1}},xt.layerLoadHandler=function(t){jQuery(t).find(".nm-form").each((function(){Tt.initFormAsync(jQuery(this))}))},xt.processNavHandler=function(t){var e,n=jQuery(t.target);t.preventDefault(),"true"===n.attr("data-selectable")&&(e=n.parents(".nm-form").attr("id"),xt.getForm(e).serializeAndSend(n.attr("data-action"),e))},xt.addInitData=function(t,e){It[t]=e},xt.getForm=function(t){return _t[t]},Tt.initialize=function(){var e;Dt=SETUPS.get("nemo.url.formapi"),At=SETUPS.get("nemo.form.templatemap"),Lt=Tt.getCustomTemplateIds(".nm-custom-form-tpl"),Tt.eventBus.on(t.appEvents.LAYER_LOADED,(function(t){t&&t.element&&xt.layerLoadHandler(t.element)})),Tt.eventBus.on(t.appEvents.FORM_LOADED,(function(){Tt.addHelpTextToPrivateLeasing()})),jQuery("body .nm-process-navigation a").on("click",xt.processNavHandler),Tt.bindEnablers(),(e=jQuery(".nm-layer-wrapper")).length&&xt.layerLoadHandler(e)},Tt.addHelpTextToPrivateLeasing=function(){if(-1===SETUPS.get("nemo.env.scopes").indexOf("SHOW_PRIVATE_LEASING_HELP_TEXT"))return;const t=r.c.getConfiguration(),e=SETUPS.get("nemo.locale.country"),n=document.querySelector('div.nm-form#fdproxy form div.nm-input-wrap div.nm-input-label-wrapper input[value="PL"]'),i="ELECTRICAL"===t["wltp-status"]?.fuelTypes[0];if("DE"===e&&n&&i){const t=window.i18n["nemo.ui.form.online.leasing.help.text"],e=document.createElement("span");e.textContent=t,n.parentNode.appendChild(e)}},xt.initialize=function(t){Tt.eventBus=t,Tt.legacyEventBus=jQuery("body"),Tt.initialize()};const Pt={},Ot={__:Pt};Pt.instance=!1,Pt.oDefaults={sDropdownSelectionClass:"nm-at-select-default-val"},Pt.addEvents=function(){Pt.eventBus.on(t.appEvents.PAGE_LOADED,Pt.onPageLoaded),Pt.eventBus.on(t.appEvents.FORM_LOADED,Pt.onFormLoaded),Pt.handleSelectChanges()},Pt.onPageLoaded=function(){Pt.handleSelectChanges()},Pt.onFormLoaded=function(){Pt.handleSelectChanges()},Pt.handleSelectChanges=function(t){var e=jQuery("select");jQuery.each(e,(function(){var t=jQuery(this);Pt.legacyEventBus.on("change.select",Pt.updateSelect),Pt.setSelectState(t)}))},Pt.updateSelect=function(t){var e=jQuery(t.target);Pt.setSelectState(e)},Pt.setSelectState=function(t){var e,n,i,r=t.find("option:selected");jQuery.each(r,(function(){n=jQuery(this),e=n.val(),i=void 0!==n.attr("data-is-default"),n.parent().toggleClass(Pt.oDefaults.sDropdownSelectionClass,e&&"*"===e||i)}))},Pt.initialize=function(){Pt.addEvents(),Pt.handleSelectChanges()},Ot.initialize=function(t){Pt.eventBus=t,Pt.legacyEventBus=jQuery("body"),Pt.initialize()};const jt=".nm-j-simpleform",Rt={},Bt={__:Rt};Rt.scanSource=function(t){[...t.querySelectorAll(jt)].forEach((t=>Rt.initForm(t)))},Rt.initForm=function(t){const e=t.getAttribute("id"),n=t.querySelector("form");n.addEventListener("submit",(t=>{t.preventDefault(),Rt.onSubmit(e,n)}))},Rt.onSubmit=function(t,e){let n=Rt.serializeForm(e);if("audicode-input"===t){n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)&&(n="audicode="+n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase())}Rt.call(t,n)},Rt.serializeForm=function(t){return[...new FormData(t)].reduce(((t,e)=>(t?t+"&":"")+e[0]+"="+e[1]),"")},Rt.getUrl=function(t){const e=[],n=r.c.getContext();n&&e.push("context="+n);const i=r.c.getSubsessionID();i&&e.push("subsession="+i);const a=r.c.getPrString();a&&e.push("ids="+encodeURIComponent(a));let o=SETUPS.get("nemo.url.form."+t);return o+=-1===o.indexOf("?")?"?":"&",o+e.join("&")},Rt.call=async function(t,e){const n=document.getElementById(t);n.classList.add("nm-j-simpleform-loading"),n.classList.remove("nm-j-simpleform-error","nm-j-simpleform-success");const i=n.getAttribute("data-dpu-form-id")||t,r=Rt.getUrl(i),a=r+(r.indexOf("?")<0?"?":"&")+e;return await fetch(a,{credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((e=>{Rt.handleSuccess(e,t,i)})).catch((t=>console.log("Error fetching simple-form request - server responded with: ",t)))},Rt.handleSuccess=function(e,n,i){const a=document.getElementById(n);let o=xt.responseToObj(e);if(!o||!o[i])return Rt.handleFail(o,n,i);2===Math.floor(o[i].statuscode/100)?([...a.querySelectorAll(".nm-error")].forEach((t=>t.innerHTML="")),o[i].message&&[...a.querySelectorAll(".nm-success")].forEach((t=>t.innerHTML=o[i].message)),a.classList.remove("nm-j-simpleform-error"),a.classList.add("nm-j-simpleform-success"),Rt.eventBus.trigger(t.appEvents.FORM_FINISHED,{id:n,response:o}),a.setAttribute("data-form-is-finished","1"),"audicode-input"===n&&(t.router.open("page",r.c.getCurrentCarlineUrl()),document.querySelector(".nm-j-layer-close-button").click())):(Rt.handleFail(o,n,i),Rt.eventBus.emit(t.appEvents.FORM_ERROR,{id:n,response:o})),a.classList.remove("nm-j-simpleform-loading")},Rt.handleFail=function(t,e,n){const i=document.getElementById(e),r=Rt.isDefaultErrorWithDpuMessage(t,e,n)?t[n].message:Rt.getFormErrorMessage(t),a=i.querySelectorAll(".nm-error");a&&[...a].forEach((t=>t.innerHTML=r)),i.classList.add("nm-j-simpleform-error"),i.classList.remove("nm-j-simpleform-success","nm-j-simpleform-loading"),console.log("form/simple.handleFail",r)},Rt.isDefaultErrorWithDpuMessage=function(t,e,n){return!!(t&&t.header.error&&"DEFAULT"===t.header.error.id&&n&&t[n]&&t[n].message)},Rt.getFormErrorMessage=function(t){return t.login&&!t.login.success?r.c.getErrorMessage("LOGIN_FAILED"):r.c.getErrorMessage(t.header.error)},Rt.addEvents=function(){Rt.eventBus.on(t.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Rt.scanSource(t.element)})),Rt.scanSource(document)},Bt.initialize=function(t){Rt.eventBus=t,Rt.addEvents()};const Mt={},Ft={__:Mt};Mt.addEvents=function(){Mt.eventBus.on(t.appEvents.VERSION_LOAD_COMPLETE,Mt.setHiddenItemsFromVersionResponse),Mt.eventBus.on(t.appEvents.PAGE_LOADED,Mt.setHiddenItemsFromVersionResponse),Mt.eventBus.on(t.appEvents.LAYER_LOADED,Mt.setHiddenItemsFromVersionResponse)},Mt.setHiddenItemsFromVersionResponse=function(t){var e,n,a=t&&t.domElement?t.domElement:document,o=i.dom.getElementsArray(".nm-j-configurator-item",a),s=r.c.getHiddenItemIDsFromVersion();if(s&&null!==s)for(e=0;e<s.length;e++)for(n=0;n<o.length;n++)s[e]===o[n].getAttribute("data-configurator-id")&&o[n].setAttribute("data-visibility","hidden")},Ft.initialize=function(t){Mt.eventBus=t,Mt.addEvents()};const Ut={},zt={__:Ut};Ut.oDefaults={sSelectorDelegateClick:".nm-infobox",sSelectorInfoboxContainer:".nm-infobox-container",sToggleClass:"nm-infobox-show"},Ut.clickedElement=null,Ut.handleOutsideClick=function(t){var e=i.dom.getElement(Ut.oDefaults.sSelectorInfoboxContainer,Ut.clickedElement);e.classList.contains(Ut.oDefaults.sToggleClass)&&i.dom.isElementOutsideOfElementWithSelector(t.target,Ut.oDefaults.sSelectorDelegateClick)&&(Ut.domEventDelegate.off("click",Ut.handleOutsideClick),Ut.closeInfoBox(e),Ut.clickedElement=null)},Ut.handleToggleClick=function(){var t=i.dom.getElement(Ut.oDefaults.sSelectorInfoboxContainer,this);Ut.clickedElement=this,t.classList.contains(Ut.oDefaults.sToggleClass)?Ut.closeInfoBox(t):(t.classList.add(Ut.oDefaults.sToggleClass),Ut.registerOutsideClickEvent())},Ut.registerOutsideClickEvent=function(){Ut.domEventDelegate.on("click","*",Ut.handleOutsideClick)},Ut.closeInfoBox=function(t){t.classList.remove(Ut.oDefaults.sToggleClass)},Ut.addEvents=function(){Ut.domEventDelegate.on("click",Ut.oDefaults.sSelectorDelegateClick,Ut.handleToggleClick)},Ut.initialize=function(){Ut.init||Ut.addEvents(),Ut.init=!0},zt.initialize=function(t){Ut.eventBus=t,Ut.domEventDelegate=i.dom.getEventDelegate("body"),Ut.initialize()};const Vt={},Nt={__:Vt};Vt.oDefaults={sAttributeInitialCaption:"data-initialcaption",sAttributePrNumber:"data-partprnumber",sClassAozActive:"nm-aoz-active",sClassAozButton:"nm-aoz-btn",sClassAozDescription:"nm-aoz-description",sClassAozTyreLabel:"nm-aoz-tyre-label",sClassAozHintText:"nm-aoz-hinttext",sClassAozInvisible:"nm-aoz-invisible",sClassAozItem:"nm-aoz-item",sClassAozModule:"nm-md-aoz",sClassAozPrice:"nm-aoz-price",sSelectorAozButton:".nm-aoz-btn a",sSelectorAozItem:".nm-aoz-item",selectorModul:".nm-md-aoz",selectorStripe:".nm-aoz-stripe",classShowPrevArrow:"nm-j-aoz-show-prev-arrow",classShowNextArrow:"nm-j-aoz-show-next-arrow",classPrevButton:"nm-aoz-stripe-prev",selectorArrowButton:".nm-aoz-stripe-navigation-item",selectorPrevButton:".nm-aoz-stripe-prev",selectorNextButton:".nm-aoz-stripe-next",selectorStripeContainer:".nm-aoz-stripe-container",selectorStripeWrap:".nm-aoz-stripe-wrap",selectorStripeList:".nm-aoz-stripe > ul",selectorStripeItem:".nm-aoz-item"},Vt.scrollDuration=500,Vt.addEvents=function(){Vt.eventBus.on(t.appEvents.PAGE_LOADED,Vt.onConfigurationUpdate),Vt.eventBus.on(t.appEvents.CONFIG_UPDATE,Vt.onConfigurationUpdate),Vt.domEventDelegate.on("scroll",Vt.oDefaults.selectorStripe,Vt.stripeScrollHandler),Vt.domEventDelegate.on("click",Vt.oDefaults.sSelectorAozItem,Vt.toggleItem),Vt.domEventDelegate.on("click",Vt.oDefaults.sSelectorAozButton,Vt.toggleConfigItem),Vt.domEventDelegate.on("click",Vt.oDefaults.selectorPrevButton,Vt.handlePrevNextClick),Vt.domEventDelegate.on("click",Vt.oDefaults.selectorNextButton,Vt.handlePrevNextClick),window.addEventListener("resize",Vt.resizeModule)},Vt.onConfigurationUpdate=function(){Vt.handleSelectionUpdated()},Vt.resizeModule=function(){var t,e;i.dom.getElementsArray(Vt.oDefaults.selectorModul).forEach((function(n){i.dom.getElement(Vt.oDefaults.selectorStripeContainer,n),(t=i.dom.getElement(Vt.oDefaults.selectorStripe,n))&&(e=i.dom.closest(t,Vt.oDefaults.selectorStripeWrap),Vt.hideNavigationArrows(e))}))},Vt.handlePrevNextClick=function(t){var e="next",n=i.dom.closest(t.target,Vt.oDefaults.selectorArrowButton);n&&(n.classList.contains(Vt.oDefaults.classPrevButton)&&(e="prev"),Vt.translateStripe(n,e))},Vt.translateStripe=function(t,e){var n,r,a=i.dom.getElement(Vt.oDefaults.selectorStripeContainer,Vt.getCurrentModule(t)),o=i.dom.closest(t,Vt.oDefaults.selectorStripeWrap),s=i.dom.getElement(Vt.oDefaults.selectorStripe,o),l=i.dom.getElement(Vt.oDefaults.selectorStripeList,o);l.clientWidth>a.clientWidth&&(o.classList.remove(Vt.oDefaults.classShowPrevArrow),o.classList.remove(Vt.oDefaults.classShowNextArrow),n=Vt.calculateNewScrollPosition(a,s.scrollLeft,e,l.clientWidth),r=Vt.calculateScrollDuration(a,s.scrollLeft,n),i.dom.animateElementX(n,s,r).then((function(){Vt.hideNavigationArrows(o)})))},Vt.getCurrentModule=function(t){return t?i.dom.closest(t,Vt.oDefaults.selectorModul):null},Vt.calculateScrollDuration=function(t,e,n){return Vt.scrollDuration*(Math.abs(e-n)/t.clientWidth)},Vt.calculateNewScrollPosition=function(t,e,n,i){var r=t.clientWidth;return"next"===n?Math.min(e+r,i-r):Math.max(0,e-r)},Vt.hideNavigationArrows=function(t){var e=t,n=i.dom.getElement(Vt.oDefaults.selectorStripe,e),r=i.dom.getElementsArray(Vt.oDefaults.selectorStripeItem,e),a=i.dom.getElement(Vt.oDefaults.selectorStripeList,e);0!==r.length&&(n.scrollLeft>10?e.classList.add(Vt.oDefaults.classShowPrevArrow):e.classList.remove(Vt.oDefaults.classShowPrevArrow),e.clientWidth+n.scrollLeft<a.clientWidth-10?e.classList.add(Vt.oDefaults.classShowNextArrow):e.classList.remove(Vt.oDefaults.classShowNextArrow))},Vt.stripeScrollHandler=function(t){var e=t.target,n=i.dom.closest(e,Vt.oDefaults.selectorStripeWrap);n&&Vt.hideNavigationArrows(n)},Vt.toggleItem=function(t){var e=Vt.getClosestElementWithClass(t.target,Vt.oDefaults.sClassAozModule),n=Vt.getClosestElementWithClass(t.target,Vt.oDefaults.sClassAozItem);t.preventDefault(),t.stopPropagation(),e&&n&&(n.classList.contains(Vt.oDefaults.sClassAozActive)?Vt.unsetSelection(e):Vt.setNewSelection(e,n)),Vt.handleSelectionUpdated()},Vt.toggleConfigItem=function(t){var e=Vt.getClosestElementWithClass(t.target,Vt.oDefaults.sClassAozModule),n=e.getElementsByClassName(Vt.oDefaults.sClassAozActive)[0];n.getAttribute(Vt.oDefaults.sAttributePrNumber).split(" ").join("_");t.preventDefault(),Vt.updateButtonWrapperClass(e,n)},Vt.retrievePrNumbersToFilter=function(t){var e,n,i=t.getElementsByClassName(Vt.oDefaults.sClassAozItem),r=[];for(e=0,n=i.length;e<n;e++)r.push(i[e].getAttribute("data-configurator-id"));return r},Vt.updateRenderImage=function(t,e){var n,i,a,o,s,l=[],c=[],u=t.getElementsByClassName("nm-j-configurator-renderimage"),d=Vt.retrievePrNumbersToFilter(t);for(n=0,i=u.length;n<i;n++)c.push(u[n].getAttribute("data-renderimage-type")),a=u[n].getAttribute("data-renderimage-view"),l.indexOf(a)<=-1&&l.push(a);r.c.sendRenderServiceRequest(d,e,l.join(","),c.join(",")).then((function(t){for(n=0,i=u.length;n<i;n++)o=u[n].getAttribute("data-renderimage-type"),a=u[n].getAttribute("data-renderimage-view"),s=t["render-results"][e][a][o],u[n].setAttribute("style","background-image: url("+s+")")}))},Vt.resetRenderImage=function(t){var e,n,i,r=t.getElementsByClassName("nm-j-configurator-renderimage");for(e=0,n=r.length;e<n;e++)i=r[e].getAttribute("data-url"),r[e].setAttribute("style","background-image: url("+i+")")},Vt.getClassBySubstring=function(t,e){var n,i,r=!1;for(n=0,i=t.classList.length;n<i;n++)if(t.classList[n].indexOf(e)>-1){r=t.classList[n];break}return r},Vt.updateButtonWrapperClass=function(t,e){var n=t.getElementsByClassName(Vt.oDefaults.sClassAozButton)[0],i=Vt.getClassBySubstring(e,"nm-j-configurator-status_"),r=Vt.getClassBySubstring(n,"nm-j-configurator-status_");r&&n.classList.remove(r),i&&n.classList.add(i),Vt.updateButtonTrackingAttributes(t,e)},Vt.updateButtonTrackingAttributes=function(t,e){var n=t.getElementsByClassName("nm-el-btn")[0],i=e.getAttribute("data-name"),r=e.getAttribute("data-familygroup"),a=e.getAttribute("data-family");i=""!==a?a+":"+i:i,i=(i=""!==r?r+":"+i:i).replace(/"/g,'\\"'),n.parentNode.setAttribute("data-configurator-id",e.getAttribute("data-configurator-id"))},Vt.updateDescription=function(t,e){var n=t.getElementsByClassName(Vt.oDefaults.sClassAozDescription)[0];n.innerHTML=!1===e?n.getAttribute(Vt.oDefaults.sAttributeInitialCaption):e},Vt.updateTyreLabel=function(t,e){const n=t.getElementsByClassName(Vt.oDefaults.sClassAozTyreLabel)[0];if(e){n.innerHTML=`<feature-app\n\t\t\tid="tyre-label-link:aoz-inlinerendering:${e}"\n\t\t\tbase-url="https://fa-tyre-label-link.cdn.prod.arcade.apps.one.audi/v2.1.2/fh/"\n\t\t\tsrc="app.js"\n\t\t\tserver-src="app.node.js"\n\t\t\tconfig='{"optionId": "${e}"}'>\n\t\t</feature-app>`;const t=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(t)}else n.innerHTML=""},Vt.updatePrice=function(t,e){t.getElementsByClassName(Vt.oDefaults.sClassAozPrice)[0].innerHTML=e},Vt.updateHintText=function(t,e){t.getElementsByClassName(Vt.oDefaults.sClassAozHintText)[0].innerHTML=e},Vt.unsetSelection=function(t){Vt.removeClassFromElementsWithClassWithinDomFragment(t,Vt.oDefaults.sClassAozItem,Vt.oDefaults.sClassAozActive),Vt.updateDescription(t,!1),Vt.updateTyreLabel(t,!1),Vt.updatePrice(t,"&nbsp;"),Vt.updateHintText(t,"&nbsp;"),Vt.addClassToElementsWithClassWithinDomFragment(t,Vt.oDefaults.sClassAozButton,Vt.oDefaults.sClassAozInvisible),Vt.resetRenderImage(t)},Vt.setNewSelection=function(t,e){Vt.updateDescription(t,e.getAttribute("data-name")),Vt.updateTyreLabel(t,e.getAttribute("data-configurator-id")),Vt.updatePrice(t,e.getAttribute("data-price")),Vt.updateHintText(t,e.getAttribute("data-hinttext")),Vt.removeClassFromElementsWithClassWithinDomFragment(t,Vt.oDefaults.sClassAozItem,Vt.oDefaults.sClassAozActive),e.classList.add(Vt.oDefaults.sClassAozActive),Vt.removeClassFromElementsWithClassWithinDomFragment(t,Vt.oDefaults.sClassAozButton,Vt.oDefaults.sClassAozInvisible),Vt.updateButtonWrapperClass(t,e)},Vt.getClosestElementWithClass=function(t,e){for(var n=t;n.classList&&!n.classList.contains(e);){if(!n.parentNode)return!1;n=n.parentNode}return!!n.parentNode&&n},Vt.removeClassFromElementsWithClassWithinDomFragment=function(t,e,n){var i,r,a=t.getElementsByClassName(e);for(i=0,r=a.length;i<r;i++)a[i].classList.remove(n)},Vt.addClassToElementsWithClassWithinDomFragment=function(t,e,n){var i,r,a=t.getElementsByClassName(e);for(i=0,r=a.length;i<r;i++)a[i].classList.add(n)},Vt.updateStatusClass=function(t,e){var n=Vt.getClassBySubstring(t,"nm-j-configurator-status_");t.classList.remove(n),t.classList.add("nm-j-configurator-status_"+e)},Vt.handleSelectionUpdated=function(){var t,e,n,i,a,o=document.body.getElementsByClassName(Vt.oDefaults.sClassAozItem);const s=[];for(t=0,e=o.length;t<e;t++)i=o[t].getAttribute(Vt.oDefaults.sAttributePrNumber).split(" ").join("_"),(n=r.c.getItem(i)).status&&Vt.updateStatusClass(o[t],n.status),o[t].classList.contains(Vt.oDefaults.sClassAozActive)&&(a=Vt.getClosestElementWithClass(o[t],Vt.oDefaults.sClassAozModule),Vt.updateRenderImage(a,i),s.push(a));Vt.fallbackToDpuFlyoutImageIfApplicable(s)},Vt.regexEscape=function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&"):t},Vt.isWheel=function(t){return!(!t||!t.toUpperCase().startsWith("MRAD"))},Vt.fallbackToDpuFlyoutImageIfApplicable=function(t){const e=i.dom.getElementsArray(Vt.oDefaults.selectorModul);if(!e||0==e.length||!t||e.length==t.length)return;const n=r.c.getConfiguration(),a=SETUPS.get("nemo.url.mediaservice");if(n&&n["mbv-ids"]&&n["mbv-ids"].prstring&&a){const i=n["mbv-ids"].prstring.split("|");i.length>1&&e.forEach((function(e){const r=t.find((t=>t.getAttribute("id")==e.getAttribute("id"))),o=e.dataset.defaultextcolor;if(!r&&o&&i[1]){const t=i.reduce(((t,e)=>t||Vt.isWheel(e)),!1);if(!new RegExp(`s${Vt.regexEscape(i[1])}$`).test(o)||t){const t=e.getElementsByClassName("nm-j-configurator-renderimage");for(let e=0,i=t.length;e<i;e++){const i=t[e].getAttribute("data-renderimage-type");if("exterior"==t[e].getAttribute("data-renderimage-view")&&i){const r=n?.assets?.exterior[i];r&&t[e].setAttribute("style",`background-image: url('${a.replace("/$","")}/${r.replace("^/","")}')`)}}}}}))}},Nt.initialize=function(t){Vt.eventBus=t,Vt.domEventDelegate=i.dom.getEventDelegate("body"),Vt.addEvents(),Vt.handleSelectionUpdated()};const Qt={},qt={__:Qt};Qt.oDefaults={sIdCanvas:"nm-ave-canvas",sClassActive:"nm-active",sClassLoading:"nm-3d-loading",sClassUnLoading:"nm-3d-unloading",sClassAVECandidate:"nm-ave-candidate",sClassModeAuto:"nm-md-in-mode-automatic",sClassLandscapeWrapper:"nm-md-in-landscape-wrapper",sClassPortraitWrapper:"nm-md-in-portrait-wrapper",sSelectorInlineRenderingModule:".nm-md-inline-rendering",sSelectorAVEContainer:".nm-md-ave-container",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorInlineRendering:".nm-j-configurator-renderimage",sSelectorInlineRenderingButton360:".nm-md-inline-rendering .nm-icon-360-view",sSelectorInlineRenderingButton2d:".nm-md-inline-rendering .nm-icon-2d-view",sSelectorButton360:".nm-icon-360-view",sSelectorButton2d:".nm-icon-2d-view",sSelectorAVECandidate:".nm-ave-candidate",sSelectorLandscapeWrapper:".nm-md-in-landscape-wrapper",sSelectorPortraitWrapper:".nm-md-in-portrait-wrapper",sSelectorLoading:".nm-3d-loading"},Qt.addEvents=function(){Qt.eventBus.on(t.appEvents.AVE_AVAILABLE,Qt.handlerEnable360),Qt.eventBus.on(t.appEvents.PAGE_LOADED,Qt.handlerPageLoaded),Qt.eventBus.on(t.appEvents.AVE_STREAM_READY,Qt.aveStreamReadyHandler),Qt.eventBus.on(t.appEvents.PAGE_OPEN,Qt.handlerPageOpen)},Qt.handlerPageLoaded=function(t){var e;!0===D.isAveAvailable()&&((e=jQuery(t.domElement)).find(Qt.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e.find(Qt.oDefaults.sSelectorInlineRenderingButton360).show(),e.find(Qt.oDefaults.sSelectorInlineRenderingButton360).off("click",Qt.handlerActivate3d),e.find(Qt.oDefaults.sSelectorInlineRenderingButton2d).off("click",Qt.handlerActivate2d),e.find(Qt.oDefaults.sSelectorInlineRenderingButton360).on("click",Qt.handlerActivate3d),e.find(Qt.oDefaults.sSelectorInlineRenderingButton2d).on("click",Qt.handlerActivate2d)))},Qt.handlerEnable360=function(){!0===D.isAveAvailable()&&(jQuery(Qt.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(jQuery(Qt.oDefaults.sSelectorInlineRenderingButton360).show(),jQuery(Qt.oDefaults.sSelectorInlineRenderingButton360).off("click",Qt.handlerActivate3d),jQuery(Qt.oDefaults.sSelectorInlineRenderingButton2d).off("click",Qt.handlerActivate2d),jQuery(Qt.oDefaults.sSelectorInlineRenderingButton360).on("click",Qt.handlerActivate3d),jQuery(Qt.oDefaults.sSelectorInlineRenderingButton2d).on("click",Qt.handlerActivate2d)))},Qt.handlerPageOpen=function(){var t=jQuery(Qt.oDefaults.sSelectorAVEContainerActive);t.length>0&&(Qt.setContainerTo2d(t),D.deactivate(t.attr("id")))},Qt.handlerActivate3d=function(t){var e=jQuery(t.currentTarget),n=jQuery(Qt.oDefaults.sSelectorAVEContainerActive),i=e.parent().parent();t.preventDefault(),Qt.activate3dForContainer(i,n),Qt.enableResizeHandler()},Qt.activate3dForContainer=function(t,e){var n=t.find(Qt.oDefaults.sSelectorInlineRendering),i=t.children(Qt.oDefaults.sSelectorAVEContainer).attr("id"),r=n.attr("data-renderimage-view");Qt.setContainerTo2d(e),Qt.setContainerTo3d(t,e),e.length>0?(D.moveAVE(e.attr("id"),i,r),Qt.removeLoadingImg(jQuery(Qt.oDefaults.sSelectorAVECandidate))):D.activateAVE(i,r)},Qt.setContainerTo3d=function(t){var e=t.find(Qt.oDefaults.sSelectorInlineRendering),n=t.children(Qt.oDefaults.sSelectorAVEContainer);t.find(Qt.oDefaults.sSelectorButton360).hide(),t.find(Qt.oDefaults.sSelectorButton2d).show(),e.addClass(Qt.oDefaults.sClassLoading),e.addClass(Qt.oDefaults.sClassAVECandidate),n.addClass(Qt.oDefaults.sClassActive)},Qt.handlerActivate2d=function(t){var e=jQuery(Qt.oDefaults.sSelectorAVEContainerActive);t.preventDefault(),Qt.setContainerTo2d(e),D.deactivate(e.attr("id"))},Qt.setContainerTo2d=function(t){t.length>0&&(t.parent().find(Qt.oDefaults.sSelectorButton2d).hide(),t.parent().find(Qt.oDefaults.sSelectorButton360).show(),setTimeout((function(){t.next().removeClass(Qt.oDefaults.sClassUnLoading)}),1e3),t.parent().find(Qt.oDefaults.sSelectorInlineRendering).removeClass(Qt.oDefaults.sClassLoading),t.parent().find(Qt.oDefaults.sSelectorInlineRendering).removeClass(Qt.oDefaults.sClassAVECandidate),t.removeClass(Qt.oDefaults.sClassActive))},Qt.removeLoadingImg=function(t){console.log("removeLoadingImg"),t.addClass(Qt.oDefaults.sClassUnLoading),t.removeClass(Qt.oDefaults.sClassLoading)},Qt.triggerSwipeTracker=function(t){t.target.closest(".nm-ave-animation-selector-wrapper")},Qt.aveStreamReadyHandler=function(){var t=jQuery(Qt.oDefaults.sSelectorAVEContainerActive);Qt.removeLoadingImg(jQuery(Qt.oDefaults.sSelectorLoading)),t.length>0&&(t.off("mousedown",Qt.triggerSwipeTracker),t.off("touchstart",Qt.triggerSwipeTracker),t.on("mousedown",Qt.triggerSwipeTracker),t.on("touchstart",Qt.triggerSwipeTracker))},Qt.enableResizeHandler=function(){jQuery(window).off("resize",Qt.handlerResize),jQuery(window).on("resize",Qt.handlerResize)},Qt.handlerResize=function(){var t,e=jQuery(Qt.oDefaults.sSelectorAVEContainerActive),n=e.parent().hasClass(Qt.oDefaults.sClassLandscapeWrapper),i=e.parent().hasClass(Qt.oDefaults.sClassPortraitWrapper);jQuery(window).width()<jQuery(window).height()&&n?t=e.closest(Qt.oDefaults.sSelectorInlineRenderingModule).find(Qt.oDefaults.sSelectorPortraitWrapper):jQuery(window).width()>=jQuery(window).height()&&i&&(t=e.closest(Qt.oDefaults.sSelectorInlineRenderingModule).find(Qt.oDefaults.sSelectorLandscapeWrapper)),t&&Qt.activate3dForContainer(t,e)},qt.initialize=function(t){Qt.eventBus=t,Qt.addEvents()};const Ht={},Wt={__:Ht};Ht.globalEventBus=null,Ht.EXPIRED_THRESHOLD=72,window.audi=window.audi||{},window.audi.api=window.audi.api||{},Ht.isExpired=function(t){return(new Date).getTime()/216e3-t>=Ht.EXPIRED_THRESHOLD},Ht.addEvents=function(){Ht.globalEventBus&&Ht.globalEventBus.on(t.appEvents.CONFIG_UPDATE,Ht.handleConfigurationUpdate)},Ht.getLastConfiguration=function(){var t=Ht.getStoredConfiguration();return!(!t||!t.lastChanged)&&(!Ht.isExpired(t.lastChanged)&&t)},window.audi.api.lastConfiguration=Ht.getLastConfiguration,Ht.handleConfigurationUpdate=function(){var t=Ht.getConfigurationObject();Ht.hasSorage()&&t&&Ht.writeEntry(t)},Ht.hasSorage=function(){return!!Ht.getStorage()},Ht.getStorage=function(){return window.localStorage||null},Ht.writeEntry=function(t){var e;try{e=JSON.stringify(t),Ht.getStorage().setItem("lastConfiguration",e)}catch(t){console.warn(t)}},Ht.getConfigurationObject=function(){var t,e=r.c.getConfiguration(),n={assets:{},assetsMobile:{}},i=r.c.getConfigurationAssets();return t=r.c.getRenderUrl(),e&&!r.c.getConflicts()&&i&&0!==Object.keys(i).length?(n.assets.exterior_front=i.exterior_front&&i.exterior_front["stage.hd"]?t+i.exterior_front["stage.hd"]:"",n.assets.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hd"]?t+i.closeup_lights["stage.hd"]:"",n.assets.exterior=i.exterior&&i.exterior["stage.hd"]?t+i.exterior["stage.hd"]:"",n.assetsMobile.exterior_front=i.exterior_front&&i.exterior_front["stage.hdx"]?t+i.exterior_front["stage.hdx"]:"",n.assetsMobile.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hdx"]?t+i.closeup_lights["stage.hdx"]:"",n.assetsMobile.exterior=i.exterior&&i.exterior["stage.hdx"]?t+i.exterior["stage.hdx"]:"",n.price=e.price,n.carline=e.carline,n.carlineName=e.carlineName,n.eec=e.eec,n.lastChanged=(new Date).getTime(),n["mv-version"]=r.c.getMarketVersion(),n.context=r.c.getContext(),n.url=Ht.getEntryUrl(e.prstring),n):null},Ht.getStoredConfiguration=function(){var t=Ht.getStorage();if(!t||!t.lastConfiguration)return null;try{return JSON.parse(t.lastConfiguration)}catch(t){return console.warn(t),null}},Ht.getEntryUrl=function(t){var e;return e=window.location.href.split("#")[0],e+=e.indexOf("?")>0?"&":"?",e+="pr="+t},Wt.initialize=function(t){var e;return new Promise((function(n){Ht.globalEventBus=t,Ht.addEvents(),(e=parseInt(SETUPS.get("nemo.last_config.expires"),10))>0&&(Ht.EXPIRED_THRESHOLD=e),n("configurator/last-configuration.js")}))};const Gt={},Yt={__:Gt};Gt.handleLayerLoaded=function(){const t=document.querySelector(".nm-md-media-library-configuration-buttons");if(t){const e=t.querySelector(".nm-md-media-library-configuration-button"),n=t.getAttribute("data-configurator-id");if(K.V.getModelsInfo(n)){const t=r.c.getItem(n);"11010"===t?.status&&e.classList.add("nm-md-media-library-configuration-button--inactive")}}},Gt.addEvents=function(){Gt.eventBus.on(t.appEvents.PAGE_LOADED,Gt.handleLayerLoaded),Gt.eventBus.on(t.appEvents.LAYER_LOADED,Gt.handleLayerLoaded),Gt.eventBus.on(t.appEvents.MODELSINFO_LOAD_COMPLETE,Gt.handleLayerLoaded),Gt.eventBus.on(t.appEvents.CONFIG_UPDATE,Gt.handleLayerLoaded)},Yt.initialize=function(t){Gt.eventBus=t,Gt.addEvents()};class $t extends HTMLElement{constructor(){super(),this.eventBus=t.signal.getEmitter(),this.configuration=null,this.loadConfiguration=this.loadConfiguration.bind(this),this.isExternalLink=SETUPS.get("scope.nemo.audicode.externallink"),a.stateRegistry.subscribeToStore(o.a,(t=>this.getConfigurationFromState(t)))}connectedCallback(){this.link=this.querySelector(".nm-j-audicode-accept"),this.link.addEventListener("click",this.loadConfiguration)}disconnectedCallback(){this.link.removeEventListener("click",this.loadConfiguration)}loadConfiguration(t){if(this.configuration){if(this.emitLoadAudicodeEvent(),this.isExternalLink)return this.hasOtherUrl()&&(this.link.href=this.configuration.audicode["other-url"]),!0;t.preventDefault(),this.hasOtherUrl()&&(window.location=this.configuration.audicode["other-url"]),this.handleExternalConfiguration(),this.closeHeaderService()}else t.preventDefault()}handleExternalConfiguration(){m.E.handleExternalConfiguration(this.configuration,{startType:"audicode-search"}).then((()=>{t.router.open("page",r.c.getCurrentCarlineUrl())}))}getConfigurationFromState(t){t&&t.configuration&&(this.configuration=t.configuration)}hasOtherUrl(){return!!this.configuration&&this.configuration.audicode&&this.configuration.audicode["other-url"]&&""!==this.configuration.audicode["other-url"]}emitLoadAudicodeEvent(){this.eventBus.emit(t.appEvents.SEARCH_LOAD_AUDICODE,{audicode:this.configuration.audicode.id})}closeHeaderService(){const t=document.querySelector("header-service");t&&t.click()}}window.customElements.get("audi-configurator-load-audicode-link")||window.customElements.define("audi-configurator-load-audicode-link",$t);class Xt extends HTMLElement{constructor(){super(),this.updateTargetParam=this.updateTargetParam.bind(this),this.handleLoginStatus=this.handleLoginStatus.bind(this),this.handleLogoutStatus=this.handleLogoutStatus.bind(this),this.logoutHandler=this.logoutHandler.bind(this),this.showLoginLink=this.showLoginLink.bind(this),this.showLogoutLink=this.showLogoutLink.bind(this),this.hideHeader=this.hideHeader.bind(this),this.showHeader=this.showHeader.bind(this),this.csrfToken=null}connectedCallback(){this.loginLinkElement=this.querySelector(".myaudi-login__link"),this.logoutLinkElement=this.querySelector(".myaudi-logout__link"),this.logoutLinkElement.addEventListener("click",this.logoutHandler),a.stateRegistry.subscribeToStore(o.a,this.updateTargetParam),this.getLoginStatus(),this.updateTargetParam(),this.loginHeadline=document.querySelector(".audi-login-headline-container")}disconnectedCallback(){this.logoutLinkElement.removeEventListener("click",this.logoutHandler)}updateTargetParam(t){const e=this.querySelector(".myaudi-login__link"),n=new URL(e.getAttribute("href")),i=new URL(window.location.href);t&&t.audicode&&i.searchParams.set("audicode",t.audicode),n.searchParams.set("target_url",i.href),e.setAttribute("href",n.href)}handleLoginStatus(t){t.loggedIn?(this.csrfToken=t.csrfToken,a.stateRegistry.triggerAction(s,"update",t),this.showLogoutLink()):this.showLoginLink()}handleLogoutStatus(t){t.logoutDone?(this.csrfToken=null,a.stateRegistry.triggerAction(s,"logout"),this.showLoginLink()):this.showLogoutLink()}getLoginStatus(){const t=SETUPS.get("myaudi.uds.url")+"loginStatus";fetch(t,{credentials:"include"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then(this.handleLoginStatus).then(this.updateTargetParam).catch((t=>console.log("netzwerk problem/performance problem: ",t)))}logoutHandler(t){t.preventDefault();const e=SETUPS.get("myaudi.uds.url")+"logout",n={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};fetch(e,n).then((t=>{if(t.ok)return t.json()})).then(this.handleLogoutStatus)}showLoginLink(){this.loginLinkElement.classList.remove("nm-hidden"),this.logoutLinkElement.classList.add("nm-hidden"),this.showHeader()}showLogoutLink(){this.loginLinkElement.classList.add("nm-hidden"),this.logoutLinkElement.classList.remove("nm-hidden"),this.hideHeader()}showHeader(){this.loginHeadline&&this.loginHeadline.classList.remove("nm-hidden")}hideHeader(){this.loginHeadline&&this.loginHeadline.classList.add("nm-hidden")}}void 0===window.customElements.get("audi-login")&&window.customElements.define("audi-login",Xt);class Kt extends HTMLElement{static get selectors(){return{counter:"nm-light-experience-list__item_",containers:".nm-light-experience-list__item-container",items:".nm-light-experience-list__item",visible:[":not(.nm-j-configurator-container-hide)",":not(.nm-j-configurator-status_00000)",":not(.nm-j-configurator-status_00001)",":not(.nm-j-configurator-status_00010)",":not(.nm-j-configurator-status_00011)",":not(.nm-j-configurator-status_00100)",":not(.nm-j-configurator-status_00101)",":not(.nm-j-configurator-status_00110)",":not(.nm-j-configurator-status_00111)",":not(.nm-j-configurator-status_01000)",":not(.nm-j-configurator-status_01001)",":not(.nm-j-configurator-status_01010)",":not(.nm-j-configurator-status_01011)",":not(.nm-j-configurator-status_01100)",":not(.nm-j-configurator-status_01101)",":not(.nm-j-configurator-status_01110)",":not(.nm-j-configurator-status_01111)",":not(.nm-j-configurator-status_10000)"]}}constructor(){super(),this.eventBus=t.signal.getEmitter(),this.setViewportWidth_=this.setViewportWidth.bind(this)}connectedCallback(){this.visibleSelector=Kt.selectors.visible.join(""),this.itemsPerRow=1,this.addEvents(),this.setViewportWidth()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(t.appEvents.DOM_UPDATED,(()=>{this.updateElements()})),this.onResizeHandler=i.dom.throttle(this.setViewportWidth.bind(this),100),window.addEventListener("resize",this.onResizeHandler)}removeEvents(){this.eventBus.off(t.appEvents.DOM_UPDATED,(()=>{this.updateElements()})),window.removeEventListener("resize",this.onResizeHandler)}getItemsPerRow(){return this.viewportWidth<768?1:this.viewportWidth>=768&&this.viewportWidth<1280?2:this.viewportWidth>=1280&&this.viewportWidth<1440?3:4}setViewportWidth(){this.viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);const t=this.itemsPerRow;this.itemsPerRow=this.getItemsPerRow(),t!==this.itemsPerRow&&this.updateElements()}updateElements(){const t=[...this.querySelectorAll(Kt.selectors.containers)],e=Kt.selectors.items+this.visibleSelector;t.forEach((t=>{[...t.querySelectorAll(e)].forEach(((t,e,n)=>{t.classList.remove(Kt.selectors.counter+"last"),e%this.itemsPerRow!=this.itemsPerRow-1&&e!==n.length-1||t.classList.add(Kt.selectors.counter+"last")}))}))}}window.customElements.get("audi-configurator-light-experience")||window.customElements.define("audi-configurator-light-experience",Kt);const Jt={},Zt={__:Jt};Jt.oDefaults={sSelectorItemLoading:".nm-j-configurator-item-loading",sItemLoadingClass:"nm-j-configurator-item-loading"},Jt.showLoadingIndicator=function(t){var e=t.$element;e&&e.length&&e.addClass(Jt.oDefaults.sItemLoadingClass)},Jt.hideLoadingIndicator=function(){jQuery(Jt.oDefaults.sSelectorItemLoading).removeClass(Jt.oDefaults.sItemLoadingClass)},Jt.addEvents=function(){Jt.eventBus.on(t.appEvents.CONFIG_CHANGEREQUEST_START,Jt.showLoadingIndicator),Jt.eventBus.on(t.appEvents.CONFIG_CHANGEREQUEST_END,Jt.hideLoadingIndicator)},Zt.initialize=function(t){Jt.eventBus=t,Jt.addEvents()};class te extends HTMLElement{static get observedAttributes(){return["data-rate"]}static get selectors(){return{circle:".nm-offer-rate-path",text:".nm-offer-rate-value"}}static get options(){return{circle:{duration:2e3,property:"strokeDashoffset",easing:"easeInOutSine"},text:{duration:2e3,property:"innerHTML",easing:"noEasingInt"},observer:{threshold:1}}}constructor(){super()}connectedCallback(){this.initElements(),this.setInitialValues(),this.isIntersectionOberserverAvailable()?this.setupIntersectionObserver():this.startAnimations()}attributeChangedCallback(t,e,n){if("data-rate"===t)this.updateRate(e,n)}updateRate(t,e){null!==t&&t!==e&&(this.initRate(),this.startAnimations())}isIntersectionOberserverAvailable(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}setupIntersectionObserver(){new IntersectionObserver((t=>{t.filter((t=>t.intersectionRatio>=te.options.observer.threshold)).forEach((()=>this.startAnimations()))}),te.options.observer).observe(this)}initElements(){this.circle=this.querySelector(te.selectors.circle),this.text=this.querySelector(te.selectors.text),this.pathLength="function"==typeof this.circle.getTotalLength?this.circle.getTotalLength():0,this.initRate()}initRate(){this.rate=parseInt(this.getAttribute("data-rate"),10),this.rate=this.rate>100?100:this.rate}setInitialValues(){this.circle.style.strokeDasharray=this.pathLength,this.circle.style.strokeDashoffset=this.pathLength}startAnimations(){const t=this.pathLength*(1-this.rate/100);i.animate.animateElementStyleProperty(t,this.circle,te.options.circle),this.text&&i.animate.animateElementProperty(this.rate,this.text,te.options.text)}}window.customElements.get("audi-configurator-offerrate")||window.customElements.define("audi-configurator-offerrate",te);const ee={},ne={__:ee};ee.oDefaults={},ee.pendingPromise=null,ee.resolved=!1,ee.eventBus=null,ee.register=function(){J.patternMatching.register("audicode",ee.getAudiCode),J.patternMatching.register("conf_audicode",ee.getAudiCode)},ee.getAudiCode=function(){return!ee.resolved&&ee.pendingPromise||(ee.pendingPromise=ee.fetchAudiCode().catch((function(t){return ee.resolved=!0,ee.pendingPromise=null,t})).then((function(t){return ee.resolved=!0,ee.pendingPromise=null,t}))),ee.pendingPromise},ee.fetchAudiCode=function(){return new Promise((function(t,e){d.loadAudiCode().then((function(e){t(e)}),(function(t){e(t),console.error(t)}))}))},ne.initialize=function(){ee.register()};var ie={},re={__:ie};ie.oDefaults={},ie.register=function(){J.patternMatching.register("carlineID",ie.getCarlineId)},ie.getCarlineId=function(){var t;return new Promise((function(e,n){(t=r.c.getCarline())?e(t):n(new TypeError("load pattern -carlineID- failed"))}))},re.initialize=function(){ie.register()};var ae={},oe={__:ae};ae.oDefaults={},ae.register=function(){J.patternMatching.register("conf_finance",ae.getConfigurationAttribute("financeProductName")),J.patternMatching.register("conf_name",ae.getConfigurationAttribute("carlineName")),J.patternMatching.register("conf_id",ae.getConfigurationAttribute("carline")),J.patternMatching.register("conf_description",ae.getConfigurationAttribute("description")),J.patternMatching.register("conf_modelyear",ae.getConfigurationAttribute("modelyear")),J.patternMatching.register("conf_power_primary",ae.getModelInfoAttribute("power-primary")),J.patternMatching.register("conf_power_secondary",ae.getModelInfoAttribute("power-secondary"))},ae.getConfigurationAttribute=function(t){return function(){var e=r.c.getConfiguration();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the configuration")}))}},ae.getModelInfoAttribute=function(t){return function(){var e=r.c.getCurrentModelInfo();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the model Info")}))}},oe.initialize=function(){ae.register()};const se={},le={__:se};se.oDefaults={},se.eventBus=null,se.register=function(){J.patternMatching.register("language",se.getLanguage)},se.getLanguage=function(){var t;return new Promise((function(e,n){(t=SETUPS.get("nemo.locale.language"))?e(t):n(new TypeError("load pattern -language- failed"))}))},le.initialize=function(){se.register()};const ce={},ue={__:ce};ce.oDefaults={sourceName:"IPH"},ce.eventBus=null,ce.register=function(){J.patternMatching.register("lead_source",ce.getLeadSource)},ce.getLeadSource=function(){return new Promise((function(t,e){J.iph.inIPHMode()?t(ce.oDefaults.sourceName):e(new TypeError("load pattern -leadsource- failed"))}))},ue.initialize=function(){ce.register()};var de={},me={__:de};de.oDefaults={},de.eventBus=null,de.register=function(){J.patternMatching.register("partnerid",de.getPartnerId)},de.getPartnerId=function(){var t;return new Promise((function(e,n){(t=J.iph.inIPHMode())?e(t):n(new TypeError("load pattern -partnerid- failed"))}))},me.initialize=function(){de.register()};const ge=new class{initialize(){J.patternMatching.register("prstring",this._getPrString)}_getPrString(){return new Promise((t=>t(r.c.getPrString())))}},fe={},pe={__:fe};fe.oDefaults={},fe.register=function(){J.patternMatching.register("vehicle_id",fe.getVehicleId)},fe.getVehicleId=function(){return new Promise((function(t,e){const n=fe.getUrlParameterByName("vehicleid",location.href);n?t(n):e(new TypeError("load pattern -vehicleid- failed"))}))},fe.getUrlParameterByName=function(t,e){let n,i,r,a;return a=e||window.location.href,r=(t||"").replace(/[[\]]/g,"\\$&"),n=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(a),i?i[2]?decodeURIComponent((i[2]||"").replace(/\+/g," ")):"":null},pe.initialize=function(){fe.register()};const he={},ve={__:he};var ye="",Se="";he.setGroupPrice=function(){i.dom.getElementsArray(".js-configurator-group").forEach((function(t){var e,n=t,a=i.dom.closest(n,".nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block"),o=i.dom.getElementsArray(".nm-j-configurator-item:not(.nm-j-configurator-status_00000)",a),s=Number.MAX_VALUE,l=!0;o.forEach((function(t){var n,i,a;i=(n=r.c.getItem(t.getAttribute("data-configurator-id")))&&n.price?n.price:"",1*(a=(a=ve.getRawPrice(i,!1)).toFixed(2))==0&&(e=Se),1*s>1*a&&(e=i,s=a),l&&s!==a&&(l=!1)})),l||(e=ye+" "+e),i.dom.getElement(".nm-price",n).textContent=e}))},ve.getRawPrice=function(t,e){var n,i;return i=0===SETUPS.get("scope.commaseparator")||"0"===SETUPS.get("scope.commaseparator")?/[^0-9,]/g:/[^0-9.]/g,(n=t.replace(i,"")).replace(/[,]/g,"."),n=!0===e?parseInt(n,10):parseFloat(n),isNaN(n)&&(n=0),n},he.setSelectedGroup=function(){i.dom.getElementsArray(".nm-pattern-list-dynamic").forEach((function(t){var e=i.dom.getElementsArray("li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011",t).length;t.classList.remove("nm-pattern-selected"),e&&t.classList.add("nm-pattern-selected")}))},he.handleUpdates=function(){i.polling.wait((function(){return r.c.isInitialized()||!r.c.getCarline()}),5e3,250).then((function(){he.setSelectedGroup(),he.setGroupPrice()})).catch((t=>console.warn("pattern: could not update groups and prices",t)))},he.subscribe=function(){he.eventBus.on(t.appEvents.CONFIG_UPDATE,he.handleUpdates),he.eventBus.on(t.appEvents.PAGE_LOADED,he.handleUpdates),he.eventBus.on(t.appEvents.LAYER_LOADED,he.handleUpdates)},he.initialize=function(){ye=window.i18n.from,Se=window.i18n["standard-group-price"],he.subscribe()},ve.initialize=function(t){he.eventBus=t,he.initialize()};const Ce={},Ee={__:Ce};Ce.oDefaults={sSelectorModule:".j-pdf-configuration"},Ce.addEvents=function(){i.dom.getEventDelegate("body").on("click",Ce.oDefaults.sSelectorModule,Ce.callPDFServiceWithAudicode)},Ce.callPDFServiceWithAudicode=function(t){var e,n;e=SETUPS.get("nemo.pdf.url"),console.log("PDFURl: ",e),e&&(n=window.open(),J.patternMatching.getReplacedUrl(e+"/audicode/{{audicode}}","audi.de").then((function(t){n.location=t})).catch((function(t){console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ",t)})))},Ee.initialize=function(t){Ce.addEvents()};const we={},be={__:we};we.oDefaults={sPreconfTeaserSelector:".nm-module-preconfiguration-teaser",spreconfigSlide:".nm-md-preconfig-teaser-slide",sButtonSelector:".j-preconfig-submit",sButtonConfigurationClass:"nm-md-preconfig-teaser-custom-configuration",sSelectorTabsNavi:"ul.nm-preconfiguration-teaser-thumbs",sSelectorTeaserTemplates:"j-preconfig-teaser-tpl-",sTabsSelectorDelegateClick:"li.nm-preconfiguration-teaser-thumbnail",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-preconfig-teaser-peephole",selectorArrow:".nm-preconfiguration-teaser-slide-arrows a",selectorArrowPrev:".nm-preconfiguration-teaser-slide-prev",selectorArrowNext:".nm-preconfiguration-teaser-slide-next",classHidden:"nm-hidden"},we.selectedIndex=0,we.maxIndex=0,we.startPos={x:0,y:0},we.PREV="prev",we.sensitivity=40,we.direction="left",we.isAnimating=!1,we.xDirection="none",we.yDirection="none",we.deltaX=0,we.deltaY=0,we.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},we.isDown=!1,we.deviceType="desktopdevice",we.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},we.handlePageLoaded=function(){if(we.$preconfigTeaserContainer&&jQuery.contains(document,we.$preconfigTeaserContainer[0]))return!1;if(we.$preconfigTeaserContainer=jQuery(we.oDefaults.sPreconfTeaserSelector),we.$preconfigTeaserContainer.length){var e=jQuery("script[id^='"+we.oDefaults.sSelectorTeaserTemplates+"']");we.maxIndex=e.length-1,we.isTouchDevice()&&(we.deviceType="touchdevice"),we.maxIndex>0&&(we.addSwipeEvents(),we.$preconfigTeaserContainer.on("click.tabs touchend.tabs",we.oDefaults.sTabsSelectorDelegateClick,we.handleTabClick)),we.$preconfigTeaserContainer.on("click.configuration.start touchend.configuration.start",we.oDefaults.sButtonSelector,we.handleConfigurationStartClick),we.eventBus.on(t.appEvents.CONFIG_UPDATE,we.updateButtonLabel),we.updateButtonLabel(),we.updateArrows(0)}},we.addSwipeEvents=function(){we.removeSwipeEvents(),we.$preconfigTeaserContainer.off(we.eventLookup[we.deviceType].down,we.handleMouseDown).on(we.eventLookup[we.deviceType].down,we.handleMouseDown)},we.removeSwipeEvents=function(){we.$preconfigTeaserContainer.off(we.eventLookup[we.deviceType].up,we.handleMouseUp),we.$preconfigTeaserContainer.off(we.eventLookup[we.deviceType].move,we.handleMouseMove)},we.handleMouseDown=function(t){we.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(we.isDown=!0,we.deltaX=0,we.deltaY=0,we.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,we.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,we.$preconfigTeaserContainer.off(we.eventLookup[we.deviceType].up,we.handleMouseUp).on(we.eventLookup[we.deviceType].up,we.handleMouseUp),we.isTouchDevice()||we.$preconfigTeaserContainer.on(we.eventLookup[we.deviceType].move,we.handleMouseMove))},we.getXDirection=function(t){return t>0?"left":"right"},we.getYDirection=function(t){return t>0?"up":"down"},we.handleMouseUp=function(t){we.down=!1,we.removeSwipeEvents(),we.deltaX=we.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),we.deltaY=we.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),we.xDirection=we.getXDirection(we.deltaX),we.yDirection=we.getYDirection(we.deltyY),Math.abs(we.deltaX)>we.sensitivity&&Math.abs(we.deltaY)<we.sensitivity&&we.triggerViewChange(we.xDirection)},we.handleMouseMove=function(t){we.isDown&&(we.deltaX=we.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),we.deltaY=we.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),we.xDirection=we.getXDirection(we.deltaX),we.yDirection=we.getYDirection(we.deltyY),Math.abs(we.deltaX)>we.sensitivity&&Math.abs(we.deltaY)<we.sensitivity&&(we.removeSwipeEvents(),we.isDown=!1,we.triggerViewChange(we.xDirection)))},we.removeEvents=function(){we.$preconfigTeaserContainer=jQuery(we.oDefaults.sPreconfTeaserSelector),we.$preconfigTeaserContainer.length&&(we.removeSwipeEvents(),we.$preconfigTeaserContainer.off("click.tabs touchend.tabs",we.handleTabClick),we.$preconfigTeaserContainer.off("click.configuration.start touchend.configuration.start",we.handleConfigurationStartClick),jQuery("body").off(t.appEvents.CONFIG_UPDATE,we.updateButtonLabel))},we.handleConfigurationStartClick=function(e){we.cancelEvent(e);var n=jQuery(this),i=n.data("prstring"),a=n.data("audicode");return jQuery(e.target).closest("a").trigger("click.link-tracking"),a?(m.E.loadConfigurationFromTeaser({audicode:a,prstring:null},"audicode.preconfig-teaser").then((function(){t.router.open("page",r.c.getCurrentCarlineUrl())})),!1):i?(m.E.loadConfigurationFromTeaser({prstring:i,audicode:null},"prstring.preconfig-teaser").then((function(){t.router.open("page",r.c.getCurrentCarlineUrl())})),!1):(t.router.open("page",r.c.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},we.handleTabClick=function(t){t&&t.preventDefault&&t.preventDefault();var e,n=we.selectedIndex;this.hasAttribute("data-direction")?e=this.getAttribute("data-direction")===we.PREV?n-1:n+1:e=$(this).index();return we.cancelEvent(t),we.isAnimating?null:e!==n&&(we.direction=e>n?"left":"right",we.selectedIndex=e,void we.updateContent(we.selectedIndex,we.direction))},we.updateArrows=function(t){if(0!=we.maxIndex){var e=i.dom.getElement(we.oDefaults.selectorArrowPrev),n=i.dom.getElement(we.oDefaults.selectorArrowNext);0==t?e.classList.add(we.oDefaults.classHidden):e.classList.remove(we.oDefaults.classHidden),t==we.maxIndex?n.classList.add(we.oDefaults.classHidden):n.classList.remove(we.oDefaults.classHidden)}},we.getNextIndex=function(t){return(t+1)%(we.maxIndex+1)},we.getPreviousIndex=function(t){var e=t-1;return e<0&&(e=we.maxIndex),e},we.updateContent=function(t,e){we.insertTeaser(t,e),we.updateSelection(t)},we.triggerViewChange=function(t){var e=we.selectedIndex;if(we.isAnimating)return null;we.legacyEventBus.trigger("swipe.preconfiguration",{prop16:"<prefix>:"+r.c.getCarlineName(),eVar39:"Pre-Config Switch",prop39:"Pre-Config Switch",eVar44:"Pre-Config Switch",prop44:"Pre-Config Switch",eVar46:"<pagename>:Pre-Config Switch:Swipe",prop46:"<pagename>:Pre-Config Switch:Swipe",prop67:"<pagename>"}),we.direction=t,e="right"===t?we.getPreviousIndex(e):we.getNextIndex(e),we.selectedIndex=e,we.updateContent(we.selectedIndex,we.direction)},we.handlePageLeave=function(){we.removeEvents()},we.animateStage=function(t,e,n,i){var r="-"+.5*e.width()+"px";we.isAnimating=!0,"left"===t?e.css("height",n).animate({"margin-left":r,height:i},500,"easeOutSine",we.animationEnded):e.css("margin-left",r).animate({"margin-left":0,height:i},500,"easeOutSine",we.animationEnded)},we.insertTeaser=function(t,e){var n,i,r,a,o=jQuery(we.oDefaults.sSelectorTeaserContainer);o.addClass("nm-slide-animation-start-"+e),n=we.getTemplateByIndex(t),i=jQuery(n),r=jQuery(we.oDefaults.spreconfigSlide).height()+"px",i.appendTo(o),a=i.height()+"px",we.animateStage(e,o,r,a);const s=document.querySelector(we.oDefaults.sSelectorTeaserContainer),l=new CustomEvent("content:rendered",{detail:{element:s}});document.dispatchEvent(l)},we.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",we.direction].join("")).removeAttr("style").find(we.oDefaults.spreconfigSlide).first().remove(),we.isAnimating=!1,we.updateArrows(we.selectedIndex)},we.updateButtonLabel=function(){r.c.hasCustomConfiguration()?$(we.oDefaults.sSelectorTeaserContainer).addClass(we.oDefaults.sButtonConfigurationClass):$(we.oDefaults.sSelectorTeaserContainer).removeClass(we.oDefaults.sButtonConfigurationClass)},we.updateSelection=function(t){var e=we.$preconfigTeaserContainer.find(we.oDefaults.sSelectorTabsNavi).find(we.oDefaults.sTabsSelectorDelegateClick);e.removeClass(we.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(we.oDefaults.sMenuSelectedClass)},we.getTemplateByIndex=function(t){var e=jQuery(["#",we.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},we.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},we.addEvents=function(){we.eventBus.on(t.appEvents.PAGE_LOADED,we.handlePageLoaded),we.eventBus.on(t.appEvents.LAYER_LOADED,we.handlePageLoaded),we.domEventDelegate.on("click",we.oDefaults.selectorArrow,we.handleTabClick)},be.initialize=function(t){we.eventBus=t,we.domEventDelegate=i.dom.getEventDelegate("body"),we.addEvents(),we.handlePageLoaded()};const _e={},De={__:_e};_e.oDefaults={sPreconfTeaserSelector:".nm-md-preconfs-teaser",sPreconfsSlide:".nm-md-preconfs-teaser-slide",sButtonSelector:".j-preconfs-submit",sButtonConfigurationClass:"nm-md-preconfs-teaser-custom-configuration",sSelectorDotsNavi:"ul.nm-dots-navi",sSelectorTeaserTemplates:"j-preconfs-teaser-tpl-",sDotsSelectorDelegateClick:"li.nm-dot",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-peephole"},_e.selectedIndex=0,_e.maxIndex=0,_e.startPos={x:0,y:0},_e.sensitivity=40,_e.direction="left",_e.isAnimating=!1,_e.xDirection="none",_e.yDirection="none",_e.deltaX=0,_e.deltaY=0,_e.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},_e.isDown=!1,_e.deviceType="desktopdevice",_e.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},_e.handlePageLoaded=function(){if(_e.$preconfsTeaserContainer=jQuery(_e.oDefaults.sPreconfTeaserSelector),_e.$preconfsTeaserContainer.length){var e=jQuery("script[id^='"+_e.oDefaults.sSelectorTeaserTemplates+"']");_e.maxIndex=e.length-1,_e.isTouchDevice()&&(_e.deviceType="touchdevice"),_e.maxIndex>0&&(_e.addSwipeEvents(),_e.$preconfsTeaserContainer.on("click.dots touchend.dots",_e.oDefaults.sDotsSelectorDelegateClick,_e.handleDotClick)),_e.$preconfsTeaserContainer.on("click.configuration.start touchend.configuration.start",_e.oDefaults.sButtonSelector,_e.handleConfigurationStartClick),_e.eventBus.on(t.appEvents.CONFIG_UPDATE,_e.updateButtonLabel),_e.updateButtonLabel()}},_e.addSwipeEvents=function(){_e.removeSwipeEvents(),_e.$preconfsTeaserContainer.off(_e.eventLookup[_e.deviceType].down,_e.handleMouseDown).on(_e.eventLookup[_e.deviceType].down,_e.handleMouseDown)},_e.removeSwipeEvents=function(){_e.$preconfsTeaserContainer.off(_e.eventLookup[_e.deviceType].up,_e.handleMouseUp),_e.$preconfsTeaserContainer.off(_e.eventLookup[_e.deviceType].move,_e.handleMouseMove)},_e.handleMouseDown=function(t){_e.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(_e.isDown=!0,_e.deltaX=0,_e.deltaY=0,_e.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,_e.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,_e.$preconfsTeaserContainer.off(_e.eventLookup[_e.deviceType].up,_e.handleMouseUp).on(_e.eventLookup[_e.deviceType].up,_e.handleMouseUp),_e.isTouchDevice()||_e.$preconfsTeaserContainer.on(_e.eventLookup[_e.deviceType].move,_e.handleMouseMove))},_e.handleMouseUp=function(t){_e.down=!1,_e.removeSwipeEvents(),_e.deltaX=_e.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),_e.deltaY=_e.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),_e.deltaX>0?_e.xDirection="left":_e.xDirection="right",_e.deltaY>0?_e.yDirection="up":_e.yDirection="down",Math.abs(_e.deltaX)>_e.sensitivity&&Math.abs(_e.deltaY)<_e.sensitivity&&_e.triggerViewChange(_e.xDirection)},_e.handleMouseMove=function(t){_e.isDown&&(_e.deltaX=_e.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),_e.deltaY=_e.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),_e.deltaX>0?_e.xDirection="left":_e.xDirection="right",_e.deltaY>0?_e.yDirection="up":_e.yDirection="down",Math.abs(_e.deltaX)>_e.sensitivity&&Math.abs(_e.deltaY)<_e.sensitivity&&(_e.removeSwipeEvents(),_e.isDown=!1,_e.triggerViewChange(_e.xDirection)))},_e.removeEvents=function(){_e.$preconfsTeaserContainer=jQuery(_e.oDefaults.sPreconfTeaserSelector),_e.$preconfsTeaserContainer.length&&(_e.removeSwipeEvents(),_e.$preconfsTeaserContainer.off("click.dots touchend.dots",_e.handleDotClick),_e.$preconfsTeaserContainer.off("click.configuration.start touchend.configuration.start",_e.handleConfigurationStartClick),jQuery("body").off(t.appEvents.CONFIG_UPDATE,_e.updateButtonLabel))},_e.handleConfigurationStartClick=function(e){_e.cancelEvent(e);var n=jQuery(this),i=n.data("prstring"),a=n.data("audicode");return a?(m.E.loadConfigurationFromTeaser({audicode:a,prstring:null},"audicode.preconfs-teaser").then((function(){t.router.open("page",r.c.getCurrentCarlineUrl())})),!1):i?(m.E.loadConfigurationFromTeaser({prstring:i,audicode:null},"prstring.preconfs-teaser").then((function(){t.router.open("page",r.c.getCurrentCarlineUrl())})),!1):(t.router.open("page",r.c.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},_e.handleDotClick=function(t){if(_e.cancelEvent(t),_e.isAnimating)return null;var e=$(this).index(),n=_e.selectedIndex;if(e===n)return!1;_e.direction=e>n?"left":"right",_e.selectedIndex=e,_e.updateContent(_e.selectedIndex,_e.direction)},_e.getNextIndex=function(t){return(t+1)%(_e.maxIndex+1)},_e.getPreviousIndex=function(t){return(t-=1)<0&&(t=_e.maxIndex),t},_e.updateContent=function(t,e){_e.insertTeaser(t,e),_e.updateSelection(t)},_e.triggerViewChange=function(t){if(_e.isAnimating)return null;var e=_e.selectedIndex;"right"===t?(_e.direction="right",e=_e.getPreviousIndex(e)):(_e.direction="left",e=_e.getNextIndex(e)),_e.selectedIndex=e,_e.updateContent(_e.selectedIndex,_e.direction)},_e.handlePageLeave=function(){_e.removeEvents()},_e.insertTeaser=function(t,e){var n=jQuery(_e.oDefaults.sSelectorTeaserContainer);n.addClass("nm-slide-animation-start-"+e);var i=_e.getTemplateByIndex(t),r=jQuery(i),a=jQuery(_e.oDefaults.sPreconfsSlide).height()+"px";r.appendTo(n);var o=r.height()+"px",s="-"+.5*n.width()+"px";_e.isAnimating=!0,"left"===e?n.css("height",a).animate({"margin-left":s,height:o},500,"easeOutSine",_e.animationEnded):n.css("margin-left",s).animate({"margin-left":0,height:o},500,"easeOutSine",_e.animationEnded)},_e.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",_e.direction].join("")).removeAttr("style").find(_e.oDefaults.sPreconfsSlide).first().remove(),_e.isAnimating=!1},_e.updateButtonLabel=function(){r.c.hasCustomConfiguration()?$(_e.oDefaults.sSelectorTeaserContainer).addClass(_e.oDefaults.sButtonConfigurationClass):$(_e.oDefaults.sSelectorTeaserContainer).removeClass(_e.oDefaults.sButtonConfigurationClass)},_e.updateSelection=function(t){var e=_e.$preconfsTeaserContainer.find(_e.oDefaults.sSelectorDotsNavi).find(_e.oDefaults.sDotsSelectorDelegateClick);e.removeClass(_e.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(_e.oDefaults.sMenuSelectedClass)},_e.getTemplateByIndex=function(t){var e=jQuery(["#",_e.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},_e.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},_e.addEvents=function(){_e.eventBus.on(t.appEvents.PAGE_LOADED,_e.handlePageLoaded),_e.eventBus.on(t.appEvents.PAGE_LEAVE,_e.handlePageLeave),_e.eventBus.on(t.appEvents.LAYER_LOADED,_e.handlePageLoaded)},De.initialize=function(t){_e.eventBus=t,_e.addEvents(),_e.handlePageLoaded()};const Ae='<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t{{=window.i18n[\'recommendations-layer.your-recommendations-for\']}}\n</h2>\n<p class="nm-el-pg nm-el-pg-03">\n\t{{=window.i18n[\'recommendations-layer.message\']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class="nm-recommendation-container nm-recommendation-{{=index+1}}">\n\t<div class="nm-module nm-md-recommendations">\n\t\t<strong class="nm-el-hdl nm-el-hdl-04">\n\t\t\t{{=window.i18n[\'recommendations-layer.recommendation-index\']}} {{=index+1}}\n\t\t</strong>\n\t\t<p class="nm-recommendation-title nm-el-pg nm-el-pg-03">\n\t\t\t{{=value.explanation}}\n\t\t</p>\n\t\t{{~value.recommendation :r}}\n\t\t<div class="nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}"\n\t\tdata-configurator-id="{{=r.id}}">\n\t\t\t<div class="nm-md-teaser-img">\n\t\t\t\t<img src="{{=r.image}}" alt="" />\n\t\t\t</div>\n\t\t\t<div class="nm-md-teaser-copy">\n\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t{{=r.name}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-image-replace nm-layerLink" href="{{=r.url}}">{{=window.i18n[\'more-information\']}}</a>\n\t\t\t\t</div>\n\t\t\t\t<span class="nm-price nm-el-hdl nm-el-hdl-04">\n\t\t\t\t\t{{=r.price}}\n\t\t\t\t</span>\n\t\t\t\t<div class="nm-el-pg nm-el-pg-02">\n\t\t\t\t\t{{=r.description || "No descriptive text found"}}\n\t\t\t\t</div>\n\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'configuration.add-item\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'configuration.item-included\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'configuration.remove-item\']}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t{{~}} {{? 0 !== value.chosen.length}}\n\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t{{=window.i18n[\'recommendations-layer.explanation\']}}:\n\t\t</p>\n\t\t{{~value.chosen :c}}\n\t\t<ul class="nm-options-list">\n\t\t\t<li class="clearfix">\n\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t<div class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t{{=c.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=c.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n\t\t\t\t\t<span class="nm-price">\n\t\t\t\t\t\t{{=c.price}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t{{~}} {{?}}\n\t</div>\n</div>\n{{~}}',ke={},Le={__:ke};ke.oDefaults={sSelectorTemplateClass:".nm-recommendation",sSelectorTabClass:".nm-j-link-recommendations"},ke.tplFunc=null,ke.tplFuncNoRecs=function(){return""},ke.getTplString=function(t){var e=$(t);return e.length>0?e.html():""},ke.showTab=function(){jQuery("body").addClass("nm-has-recommendations")},ke.hideTab=function(){jQuery("body").removeClass("nm-has-recommendations")},ke.tabAvailable=function(){return jQuery(ke.oDefaults.sSelectorTabClass).length>0},ke.containerAvailable=function(){return jQuery(ke.oDefaults.sSelectorTemplateClass).length>0},ke.initialize=function(){ke.addEvents()},ke.dispose=function(){ke.disposeEvents()},ke.parse=function(t){var e,n=r.c.getItems()||{},i={recommendations:[]},a=JSON.parse(JSON.stringify(t)),o={};return jQuery.each(n,(function(t,e){o[e.mbvId]=e})),e=[],jQuery.each(a,(function(t,i){if(null===i)return!1;i.recommendation=jQuery.map(i.recommendation,(function(t){return!!o[t.id]?o[t.id]:r.c.getItem(t.id)})),i.chosen=jQuery.map(i.chosen,(function(t){return!!o[t.id]?o[t.id]:n[t.id]})),e.push(i)})),jQuery.each(e,(function(t,e){Array.prototype.push.call(i.recommendations,e)})),i.recommendations=e,i.carlineName=r.c.getCarlineName(),i},ke.render=function(){var t=r.c.getRecommendations(),e=ke.parse(t),n=i.template.render(Ae,e);n=n.replace("{{=it.carlineName}}",e.carlineName.toUpperCase()),jQuery(ke.oDefaults.sSelectorTemplateClass).html(n)},ke.renderNoRecommendations=function(){var t=r.c.getConfiguration(),e=i.template.render(Ae,t);e=e.replace("{{=it.carlineName}}",(r.c.getCarline()||"").toUpperCase()),jQuery(ke.oDefaults.sSelectorTemplateClass).html(e),jQuery(ke.oDefaults.sSelectorTemplateClass).html(ke.tplFuncNoRecs(t))},ke.addEvents=function(){ke.eventBus.on(t.appEvents.CONFIG_UPDATE,ke.handleConfigUpdate),ke.eventBus.on(t.appEvents.PAGE_LOADED,ke.handlePageLoaded),ke.eventBus.on(t.appEvents.PAGE_LOADED,ke.handleLayerLoaded),ke.eventBus.on(t.appEvents.LAYER_LOADED,ke.handleLayerLoaded),ke.eventBus.on(t.appEvents.LAYER_CLOSED,ke.handleLayerClosed)},ke.disposeEvents=function(){ke.eventBus.off(t.appEvents.CONFIG_UPDATE,ke.handleConfigUpdate),ke.eventBus.off(t.appEvents.PAGE_LOADED,ke.handlePageLoaded),ke.eventBus.off(t.appEvents.PAGE_LOADED,ke.handleLayerLoaded),ke.eventBus.off(t.appEvents.LAYER_LOADED,ke.handleLayerLoaded),ke.eventBus.off(t.appEvents.LAYER_CLOSED,ke.handleLayerClosed)},ke.recommendationsAvailable=function(){return r.c.isConfigurable()&&r.c.getRecommendations().length},ke.updateView=function(){ke.containerAvailable()||(ke.recommendationsAvailable()?(ke.showTab(),ke.render()):ke.hideTab())},ke.handleConfigUpdate=function(){ke.updateView()},ke.handlePageLoaded=function(){ke.updateView()},ke.handleLayerClosed=function(){ke.recommendationsAvailable()||ke.hideTab()},ke.handleLayerLoaded=function(){!ke.recommendationsAvailable()&&ke.containerAvailable()?(ke.showTab(),ke.renderNoRecommendations()):ke.recommendationsAvailable()&&ke.containerAvailable()?(ke.showTab(),ke.render()):ke.recommendationsAvailable()&&ke.tabAvailable()&&ke.showTab()},Le.initialize=function(t){ke.eventBus=t,ke.initialize()};const Ie={},Te={__:Ie,initialized:!1};Ie.activeImageSrc=!1,Ie.interiorImages=[],Ie.exteriorImages=[],Ie.exteriorOpenImages=[],Ie.min360ImgCount=6,Ie.oDefaults={sClassActive:"nm-active",sClassNoThumbnailAnimation:"nm-no-animation",sClassAnimate:"nm-animate",sClassCabrioOpen:"nm-cabrio-open",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sClassItemExterior:"nm-js-exterior",sClassItemExteriorOpen:"nm-js-exterior-open",sClassItemInterior:"nm-js-interior",sAttrDisplayedRenderingView:"data-renderimage-view",sIdToggleExterior:"nm-renderinglayer-exteriortoggle",sIdToggleExteriorOpen:"nm-renderinglayer-exterioropentoggle",sIdToggleInterior:"nm-renderinglayer-interiortoggle",sSelectorColorItems:"#nm-renderinglayer-extcolor-selection-color li",sSelectorOpenButton:".nm-renderinglayer-open",sSelectorRenderingLayerOuter:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-renderinglayer",sSelectorItemExterior:".nm-js-exterior",sSelectorItemExteriorOpen:".nm-js-exterior-open",sSelectorItemInterior:".nm-js-interior",sSelectorDisplayedRenderingImage:".nm-basket-image .nm-j-configurator-renderimage",sSelectorRenderingCounterCurrent:".nm-renderingcounter-current",sSelectorRenderingCounterTotal:".nm-renderingcounter-total",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorStageImage:".nm-renderinglayer-image",sSelectorStageImages:".nm-renderinglayer-stageimages",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active",sSelectorFirstStageImageWrapper:".nm-renderinglayer-imagewrapper:first-child",sSelectorActiveStageImage:".nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image",sSelectorThumbnailArea:".nm-renderinglayer-thumbnails",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorPlusButton:".nm-renderinglayer-item .nm-icon-plus",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorColorSelector:".nm-render-color-selector",sSelectorColorSelectorWrapper:".nm-render-color-selector-wrapper",sSelectorOptionsSelector:".nm-render-animation-selector",sSelectorCurrentColorIndicator:".selector-current-selected .nm-render-active-color"},Ie.isInteriorActive=function(t){var e=!1;return 0!==t.indexOf("interior")&&0!==t.indexOf("dashboard")&&0!==t.indexOf("rearseat")||(e=!0),e},Ie.isOpenActive=function(t){var e=!1;return t.indexOf("_open")>0&&(e=!0),e},Ie.getActiveImageSrc=function(t){t.interiorActive&&Ie.interiorImages.length>0?Ie.activeImageSrc=Ie.interiorImages[0].image:t.open&&Ie.exteriorOpenImages.length>0?Ie.activeImageSrc=Ie.exteriorOpenImages[0].image:Ie.exteriorImages.length>0?Ie.activeImageSrc=Ie.exteriorImages[0].image:Ie.activeImageSrc=""},Ie.getConfigurationAssets=function(){var t=r.c.getConfigurationAssets();(!t||Object.keys(t).length<=0)&&(t=SETUPS.get("nemo.default.data").configuration.assets),Ie.generateRenderingLayerInnerHtml(t),Ie.initListeners()},Ie.pollConfigurationAssets=function(){jQuery(Ie.oDefaults.sSelectorRenderingLayer).length>0?console.log("RL: abort poll request"):Ie.getConfigurationAssets()},Ie.parseRenderImageTypeFromHash=function(t){var e,n,i;return!!t&&(n=/(renderingLayer)(\.(\S)+)?/,(i=t.match(n))&&(e=2===(i=(i=i[0].split("&")[0]).split(".")).length&&i[1]),e)},Ie.setAllowedItems=function(t){var e,n=SETUPS.get("nemo.hiddenAssets")?SETUPS.get("nemo.hiddenAssets").replace(/"/g,""):"";for(e in Ie.activeRenderings=[],n=n.length>0?n.split(","):[],console.log("hiddenAssets: "+n),t)e&&-1===n.indexOf(e)&&Ie.activeRenderings.push(e)},Ie.generateRenderingLayerInnerHtml=function(t){var e=r.c.getCarline(),n=r.c.getExtColor(),a=r.c.getConfiguration(),o=Ie.parseRenderImageTypeFromHash(window.location.hash),s={};o||(o=jQuery(Ie.oDefaults.sSelectorDisplayedRenderingImage).attr(Ie.oDefaults.sAttrDisplayedRenderingView)),Ie.setAllowedItems(t),-1===Ie.activeRenderings.indexOf(o)&&(o="exterior_front"),s.interiorActive=Ie.isInteriorActive(o),s.open=Ie.isOpenActive(o),Ie.preloadImages=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back"],Ie.preloadImagesOpen=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open"],Ie.exteriorImages=Ie.extractAssets(e,t,o,"exterior"),Ie.exteriorImages=Ie.exteriorImages.concat(Ie.extractAssets(e,t,o,"closeup")),Ie.exteriorOpenImages=Ie.extractAssets(e,t,o,"exterior_open"),Ie.exteriorOpenImages=Ie.exteriorOpenImages.concat(Ie.extractAssets(e,t,o,"closeup_open")),s.openavailable=Ie.exteriorOpenImages.length>0,Ie.interiorImages=Ie.extractAssets(e,t,o,"interior"),Ie.interiorImages=Ie.interiorImages.concat(Ie.extractAssets(e,t,o,"dashboard")),Ie.interiorImages=Ie.interiorImages.concat(Ie.extractAssets(e,t,o,"rearseat")),Ie.activeImageSrc||Ie.getActiveImageSrc(s),o||(o="exterior_front"),s.exterior=Ie.exteriorImages,s.exterior_open=Ie.exteriorOpenImages,s.interior=Ie.interiorImages,s.active_image_src=Ie.activeImageSrc,s.currentRenderingView=o,s.config=a,s.activeColor=n;var l=i.template.render('\n\t<div class="nm-layer-toolbar">\n\t\t<div class="nm-renderingcounter">\n\t\t\t&nbsp;<span class="nm-renderingcounter-current">01</span>|\n\t\t\t<span class="nm-renderingcounter-total">--</span>&nbsp;\n\t\t</div>\n\t\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="nm-layer-inner nm-renderinglayer-wrapper">\n\t\t<div class="nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}" style="{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}">\n\t\t\t<input type="radio" id="nm-renderinglayer-exteriortoggle" name="nm-renderinglayer-toggle-radio" value="exterior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-exterioropentoggle" name="nm-renderinglayer-toggle-radio" value="exterioropen" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-interiortoggle" name="nm-renderinglayer-toggle-radio" value="interior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n\t\t\t\x3c!--\n\t\t\t<input type="checkbox" id="nm-renderinglayer-opentoggle" name="nm-rl-toggle-open" class="nm-rl-toggle-open" {{? it.open}}checked{{?}} >\n\t\t--\x3e\n\t\t\t<div class="nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ } }}">\n\t\t\t\t<ul class="nm-renderinglayer-stagebrowse">\n\t\t\t\t\t<li class="nm-backarrow"><a href="" class="nm-b-icon nm-icon-back-arrow-l"></a></li>\n\t\t\t\t\t<li class="nm-nextarrow"><a href="" class="nm-b-icon nm-icon-next-arrow-l"></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<a href="" class="nm-renderinglayer-open nm-el-btn nm-el-btn-01">{{? it.open}}{{=window.i18n[\'rendering-layer.cabrio-close\']}}{{??}}{{=window.i18n[\'rendering-layer.cabrio-open\']}}{{?}}</a>\n\n\t \t\t\t<div class="nm-renderinglayer-stage">\n\t \t\t\t\t<ul class="nm-renderinglayer-stageimages">{{~ it.exterior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-view="{{=value.name}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.interior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}</ul>\n\t \t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="nm-renderinglayer-thumbnails clearfix">\n\t\t\t\t<ul class="nm-renderinglayer-thumbs">\n{{~ it.exterior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exteriortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exterioropentoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.interior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-interiortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-item nm-rl-item-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>',s);jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).html(l)},Ie.generateRenderingLayerHtml=function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e="";return 975>t&&(e=' style="width: '+1.435897435897436*t+'px;"'),'<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"'+e+"></div></div>"},Ie.addEvents=function(){t.clientLayer.register("renderingLayer",Ie.generateRenderingLayerHtml),Ie.eventBus.on(t.appEvents.LAYER_LOADED,Ie.handler),Te.initialized=!0},Te.dispose=function(){Ie.eventBus.off(t.appEvents.LAYER_LOADED,Ie.handler)},Te.disableFor3D=function(){jQuery(Ie.oDefaults.sSelectorOpenButton).off("click",Ie.handlerOpenToggle),jQuery(Ie.oDefaults.sSelectorBack).off("click",Ie.handlerBackClick),jQuery(Ie.oDefaults.sSelectorNext).off("click",Ie.handlerNextClick),jQuery(Ie.oDefaults.sSelectorThumbnail).off("click",Ie.handlerThumbnailClick),jQuery(Ie.oDefaults.sSelectorStageImage).off("mousedown",Ie.activateSwipe),jQuery(Ie.oDefaults.sSelectorStageImage).off("touchstart",Ie.activateSwipe)},Ie.handler=function(){jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).length>0&&Ie.pollConfigurationAssets()},Ie.initListeners=function(){Ie.interiorToggle=document.getElementById(Ie.oDefaults.sIdToggleInterior),Ie.exteriorOpenToggle=document.getElementById(Ie.oDefaults.sIdToggleExteriorOpen),Ie.exteriorToggle=document.getElementById(Ie.oDefaults.sIdToggleExterior),jQuery(Ie.oDefaults.sSelectorOpenButton).off("click",Ie.handlerOpenToggle),jQuery(Ie.oDefaults.sSelectorBack).off("click",Ie.handlerBackClick),jQuery(Ie.oDefaults.sSelectorNext).off("click",Ie.handlerNextClick),jQuery(Ie.oDefaults.sSelectorThumbnail).off("click",Ie.handlerThumbnailClick),jQuery(Ie.oDefaults.sSelectorPlusButton).off("click",Ie.handlerPlusButtonClick),""===jQuery(Ie.oDefaults.sSelectorStageImage).first().attr("src")&&Ie.pollConfigurationAssets(),Ie.updateCounter(),jQuery(Ie.oDefaults.sSelectorOpenButton).on("click",Ie.handlerOpenToggle),jQuery(Ie.oDefaults.sSelectorBack).on("click",Ie.handlerBackClick),jQuery(Ie.oDefaults.sSelectorNext).on("click",Ie.handlerNextClick),jQuery(Ie.oDefaults.sSelectorThumbnail).on("click",Ie.handlerThumbnailClick),jQuery(Ie.oDefaults.sSelectorPlusButton).on("click",Ie.handlerPlusButtonClick),Ie.exteriorOpenToggle&&Ie.exteriorOpenToggle.checked&&Ie.preloadDefinedImages(Ie.preloadImagesOpen,"exterior_open"),Ie.exteriorToggle&&Ie.exteriorToggle.checked&&Ie.preloadDefinedImages(Ie.preloadImages,"exterior"),Ie.activateSwipeOrDrag(),jQuery(window).on("resize",Ie.resizeLayer),Ie.resizeLayer(),Ie.eventBus.emit(t.appEvents.RENDERINGLAYER_LOADED)},Ie.determineImageObjectsForArea=function(t){return"interior"===t?Ie.interiorImages:"exterior_open"===t?Ie.exteriorOpenImages:Ie.exteriorImages},Ie.preloadDefinedImages=function(t,e){var n,i,r=Ie.determineImageObjectsForArea(e);for(n=0,i=r.length;n<i;n++)t.indexOf(r[n].name)>=0&&((new Image).src=r[n].image)},Ie.activateSwipeOrDrag=function(){var t,e=document.getElementById(Ie.oDefaults.sIdToggleExterior),n=document.getElementById(Ie.oDefaults.sIdToggleExteriorOpen);jQuery(Ie.oDefaults.sSelectorStageImage).off("mousedown",Ie.activateSwipe),jQuery(Ie.oDefaults.sSelectorStageImage).off("touchstart",Ie.activateSwipe),jQuery(Ie.oDefaults.sSelectorStageImage).off("mousedown",Ie.activateDrag),jQuery(Ie.oDefaults.sSelectorStageImage).off("touchstart",Ie.activateDrag),jQuery(document).off("mouseup",Ie.deactivateDrag),jQuery(document).off("touchend",Ie.deactivateDrag),jQuery(document).off("mouseup",Ie.deactivateSwipe),jQuery(document).off("touchend",Ie.deactivateSwipe),t=n&&n.checked?jQuery(Ie.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Ie.oDefaults.sSelectorItemExterior).length,(e&&e.checked||n&&n.checked)&&t>=Ie.min360ImgCount?(jQuery(Ie.oDefaults.sSelectorStageImage).on("mousedown",Ie.activateDrag),jQuery(Ie.oDefaults.sSelectorStageImage).on("touchstart",Ie.activateDrag),jQuery(document).on("mouseup",Ie.deactivateDrag),jQuery(document).on("touchend",Ie.deactivateDrag)):(jQuery(Ie.oDefaults.sSelectorStageImage).on("mousedown",Ie.activateSwipe),jQuery(Ie.oDefaults.sSelectorStageImage).on("touchstart",Ie.activateSwipe),jQuery(document).on("mouseup",Ie.deactivateSwipe),jQuery(document).on("touchend",Ie.deactivateSwipe))},Ie.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},Ie.getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Ie.fitToWidth=function(t,e,n,i){1400>t&&(i*e<=n?jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).outerWidth(i*e):jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).outerWidth(n))},Ie.resizeLayer=function(){var e=Ie.getViewportHeight(),n=jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).outerHeight(),i=jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).outerWidth(),r=i/n,a=Ie.getViewportWidth();n>e?jQuery(Ie.oDefaults.sSelectorRenderingLayerOuter).outerWidth(e*r):Ie.fitToWidth(i,r,a,e),Ie.eventBus.emit(t.appEvents.RENDERINGLAYER_RESIZED)},Ie.calculateTotalItems=function(){var t=document.getElementById(Ie.oDefaults.sIdToggleExteriorOpen),e=document.getElementById(Ie.oDefaults.sIdToggleInterior);return e&&e.checked?jQuery(Ie.oDefaults.sSelectorItemInterior).length:t&&t.checked?jQuery(Ie.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Ie.oDefaults.sSelectorItemExterior).length},Ie.calculateCurrentItem=function(t){var e=document.getElementById(Ie.oDefaults.sIdToggleExteriorOpen),n=document.getElementById(Ie.oDefaults.sIdToggleInterior);return n&&n.checked?Ie.calculateCurrentPosition(Ie.oDefaults.sSelectorItemInterior,t):e&&e.checked?Ie.calculateCurrentPosition(Ie.oDefaults.sSelectorItemExteriorOpen,t):Ie.calculateCurrentPosition(Ie.oDefaults.sSelectorItemExterior,t)},Ie.updateCounter=function(){var t=Ie.calculateTotalItems(),e=Ie.calculateCurrentItem(t);void 0!==t&&(t=t<10?"0"+t:t,e=e<10?"0"+e:e,jQuery(Ie.oDefaults.sSelectorRenderingCounterTotal).html(t),jQuery(Ie.oDefaults.sSelectorRenderingCounterCurrent).html(e))},Ie.calculateCurrentPosition=function(t,e){var n,i=jQuery(t);for(n=0;n<e;n++)if(i.eq(n).hasClass(Ie.oDefaults.sClassActive))return n+1},Ie.activateDrag=function(t){jQuery(Ie.oDefaults.sSelectorStageImages).hasClass(Ie.oDefaults.sClassAnimate)||("touchstart"===t.type?Ie.swipeX=t.originalEvent.pageX:Ie.swipeX=t.pageX,jQuery(document).on("mousemove",Ie.drag),jQuery(document).on("touchmove",Ie.drag))},Ie.deactivateDrag=function(){var t=jQuery(Ie.oDefaults.sSelectorActiveStageImage).attr("data-renderimage-view");jQuery(document).off("mousemove",Ie.drag),jQuery(document).off("touchmove",Ie.drag),jQuery(Ie.oDefaults.sSelectorThumbnail).removeClass(Ie.oDefaults.sClassActive),jQuery(Ie.oDefaults.sSelectorThumbnail+"."+t).addClass(Ie.oDefaults.sClassActive)},Ie.activateSwipe=function(t){"touchstart"===t.type?Ie.swipeX=t.originalEvent.pageX:Ie.swipeX=t.pageX,jQuery(document).on("mousemove",Ie.swipe),jQuery(document).on("touchmove",Ie.swipe)},Ie.deactivateSwipe=function(){jQuery(document).off("mousemove",Ie.swipe),jQuery(document).off("touchmove",Ie.swipe)},Ie.retrieveCurrentPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Ie.doLeftDragAction=function(t){t.removeClass(Ie.oDefaults.sClassActive),t.prev().attr("data-view")&&t.prev().attr("data-view").indexOf("exterior")>=0?t.prev().addClass(Ie.oDefaults.sClassActive):t.prev().prev().addClass(Ie.oDefaults.sClassActive)},Ie.doRightDragAction=function(t){t.next().length>0&&t.next().attr("data-view")&&t.next().attr("data-view").indexOf("exterior")>=0?(t.removeClass(Ie.oDefaults.sClassActive),t.next().addClass(Ie.oDefaults.sClassActive)):t.attr("data-view")&&t.attr("data-view").indexOf("closeup")>=0&&(t.removeClass(Ie.oDefaults.sClassActive),jQuery(Ie.oDefaults.sSelectorFirstStageImageWrapper).addClass(Ie.oDefaults.sClassActive))},Ie.doDragAction=function(t,e){var n=jQuery(Ie.oDefaults.sSelectorActiveStageImageWrapper);e&&n.prev().length>0?Ie.doLeftDragAction(n):t&&Ie.doRightDragAction(n)},Ie.drag=function(t){var e=!1,n=!1,i=!1,r=Ie.retrieveCurrentPos(t);r>=Ie.swipeX+55?(e=!0,n=!0,Ie.swipeX+=55):r<=Ie.swipeX-55&&(e=!0,i=!0,Ie.swipeX-=55),e&&Ie.doDragAction(i,n)},Ie.getEventPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Ie.swipe=function(t){var e=Ie.getEventPos(t);e>=Ie.swipeX+5?(Ie.deactivateSwipe(t),Ie.handlerBackClick(t)):e<=Ie.swipeX-5&&(Ie.deactivateSwipe(t),Ie.handlerNextClick(t))},Ie.determineCarlineFallbackGroup=function(t){var e=t.charAt(0);return 0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},Ie.getFallbackThumb=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg"},Ie.getFallbackImg=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg"},Ie.getRenderImageType=function(t,e){var n="thumbnail";return t[e].hasOwnProperty("thumbnail.16-9")?n="thumbnail.16-9":t[e].hasOwnProperty("thumbnail.new")&&(n="thumbnail.new"),n},Ie.getThumbnail=function(t,e,n,i){var r=t[e][i];return void 0!==r&&(r=-1===r.indexOf("?")?"http://mediaservice.audi.com/media"+r+"?alt="+n:"http://mediaservice.audi.com/media"+r),r},Ie.getFullImg=function(t,e,n){let i;return t&&e&&t.hasOwnProperty(e)&&t[e]?(i=t[e].hasOwnProperty("fullscreen.new")?t[e]["fullscreen.new"]:t[e].fullscreen||"",i?(i="http://mediaservice.audi.com/media"+i,i&&-1===i.indexOf("?")&&(i+="?alt="+n),i):null):""},Ie.checkForActiveImage=function(t,e,n){t===e&&(Ie.activeImageSrc=n)},Ie.compliesWithCondition=function(t,e,n,i){var r=!1;return 0===e.indexOf(n)&&t.hasOwnProperty(e)&&Ie.activeRenderings.indexOf(e)>=0&&(i&&e.indexOf("_open")>0||!i&&e.indexOf("_open")<0)&&(r=!0),r},Ie.determineAssetType=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t},Ie.isOpen=function(t){var e=!1;return t.indexOf("_open")>=0&&(e=!0),e},Ie.extractAssets=function(t,e,n,i){var r,a,o,s,l,c,u=[],d=Ie.determineCarlineFallbackGroup(t),m=Ie.determineAssetType(i),g=Ie.isOpen(i);for(c in e)e[c]&&Ie.compliesWithCondition(e,c,m,g)&&(s=Ie.getFallbackThumb(d,c),o=Ie.getFallbackImg(d,c),l=Ie.getRenderImageType(e,c),a=Ie.getThumbnail(e,c,s,l),(r=Ie.getFullImg(e,c,o))&&(Ie.checkForActiveImage(c,n,r),u.push({name:c,image:r,thumbnail:a,type:l})));return Ie.sortThumbs(m,g,u)},Ie.customArraySort=function(t,e){var n=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back","closeup_lights","closeup_wheels","interior","dashboard","rearseat"];return e&&(n=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open","closeup_lights_open","closeup_wheels_open","interior","dashboard","rearseat"]),function(e,i){return n.indexOf(e[t])<n.indexOf(i[t])?-1:1}},Ie.sortThumbs=function(t,e,n){return n.sort(Ie.customArraySort("name",e))},Ie.toggleCheckAndPreload=function(){Ie.exteriorOpenToggle.checked?(Ie.exteriorToggle.checked=!0,Ie.preloadDefinedImages(Ie.preloadImages,"exterior")):(Ie.exteriorOpenToggle.checked=!0,Ie.preloadDefinedImages(Ie.preloadImagesOpen,"exterior_open"))},Ie.setDefaultActiveThumbnail=function(){jQuery(Ie.oDefaults.sSelectorRenderingLayer).hasClass(Ie.oDefaults.sClassCabrioOpen)?jQuery(Ie.oDefaults.sSelectorItemExteriorOpen).first().addClass(Ie.oDefaults.sClassActive):jQuery(Ie.oDefaults.sSelectorItemExterior).first().addClass(Ie.oDefaults.sClassActive)},Ie.retrieveCorrespondingCabrioKey=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t+"_open"},Ie.handlerOpenToggle=function(t){var e,n,i=jQuery(Ie.oDefaults.sSelectorThumbnailActive),r=i.attr("data-key");t.preventDefault(),jQuery(Ie.oDefaults.sSelectorThumbnailArea).addClass(Ie.oDefaults.sClassNoThumbnailAnimation),Ie.toggleCheckAndPreload(),setTimeout((function(){jQuery(Ie.oDefaults.sSelectorThumbnailArea).removeClass(Ie.oDefaults.sClassNoThumbnailAnimation)}),50),0===i.length&&Ie.setDefaultActiveThumbnail(),jQuery(Ie.oDefaults.sSelectorRenderingLayer).hasClass(Ie.oDefaults.sClassCabrioOpen)?(jQuery(Ie.oDefaults.sSelectorRenderingLayer).removeClass(Ie.oDefaults.sClassCabrioOpen),jQuery(Ie.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-open"])):(jQuery(Ie.oDefaults.sSelectorRenderingLayer).addClass(Ie.oDefaults.sClassCabrioOpen),jQuery(Ie.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-close"])),r&&(e=Ie.retrieveCorrespondingCabrioKey(r),n=jQuery("."+e),Ie.activateImage(n,!1,!1))},Te.determinePrevFromActive=function(t){var e;return t.hasClass(Ie.oDefaults.sClassItemExterior)?e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ie.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Ie.oDefaults.sClassItemExteriorOpen)?e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ie.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Ie.oDefaults.sClassItemInterior)&&(e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ie.oDefaults.sSelectorItemInterior).get(0)),e},Te.determineDefaultPrev=function(){return Ie.interiorToggle.checked?jQuery(Ie.oDefaults.sSelectorItemInterior).last().get(0):Ie.exteriorOpenToggle&&Ie.exteriorOpenToggle.checked?jQuery(Ie.oDefaults.sSelectorItemExteriorOpen).last().get(0):jQuery(Ie.oDefaults.sSelectorItemExterior).last().get(0)},Ie.handlerBackClick=function(t){var e,n=jQuery(Ie.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Te.determinePrevFromActive(n)),void 0===e&&(e=Te.determineDefaultPrev()),Ie.activateImage(e,!0,"prev")},Te.determineNextFromActive=function(t){var e;return t.hasClass(Ie.oDefaults.sClassItemExterior)?e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().next().children(Ie.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Ie.oDefaults.sClassItemExteriorOpen)?e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().next().children(Ie.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Ie.oDefaults.sClassItemInterior)&&(e=jQuery(Ie.oDefaults.sSelectorThumbnailActive).parent().next().children(Ie.oDefaults.sSelectorItemInterior).get(0)),e},Te.determineDefaultNext=function(){return Ie.interiorToggle.checked?jQuery(Ie.oDefaults.sSelectorItemInterior).first().get(0):Ie.exteriorOpenToggle&&Ie.exteriorOpenToggle.checked?jQuery(Ie.oDefaults.sSelectorItemExteriorOpen).first().get(0):jQuery(Ie.oDefaults.sSelectorItemExterior).first().get(0)},Ie.handlerNextClick=function(t){var e,n=jQuery(Ie.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Te.determineNextFromActive(n)),void 0===e&&(e=Te.determineDefaultNext()),Ie.activateImage(e,!0,"next")},Ie.handlerThumbnailClick=function(){jQuery(this).hasClass(Ie.oDefaults.sClassActive)||Ie.activateImage(this,!0,!1)},Ie.handlerPlusButtonClick=function(t){var e=jQuery(this).parent().parent().find(".nm-rl-placeholder"),n=jQuery(this).parent().parent().find(".nm-renderinglayer-expander");t.preventDefault(),e.trigger("click"),n.trigger("click")},Ie.doStageAnimation=function(t){var e=jQuery(".ie8").length>0,n=jQuery(".ie9").length>0;e||n?jQuery(Ie.oDefaults.sSelectorStageImages).animate({left:t},500):jQuery(Ie.oDefaults.sSelectorStageImages).css("left",t)},Ie.determineAnimationDirection=function(t,e,n){var i=!1;return!1===e?n.parent().prevAll().find(t).length>0&&(i=!0):"prev"===e&&(i=!0),i},Ie.activateImage=function(t,e,n){var i=jQuery(Ie.oDefaults.sSelectorThumbnailActive),r=jQuery(t).attr("data-key"),a=jQuery(".nm-rendersource-"+r),o=jQuery(".nm-rendersource-"+i.attr("data-key")).closest(".nm-renderinglayer-imagewrapper"),s=a.closest(".nm-renderinglayer-imagewrapper"),l=!1;jQuery(Ie.oDefaults.sSelectorStageImages).hasClass(Ie.oDefaults.sClassAnimate)||(jQuery(Ie.oDefaults.sSelectorThumbnail).removeClass(Ie.oDefaults.sClassActive),jQuery(t).addClass(Ie.oDefaults.sClassActive),!0===e?((l=Ie.determineAnimationDirection(t,n,i))?(jQuery(Ie.oDefaults.sSelectorStageImages).css("left","-100%"),o.css("left","50%"),s.css("left","0")):(jQuery(Ie.oDefaults.sSelectorStageImages).css("left","0"),o.css("left","0"),s.css("left","50%")),s.addClass(Ie.oDefaults.sClassActive),setTimeout((function(){jQuery(Ie.oDefaults.sSelectorStageImages).addClass(Ie.oDefaults.sClassAnimate),l?Ie.doStageAnimation("0"):Ie.doStageAnimation("-100%"),setTimeout((function(){o.css("left","0"),o.removeClass(Ie.oDefaults.sClassActive),jQuery(Ie.oDefaults.sSelectorStageImages).css("left","0"),s.css("left","0"),Ie.activateSwipeOrDrag(),jQuery(Ie.oDefaults.sSelectorStageImages).removeClass(Ie.oDefaults.sClassAnimate)}),500)}),10)):(s.addClass(Ie.oDefaults.sClassActive),o.removeClass(Ie.oDefaults.sClassActive),Ie.activateSwipeOrDrag()),setTimeout((function(){Ie.updateCounter()}),50))},Te.initialize=function(t){Ie.eventBus=t,Ie.addEvents()};const xe={},Pe={__:xe};xe.oDefaults={sIdCanvas:"avecanvas",sClassActive:"nm-active",sClassAVE:"ave-layer",sSelectorOptionsWrapper:".nm-ave-animation-selector-wrapper",sSelectorStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorOuterRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active"},xe.disableStreamReadyEvent=function(){xe.eventBus.off(t.appEvents.AVE_STREAM_READY,Te.disableFor3D)},xe.handlerLayerClosed=function(){var t,e;jQuery(xe.oDefaults.sSelectorRenderingLayer).length>0&&jQuery(xe.oDefaults.sSelectorRenderingLayer).first().hasClass(xe.oDefaults.sClassAVE)&&(jQuery(".nm-3d-unloading").length>0?(e=(t=jQuery(".nm-3d-unloading").prev()).attr("id"),xe.moveOptionsIntoCanvas(),D.moveAVE(xe.oDefaults.sIdCanvas,e),t.addClass(xe.oDefaults.sClassActive)):(D.deactivate(xe.oDefaults.sIdCanvas),jQuery(xe.oDefaults.sSelectorOptionsWrapper).remove()))},xe.handlerThumbnailClick=function(){jQuery(this).hasClass(xe.oDefaults.sClassActive)||xe.activateView(this)},xe.handlerBackClick=function(t){var e,n=jQuery(xe.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Te.determinePrevFromActive(n)),void 0===e&&(e=Te.determineDefaultPrev()),xe.activateView(e)},xe.handlerNextClick=function(t){var e,n=jQuery(xe.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Te.determineNextFromActive(n)),void 0===e&&(e=Te.determineDefaultNext()),xe.activateView(e)},xe.activateView=function(t){var e=jQuery(xe.oDefaults.sSelectorThumbnailActive).attr("data-key"),n=jQuery(t).attr("data-key");jQuery(xe.oDefaults.sSelectorThumbnail).removeClass(xe.oDefaults.sClassActive),jQuery(t).addClass(xe.oDefaults.sClassActive),n!==e&&D.showPerspective(n)},xe.captureAVEDrag=function(e){jQuery("body").off("click",".nm-layer-wrapper",t.layerApi.wrapperClickHandler),jQuery(".nm-layer-wrapper").off("mousedown",xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("mousedown",xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").off("touchstart",xe.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("touchstart",xe.handlerAVEWrapperClick)},xe.activateThumbListeners=function(){jQuery(xe.oDefaults.sSelectorThumbnail).on("click",xe.handlerThumbnailClick),jQuery(xe.oDefaults.sSelectorBack).on("click",xe.handlerBackClick),jQuery(xe.oDefaults.sSelectorNext).on("click",xe.handlerNextClick),jQuery("#"+xe.oDefaults.sIdCanvas).off("mousedown",xe.captureAVEDrag),jQuery("#"+xe.oDefaults.sIdCanvas).off("touchstart",xe.captureAVEDrag),jQuery("#"+xe.oDefaults.sIdCanvas).on("mousedown",xe.captureAVEDrag),jQuery("#"+xe.oDefaults.sIdCanvas).on("touchstart",xe.captureAVEDrag)},xe.handlerAVEWrapperClick=function(){jQuery("body").off("mousedown",".nm-layer-wrapper",t.layerApi.wrapperClickHandler),jQuery("body").on("mousedown",".nm-layer-wrapper",t.layerApi.wrapperClickHandler),jQuery("body").off("touchstart",".nm-layer-wrapper",t.layerApi.wrapperClickHandler),jQuery("body").on("touchstart",".nm-layer-wrapper",t.layerApi.wrapperClickHandler)},xe.moveOptionsOutOfCanvas=function(){jQuery(xe.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery(xe.oDefaults.sSelectorStageWrapper))},xe.moveOptionsIntoCanvas=function(){jQuery(xe.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery("#"+xe.oDefaults.sIdCanvas))},xe.retrieveActiveViewPerspective=function(){var t=jQuery(xe.oDefaults.sSelectorActiveStageImageWrapper);return t&&t.attr("data-view")?t.attr("data-view"):"exterior_front"},xe.prepareDomForAVE=function(){null===document.getElementById(xe.oDefaults.sIdCanvas)&&jQuery(xe.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="'+xe.oDefaults.sIdCanvas+'" class="nm-md-ave-container"></div>'),xe.eventBus.on(t.appEvents.AVE_STREAM_READY,Te.disableFor3D),jQuery(xe.oDefaults.sSelectorOuterRenderingLayer).addClass(xe.oDefaults.sClassAVE)},xe.handlerInjectAVE=function(){var t=jQuery(xe.oDefaults.sSelectorAVEContainerActive);D.isAveAvailable()?(console.log("AVE - prepare dom"),xe.prepareDomForAVE(),t.length>0?(D.moveAVE(t.attr("id"),xe.oDefaults.sIdCanvas,!1),Te.disableFor3D()):D.activateAVE(xe.oDefaults.sIdCanvas,xe.retrieveActiveViewPerspective()),xe.handlerFollowupInjection()):console.log("renderinginjector - no matching carline")},xe.handlerFollowupInjection=function(){xe.activateThumbListeners(),xe.moveOptionsOutOfCanvas()},xe.handlerLayerOpened=function(){jQuery(xe.oDefaults.sSelectorRenderingLayer).length>0?p.isAve2CloudAvailable()?(xe.prepareDomForAVE(),xe.eventBus.emit("AVE2CLOUD.CONTAINER.READY")):D.isActiveCarline()?!0===D.isAveAvailable()?xe.handlerInjectAVE():xe.eventBus.on(t.appEvents.AVE_AVAILABLE,xe.handlerInjectAVE):(jQuery(xe.oDefaults.sSelectorOuterRenderingLayer).removeClass(xe.oDefaults.sClassAVE),jQuery("#"+xe.oDefaults.sIdCanvas).remove()):console.log("renderinginjector - no matching dom element")},xe.addEvents=function(){xe.eventBus.on(t.appEvents.RENDERINGLAYER_LOADED,xe.handlerLayerOpened),xe.eventBus.on("jslayer.close",xe.handlerLayerClosed),xe.eventBus.on("jslayer.close",xe.disableStreamReadyEvent)},Pe.initialize=function(t){xe.eventBus=t,xe.addEvents()};class Oe{constructor(){1===SETUPS.get("scope.nemo.configuration.force.initial.request")&&(this._alreadyCalled=!1,this._makeInitialCallForScsAttributesIfNecessary=this._makeInitialCallForScsAttributesIfNecessary.bind(this),a.stateRegistry.subscribeToStore(V.a,this._makeInitialCallForScsAttributesIfNecessary))}static get pollTime(){return 3e4}async _makeInitialCallForScsAttributesIfNecessary(t){if(t&&t.configuration&&!t.configuration["stock-car-attrs"]&&!1===this._alreadyCalled){a.stateRegistry.unsubscribeFromStore(V.a,this._makeInitialCallForScsAttributesIfNecessary),this._alreadyCalled=!0;try{await i.polling.wait(m.E.isDataInitialized,Oe.pollTime);K.V.getConfiguration()["stock-car-attrs"]||m.E.loadConfigurationByPrString(K.V.getPrString(),K.V.getSubsessionID()).then((function(t){K.V.adoptConfiguration(t)}))}catch(t){return console.log("scs initial attribute loading timeout"),{}}}}}const je=new Oe,Re={},Be={__:Re};Re.oDefaults={classBasketMatchingContainer:".nm-basket-matching",classBasketMatchingCarousel:".nm-basket-matching-car-slider",classBasketMatchingListSlider:".nm-basket-matching-list-slider",classBasketArrowLeft:".nm-basket-matching-prev",classBasketArrowRight:".nm-basket-matching-next",classBasketThumb:".nm-basket-matching-list-small ul li label"},Re.currentMatchingVehicles=null,Re.eventBus=null,Re.scDetailLinkPattern=null,Re.carouselItemCount=null,Re.carouselItemWidth=null,Re.carouselItemHeight=null,Re.carouselWidth=null,Re.carouselIndex=0,Re.carouselLabelStep=!1,Re.carouselItemWidthTransform=null,Re.addEvents=function(){Re.eventBus.on(t.appEvents.STOCKCAR_UPDATE,Re.handleStockcarResults),Re.addClickEvents()},Re.addClickEvents=function(){var t=i.dom.getEventDelegate("body");t.on("click",Re.oDefaults.classBasketArrowLeft,Re.prevArrowClickHandler),t.on("click",Re.oDefaults.classBasketArrowRight,Re.nextArrowClickHandler),t.on("click",Re.oDefaults.classBasketThumb,Re.thumbClickHandler)},Re.removeClickEvents=function(){var t=i.dom.getEventDelegate("body");t.off("click",Re.oDefaults.classBasketArrowLeft,Re.prevArrowClickHandler),t.off("click",Re.oDefaults.classBasketArrowRight,Re.nextArrowClickHandler),t.off("click",Re.oDefaults.classBasketThumb,Re.thumbClickHandler)},Re.handlePageLoaded=function(){Re.currentMatching&&document.querySelector(Re.oDefaults.selectorModuleContainer)&&Re.handleStockcarResults(Re.currentMatching)},Re.handleStockcarResults=function(t){var e;t&&(Re.currentMatchingVehicles=t.vehicleBasic?t.vehicleBasic:[],e=Re.parseResonse(t),Re.renderTemplate(e))},Re.parseResonse=function(t){var e,n,i,r,a={cars:[]},o=t.vehicleBasic.length;for(e=0,n=o;e<n;e++)(i=t.vehicleBasic[e])&&(r={id:i.id,model:i.symbolicCarline.description,engine:i.modelCode.description,image:Re.setImageSrc(i),price:Re.getFormattedPrice(i.typedPrices,"retail"),link:Re.setDetailsURL(i.id),svdVersion:i.svdVersion,percentage:Math.round(i.percentage||i.displayPercentage)},a.cars.push(r));return a.result_link=Re.setResultsURL(t.filterExpression),a.totalCount=o,a},Re.setImageSrc=function(){let t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.pictures&&i.pictures.length&&(e=i.pictures.find((t=>"n5c01"===t.key)))?t=e.url:i.fallbackPictures&&i.fallbackPictures.length&&(n=i.fallbackPictures.find((t=>"render_16x96"===t.key)))&&(t=n.url),t},Re.setResultsURL=function(t){var e=Re.getResultsLinkUrl()||"";return e=e.replace(/SC_ATTR_FILTERS/i,t)},Re.getResultsLinkUrl=function(){var t=document.querySelector(Re.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-result-url"):null},Re.setDetailsURL=function(t){var e=Re.getDetailsLinkUrl()||"";return e=e.replace(/SC_VEHICLE_ID/i,t)},Re.getDetailsLinkUrl=function(){var t=document.querySelector(Re.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-detail-url"):null},Re.getFormattedPrice=function(t,e){for(var n=t.length;n--;)if(t[n].type===e)return t[n].formatted;return null},Re.renderTemplate=function(t){var e,n=document.querySelector(Re.oDefaults.classBasketMatchingContainer);n&&(n.innerHTML="",t.cars.length>1&&(e=i.template.render('{{~ it.cars :car :index }}\n<input type="radio" id="nm-basket-matching-list-car{{=index+1}}" name="nm-basket-matching-list-slider" class="nm-basket-matching-list-slider" data-index="{{=index}}" {{? index === 0}}checked="checked" {{?}} />\n{{~}}\n<label class="nm-basket-toggle-widgets-label-fullarea" for="nm-basket-toggle-widgets"></label>\n<label class="nm-basket-toggle-widgets-label" for="nm-basket-toggle-widgets">\n\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'basket.matching.headline\'] || "Verfügbare Neuwagen"}}</span>\n\t<svg class="nm-icon-arrow">\n\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t</svg>\n</label>\n<div class="nm-basket-matching-wrap">\n\t<div class="nm-basket-matching-car-slider">\n\n\t\t<div class="nm-basket-matching-next"></div>\n\t\t<div class="nm-basket-matching-prev"></div>\n\t\t<div class="nm-basket-matching-counter nm-el-lbl nm-el-lbl-01">\n\t\t\t<span class="nm-basket-matching-counter-current">1</span>/<span class="nm-basket-matching-counter-total">{{=it.totalCount}}</span>\n\t\t</div>\n\t\t<ul>\n\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t<li data-index="{{=index}}">\n\t\t\t\t\t<div class="nm-basket-matching-car-container">\n\t\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t\t<div {{? car.image !== \'undefined\' && car.image !== \'\' }} style="background-image: url({{=car.image}});" class="nm-basket-matching-car-image" {{??}} class="nm-basket-matching-car-image nm-basket-matching-car-fallback" {{?}} ></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t<div class="nm-basket-matching-car-info">\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">{{=car.model}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01">{{=car.engine}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01">{{=car.price}}</span>\n\n\t\t\t\t\t\t\t<div class="nm-basket-matching-circle" data-progress="{{=car.percentage}}">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t{{var circle_degree = parseInt(car.percentage * 1.8);}}\n\t\t\t\t\t\t\t\t{{var circle_degree_fix = parseInt(circle_degree * 2);}}\n\t\t\t\t\t\t\t\t{{var full_percentage = car.percentage<50 ? 0 : car.percentage;}}\n\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tclip: rect(0px, 25px, {{=full_percentage}}px, 0px);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask .fill {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask .fill.fix {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-fix-{{=index}} ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-fix-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t<div class="outer-circle"></div>\n\t\t\t\t\t\t\t\t<div class="circle-{{=index}}">\n\t\t\t\t\t\t\t\t\t<div class="mask full">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mask half">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="fill fix"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="inner-circle">{{=car.percentage}}%</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n\t<div class="nm-basket-matching-list-small-wrap">\n\t\t<div class="nm-basket-matching-list-small">\n\t\t\t<ul>\n\t\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for="nm-basket-matching-list-car{{=index+1}}" {{? !!car.image }} style="background-image: url({{=car.image}});" {{??}} class="nm-basket-matching-car-fallback" {{?}} data-index="{{=index}}"></label>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="nm-basket-matching-more-btn">\n\t\t<a href="{{=it.result_link}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv"><span>{{=window.i18n[\'basket.matching.button.label\'] || "Weitere Neuwagen"}}</span></a>\n\t</div>\n</div>',t),n.innerHTML=e,Re.initCarousel()))},Re.initCarousel=function(){var t=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul"),e=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul li:last-child");Re.carouselItemCount=parseInt(t.childNodes.length,10),Re.carouselItemWidthTransform=100/Re.carouselItemCount,Re.carouselItemWidth="100",Re.carouselWidth=100*Re.carouselItemCount+"%",t.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(-"+Re.carouselItemWidthTransform+"%);"),t.insertBefore(e,t.firstChild),i.swipe.register(Re.onSwipeFinishHandler,Re.oDefaults.classBasketMatchingCarousel,{swipedistance:50})},Re.getCurrentIndex=function(){var t=i.dom.getElementsArray(Re.oDefaults.classBasketMatchingListSlider),e=0;return t.forEach((function(t,n){t.checked&&(e=n)})),e},Re.setCurrentIndex=function(t){var e=Re.getCurrentIndex();t!==e&&(Re.updateThumbPosition(t),Re.updateCounter(t+1),Re.animation(e,t))},Re.nextArrowClickHandler=function(){var t=Re.getCurrentIndex();t=++t%Re.carouselItemCount,Re.setCurrentIndex(t)},Re.prevArrowClickHandler=function(){var t=Re.getCurrentIndex();(t=--t)<0&&(t=Re.carouselItemCount-1),Re.setCurrentIndex(t)},Re.onSwipeFinishHandler=function(t){if(t.direction&&0!==t.move)if(t.direction.horizontal===i.swipe.LEFT)Re.nextArrowClickHandler();else Re.prevArrowClickHandler()},Re.animation=function(t,e){var n;Re.removeClickEvents(),t<e?(n="next",0===t&&e===Re.carouselItemCount-1&&(n="prev")):(n="prev",t===Re.carouselItemCount-1&&0===e&&(n="next")),"prev"===n?Re.animatePrev(t,e):Re.animateNext(t,e)},Re.animatePrev=function(t,e){var n=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul"),r=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul li:last-child");i.dom.handleTransition(n).then((function(i){i.classList.remove("slide-transition"),t-e>1&&(r=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul li:last-child")),n.insertBefore(r,n.firstChild),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(-"+Re.carouselItemWidthTransform+"%);"),Re.addClickEvents()})),t-e>1?(n.insertBefore(r,n.firstChild),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(-"+2*Re.carouselItemWidthTransform+"%);"),n.classList.add("slide-transition"),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(0)")):(n.classList.add("slide-transition"),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(0)"))},Re.animateNext=function(t,e){var n=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul"),r=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul li:first-child");i.dom.handleTransition(n).then((function(n){n.classList.remove("slide-transition"),n.appendChild(r,n.firstChild),e-t>1&&(r=document.querySelector(Re.oDefaults.classBasketMatchingCarousel+" ul li:first-child"),n.appendChild(r,n.firstChild)),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(-"+Re.carouselItemWidthTransform+"%);"),Re.addClickEvents()})).catch((function(t){console.log("Promise not completed ",t)})),n.classList.add("slide-transition"),n.setAttribute("style","width:"+Re.carouselWidth+";transform: translate(-"+Re.carouselItemWidthTransform*(e-t<0?2:e-t+1)+"%);")},Re.thumbClickHandler=function(t){var e=parseInt(t.target.getAttribute("data-index"),10);Re.setCurrentIndex(e)},Re.updateThumbPosition=function(t){var e=i.dom.getElementsArray(".nm-basket-matching-list-slider");e.map((function(t){t.checked=!1})),e[t].checked=!0},Re.updateCounter=function(t){document.querySelector(".nm-basket-matching-counter-current").innerHTML=t},Be.initialize=function(t){Re.eventBus=t,Re.addEvents()};const Me={},Fe={__:Me};Me.oDefaults={classBasketMatchingContainer:".nm-basket-matching"},Me.eventBus=null,Me.matchingSize=6,Me.svdVersion=null,Me.stckSetups=null,Me.addEvents=function(){Me.eventBus.on(t.appEvents.CONFIG_UPDATE,Me.triggerStckRequest),Me.eventBus.on(t.appEvents.PAGE_READY,Me.triggerStckRequest)},Me.isMatchingActive=function(){const t=!!SETUPS.get("scope.nemo.scs-matching"),e=SETUPS.get("stockcar.context"),n=!!SETUPS.get("stockcar.scs.base.url"),i=!!SETUPS.get("stockcar.scs.market.path");return t&&!e&&n&&i},Me.initialize=function(){!0===Me.isMatchingActive()&&Me.getSVDVersion().then((function(){Me.triggerStckRequest(),Me.addEvents()}))},Me.getStckUrlSetup=function(t){return Me.stckSetups={},Me.stckSetups.baseUrl=SETUPS.get("stockcar.scs.base.url"),Me.stckSetups.market=SETUPS.get("stockcar.scs.market.path"),Me.stckSetups.versionId=Me.getStckVersionString(t),Me.stckSetups},Me.getStckVersionString=t=>{let e=SETUPS.get("stockcar.scs.default.version")?SETUPS.get("stockcar.scs.default.version")+"/":"",n=SETUPS.get("stockcar.scs.version.mapping");return n&&Object.keys(n).length>0&&(e="string"==typeof n[t]?n[t]+"/":e),e},Me.triggerStckRequest=function(){if(!0===Me.isMatchingActive())return Me.startStckRequests().then((t=>(Me.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:Me.svdVersion,Me.broadcastStckMatching(t)))).catch((t=>console.log(t)))},Me.startStckRequests=async function(){var t,e=Me.getMatchingUrl();if(e){const n=await Me.getSVDVersion();if(!(t=Me.getRequestParams(n)))return Promise.reject("missing SCS Attributes…");const i=new URLSearchParams(t),r=e+(e.indexOf("?")<0?"?":"&")+i.toString();return fetch(r,{credentials:"omit"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)}))}return Promise.reject("no version and matchUrl…")},Me.getBasketContainer=function(){return document.querySelector(Me.oDefaults.classBasketMatchingContainer)},Me.getMatchingAttributes=function(){var t,e=Me.getBasketContainer();return(t=r.c.getSCSmatchingAttributes())&&t.length>0?t.join(","):e&&e.getAttribute("data-attributes").replace(/[[\s\]']+/g,"")||null},Me.getRequestParams=function(t){var e=[],n=Me.getMatchingAttributes();return n&&n.length&&t?(e.push("svd="+t),e.push("size="+Me.matchingSize),e.push("attributes="+n),e=e.join("&")):null},Me.broadcastStckMatching=function(e){return Me.eventBus.emit(t.appEvents.STOCKCAR_UPDATE,e),e},Me.getVersionUrl=function(){var t,e=Me.stckSetups?Me.stckSetups:Me.getStckUrlSetup("version");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"version/"+e.market),t},Me.getMatchingUrl=function(){var t,e=Me.stckSetups?Me.stckSetups:Me.getStckUrlSetup("search");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"search/match/"+e.market),t},Me.getSVDVersion=function(){let t;return function(){return t?Me.svdVersion&&(t=Promise.resolve(Me.svdVersion)):t=Me.svdVersion?Promise.resolve(Me.svdVersion):Me.fetchSVDVersion(),t}}(),Me.fetchSVDVersion=function(){var t=Me.getVersionUrl();return Me.svdVersion=null,fetch(t,{credentials:"omit"}).then((t=>{if(t.ok)return t.json();throw new Error(t.statusText)})).then((function(t){if(Me.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:null,!Me.svdVersion)throw new TypeError("could not load svd-version");return Me.svdVersion})).catch((function(t){console.error("SVD Version error. Using stockcar.static.svd ",t)})).then((function(){return Me.svdVersion}))},Fe.initialize=function(t){Me.eventBus=t,Me.initialize()};var Ue=__webpack_require__(113);class ze{static get SEARCHPROVIDER_STORE_ID(){return"dbadSearchProviderStore"}static get SEARCHQUERY_STORE_ID(){return"dbadSearchQueryStore"}get searchResultStoreId(){return null}constructor(){a.stateRegistry.subscribeToStore(ze.SEARCHQUERY_STORE_ID,(t=>{this.performSearch(t.searchQuery)})),this.registerResultStore()}async registerResultStore(){this.searchResultStoreId&&(await this.waitForProviderStore(),a.stateRegistry.triggerAction(ze.SEARCHPROVIDER_STORE_ID,"addSearchProvider",{searchProvider:this.searchResultStoreId}))}waitForProviderStore(){return new Promise((t=>{a.stateRegistry.subscribeToStore(ze.SEARCHPROVIDER_STORE_ID,(()=>{t()}))}))}performSearch(t){throw new Error("Implement performSearch in Subclass. (searchQuery: "+t+")")}publishResult(t,e){a.stateRegistry.triggerAction(this.searchResultStoreId,"update",{result:e,searchQuery:t})}setPreventSubmit(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.stateRegistry.triggerAction(ze.SEARCHPROVIDER_STORE_ID,"preventSubmit",{preventSubmit:t})}}const Ve=new class extends ze{performSearch(t){t&&(this.setApplicationFlags(t),this.setDpuFlags(t))}setApplicationFlags(t){if(-1!==t.search(/^([a-z0-9]+)=((true)|(false))$/)){const e=/^([a-z0-9]+)=((true)|(false))$/.exec(t);J.state.triggerModeChange(e[1],e[2])}}setDpuFlags(t){if(-1!==t.search(/dpu_extra=(.*)/)){const e=/^dpu_extra=(.*)/.exec(t);m.E.setDpuExtra(e[1])}}},Ne={},Qe={__:Ne};Ne.oDefaults={ssButtonCompactMode:".nm-summary-list-toggle-btn",sSelectorSummaryTechDataContainer:".nm-summary-list-techdata-container",sSelectorSummaryTechDataMultiContainer:".nm-mediathek-description",sSelectorSummaryContainer:".nm-module-summary-engine",sSelectorSummaryContainerEngineIcons:".nm-summary-tech-icons",sSelectorSummaryListContainer:".nm-summary-list-container.nm-techdata-container",sSelectorSummaryWltpLink:".nm-module-summary-techdata-list .nm-wltp-link",sSelectorTechRow:".nm-techrow, .nm-j-techrow-data-entry",sSelectorCompactMode:"nm-is-compact-mode",hiddenClass:"nm-hidden",maxModelsinfoWaitTime:3e4,sButtonFullTechData:".nm-foldout-techdata-list-button-full-techdata",sButtonEngineCompare:".nm-foldout-techdata-list-button-engine-compare"},Ne.handlePageLoaded=function(t){var e=t&&t.domElement?t.domElement:document;Ne.bindClicks(e),Ne.patchMotorInfo(e)},Ne.bindClicks=function(t){Ne.summaryTechDataContainer=i.dom.getElementsArray(Ne.oDefaults.sSelectorSummaryTechDataContainer,t),Ne.buttonCompactMode=i.dom.getElementsArray(Ne.oDefaults.ssButtonCompactMode,t),Ne.summaryTechDataContainer.length>0&&Ne.buttonCompactMode.length>0&&(Ne.domDelegate.off("click",Ne.oDefaults.ssButtonCompactMode,Ne.handleToggleBtnClick),Ne.domDelegate.on("click",Ne.oDefaults.ssButtonCompactMode,Ne.handleToggleBtnClick))},Ne.handleLayerLoaded=function(t){var e=t&&t.element?t.element:document;Ne.bindClicks(e),Ne.patchMotorInfo(e)},Ne.handleConfigurationUpdates=function(){Qe.wait(r.c.isInitialized,Ne.oDefaults.maxModelsinfoWaitTime).then((function(){Ne.patchMotorInfo(document)}))},Ne.run=function(t,e,n,i,r){var a,o,s;o=0,(s=t())?i(s):a=setInterval((function(){(s=t())?(clearInterval(a),i(s)):o>e&&(clearInterval(a),r(new Error)),o+=n}),n)},Qe.wait=function(t,e,n){var i=n||50;return new Promise((function(n,r){Ne.run(t,e,i,n,r)}))},Ne.initialize=function(){Ne.addEvents()},Ne.addEvents=function(){Ne.eventBus.on(t.appEvents.PAGE_LOADED,Ne.handlePageLoaded),Ne.eventBus.on(t.appEvents.LAYER_LOADED,Ne.handleLayerLoaded),Ne.eventBus.on(t.appEvents.CONFIG_UPDATE,Ne.handleConfigurationUpdates),Ne.eventBus.on(t.appEvents.MODELSINFO_LOAD_COMPLETE,Ne.handlePageLoaded)},Ne.handleToggleBtnClick=function(t){t.preventDefault();const e=t.target;[...i.dom.closest(e,Ne.oDefaults.sSelectorSummaryTechDataMultiContainer).querySelectorAll(Ne.oDefaults.sSelectorSummaryTechDataContainer)].forEach((t=>{i.dom.isElement(t)&&(t.classList.contains(Ne.oDefaults.sSelectorCompactMode)?t.classList.remove(Ne.oDefaults.sSelectorCompactMode):t.classList.add(Ne.oDefaults.sSelectorCompactMode))}))},Ne.patchMotorInfo=function(t){var e,n,a,o,s,l,c,u=t,d=i.dom.getElement('[data-template="summary"]',u),m=r.c.getEngine(),g=Ne.getMotorTechdata(m);if(i.dom.isElement(d)&&g){for(o in g)for(e=g[o],a=i.dom.getElementsArray(".nm-j-summary-text-"+o+", .nm-j-configurator-techdata-"+o,d),n=0;n<a.length;n++)i.dom.isElement(a[n])&&Ne.patchDOMfragment(a[n],e);Ne.updateVisibilityWltpLinks(g),Ne.patchModelFootnotes(m,t)}Ne.hideInvisibleCategories(),s=i.dom.getElement(Ne.oDefaults.sButtonFullTechData,u),l=i.dom.getElement(Ne.oDefaults.sButtonEngineCompare,u),c=K.V.getModelsInfo(),i.dom.isElement(s)&&i.dom.isElement(l)&&c&&Object.keys(c).length>1&&(s.classList.add(Ne.oDefaults.hiddenClass),l.classList.remove(Ne.oDefaults.hiddenClass))},Ne.patchModelFootnotes=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;const n=K.V.getModelsInfoFootnotes(t),r=K.V.getModelsInfoSectionFootnotes(t);i.dom.getElementsArray(".nm-j-summary-footnote-text",e).forEach((t=>{const e=t.getAttribute("data-key");""!==e&&(n&&n[e]?t.innerHTML=n[e]:r&&r[e]&&(t.innerHTML=r[e]))}))},Ne.updateVisibilityWltpLinks=function(t){const e=i.dom.getElementsArray(Ne.oDefaults.sSelectorSummaryWltpLink);if(e.length>0){const n=Object.keys(t).filter((t=>-1!=t.indexOf("wltp-")));if(n.length>0){n.map((e=>t[e])).some((t=>""!=t&&null!=t))?e.forEach((t=>t.classList.remove("nm-hidden"))):e.forEach((t=>t.classList.add("nm-hidden")))}}},Ne.getMotorTechdata=function(t){const e=r.c.getModelsInfo(t),n=r.c.getTechdata();return Object.assign({},e,n)},Ne.patchDOMfragment=function(t,e){var n=i.dom.closest(t,Ne.oDefaults.sSelectorTechRow);i.dom.isElement(t)&&(e?(n&&n.classList&&n.classList.remove(Ne.oDefaults.hiddenClass),t.innerHTML=e):n&&n.classList&&n.classList.add(Ne.oDefaults.hiddenClass))},Ne.hideInvisibleCategories=function(){var t,e,n,r,a,o=i.dom.getElementsArray(Ne.oDefaults.sSelectorSummaryListContainer+", "+Ne.oDefaults.sSelectorSummaryContainer);if(o.length>0)for(e=0;e<o.length;e++){for(r=0,t=i.dom.getElementsArray(Ne.oDefaults.sSelectorTechRow,o[e]),n=0;n<t.length;n++)t[n].classList.contains(Ne.oDefaults.hiddenClass)&&r++;if(t.length!==r)o[e].classList.remove(Ne.oDefaults.hiddenClass);else{if(o[e].classList.contains("nm-module-summary-engine")&&(a=i.dom.getElement(Ne.oDefaults.sSelectorSummaryContainerEngineIcons,o[e]),i.dom.isElement(a)))continue;o[e].classList.add(Ne.oDefaults.hiddenClass)}}},Qe.initialize=function(t){Ne.eventBus=t,Ne.domDelegate=i.dom.getEventDelegate("body"),Ne.initialize()};const qe={categorizedWrapper:".nm-module-tiles-categorized-tilelist-container",uncategorizedWrapper:".nm-module-tiles-uncategorized-tilelist-container",categorizedHeadlineWrapper:"div.nm-module-tiles-categorized-group-headline-wrapper",uncategorizedHeadline:".nm-module-tiles-uncategorized-headline",categorizedTile:".nm-module-tiles-categorized-tile",categorizedGroupInfo:"div.nm-module-tiles-categorized-groupinfo",tile:".nm-module-tiles-uncategorized-tile, .nm-module-tiles-categorized-tile",categorizedTileInfo:".nm-module-tiles-categorized-tileinfo",uncategorizedTileInfo:".nm-module-tiles-uncategorized-tileinfo",configuratorItems:".nm-j-configurator-item",configuratorItemsList:".nm-module-tiles-categorized-tilelist, .nm-module-tiles-uncategorized-tilelist",categorizedConfiguratorItemsList:".nm-module-tiles-categorized-tilelist",uncategorizedConfiguratorItemsList:".nm-module-tiles-uncategorized-tilelist",categorizedTickMark:"svg.nm-module-tiles-categorized-icon-selected",uncategorizedTickMark:"svg.nm-module-tiles-uncategorized-icon-selected",fadeOutClass:"nm-tile-fadeout",groupMinPrice:".js-configurator-group .nm-j-configurator-text-price"},He=["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"];class We extends HTMLElement{get allConfiguratorItems(){return[...this.querySelectorAll(qe.configuratorItems)]}get allTiles(){return[...this.querySelectorAll(qe.tile)]}get isSortingEnabled(){return!!this.sortOrder&&!!this.sortType&&"default"!==this.sortType}constructor(){super()}connectedCallback(){this.initElements(),this.addEvents()}disconnectedCallback(){this.removeEvents()}initElements(){this.groupMinPrice=this.querySelector(qe.groupMinPrice),this.sortOrder=this.getAttribute("data-sort-order"),this.sortType=this.getAttribute("data-sort-type"),r.c.isConfigurationStarted()&&this.handlePriceUpdate(),this.updateHeight(),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach((t=>t.addEventListener("load",(()=>this.updateHeight()))))}addEvents(){this.allTiles.forEach((t=>{t.addEventListener("mouseover",(t=>this.handleTileMouseOver(t))),t.addEventListener("mouseout",(()=>this.handleTileMouseOut()))}));const e=t.signal.getEmitter();e.addListener(t.appEvents.CARINFO_LOAD_COMPLETE,(()=>this.handlePriceUpdate())),e.addListener(t.appEvents.CONFIG_UPDATE,(()=>{this.updateHeightAndPrice(),this.applyStylesToTiles()})),e.addListener(t.appEvents.DOM_UPDATED,(()=>this.applyStylesToTiles())),e.addListener(t.appEvents.LAYER_CLOSED,(()=>{this.updateHeight(),this.applyStylesToTiles()})),e.addListener(t.appEvents.PAGE_READY,(()=>{this.updateHeight()})),window.addEventListener("resize",(()=>this.updateHeight())),window.addEventListener("load",(()=>this.updateHeight()))}removeEvents(){this.allTiles.forEach((t=>{t.removeEventListener("mouseover",(t=>this.handleTileMouseOver(t))),t.removeEventListener("mouseout",(()=>this.handleTileMouseOut()))}));const e=t.signal.getEmitter();e.removeListener(t.appEvents.CARINFO_LOAD_COMPLETE,(()=>this.updateHeightAndPrice())),e.removeListener(t.appEvents.CONFIG_UPDATE,(()=>this.updateHeightAndPrice())),e.removeListener(t.appEvents.DOM_UPDATED,(()=>this.applyStylesToTiles())),e.removeListener(t.appEvents.LAYER_CLOSED,(()=>this.updateHeight())),e.removeListener(t.appEvents.PAGE_READY,(()=>this.updateHeight())),window.removeEventListener("resize",(()=>this.updateHeight())),window.removeEventListener("load",(()=>this.updateHeight())),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach((t=>t.removeEventListener("load",(()=>this.updateHeight()))))}handleTileMouseOver(t){const e=t.currentTarget;this.updateHeight(),this.allTiles.forEach((t=>{t!==e?(this.fadeOutTile(t),t.nextElementSibling.style.display="none"):t.nextElementSibling.style.display="flex"}))}checkIfUncategorized(t){return t.includes("uncategorized")}showOrHideTile(t){const e=this.checkIfUncategorized(t.className)?qe.uncategorizedTickMark:qe.categorizedTickMark,n=getComputedStyle(t.querySelector(e)).display;t.nextElementSibling.style.display="none"!==n&&n?"flex":"none"}applyStylesToTiles(){this.allTiles.forEach((t=>{this.fadeInTile(t),this.showOrHideTile(t)}))}handleTileMouseOut(){this.applyStylesToTiles()}fadeInTile(t){t.classList.remove(qe.fadeOutClass)}fadeOutTile(t){t.classList.add(qe.fadeOutClass)}updateHeightAndPrice(){this.handlePriceUpdate(),this.updateHeight()}handlePriceUpdate(){if(this.isSortingEnabled){const t=this.getSortedItems();this.replaceItems(t)}this.groupMinPrice&&this.updateGroupMinPrice()}updateTileHeights(t){let{configuratorItemsList:e,tileInfo:n}=t;const i=this.querySelectorAll(`${e} > li ${n}`),r=this.querySelector(":scope > div").offsetHeight;for(const t of i)r>0&&(t.style.top=`${r}px`)}updateHeight(){const t=qe,e=this.checkIfUncategorized(this.firstElementChild.className),n={isUncategorized:e,wrapper:e?t.uncategorizedWrapper:t.categorizedWrapper,configuratorItemsList:e?t.uncategorizedConfiguratorItemsList:t.categorizedConfiguratorItemsList,groupInfo:e?null:t.categorizedGroupInfo,headline:e?t.uncategorizedHeadline:`${t.categorizedWrapper}>${t.categorizedHeadlineWrapper}`,tileInfo:e?t.uncategorizedTileInfo:t.categorizedTileInfo};this.updateTileHeights(n)}updateGroupMinPrice(){const t=this.getVisibleConfiguratorItemIds();if(t.length>0){const e=r.c.getMinPriceForItemIds(t);this.groupMinPrice.innerHTML=e?`${window.i18n.from} ${e}`:`${window.i18n.from} ${window.i18n["standard-group-price"]}`}}getSortedItems(){const t=this.allConfiguratorItems;if("price"===this.sortType){const e=this.getSortedItemsByPrice(t);return this.getItemsWithStandardToFront(e)}return t}replaceItems(t){const e=this.querySelector(qe.configuratorItemsList),n=document.createDocumentFragment();t.forEach((t=>{n.appendChild(t)})),e.innerHTML="",e.appendChild(n)}getSortedItemsByPrice(t){return t.sort(((t,e)=>{const n=r.c.getItem(t.getAttribute("data-configurator-id")),i=r.c.getItem(e.getAttribute("data-configurator-id"));if(!n||!i)return 0;const a=We.getPriceValue(n),o=We.getPriceValue(i);return"ascending"===this.sortOrder?a-o:"descending"===this.sortOrder?o-a:void 0}))}getItemsWithStandardToFront(t){return t.sort(((t,e)=>{const n=r.c.getItem(t.getAttribute("data-configurator-id")),i=r.c.getItem(e.getAttribute("data-configurator-id"));return n&&i?We.isStatusStandardFlagSet(n)?-1:We.isStatusStandardFlagSet(i)?1:0:0}))}getVisibleConfiguratorItemIds(){return this.allConfiguratorItems.map((t=>t.getAttribute("data-configurator-id"))).filter((t=>{const e=r.c.getItem(t);return e&&-1===He.indexOf(e.status)}))}static isStatusStandardFlagSet(t){return t.status.match(/1$/)}static getPriceValue(t){return t.priceValue?t.priceValue:0}}void 0===window.customElements.get("audi-configurator-tile-list")&&window.customElements.define("audi-configurator-tile-list",We);class Ge extends HTMLElement{static get selectors(){return{hideButton:".nm-tooltip-hide",popup:".nm-tooltip-popup"}}static get classes(){return{visible:"nm-j-tooltip-visible",tipLeft:"nm-tip-left",tipRight:"nm-tip-right"}}constructor(){super()}connectedCallback(){this.popup=this.querySelector(Ge.selectors.popup),this.hideButton=this.querySelector(Ge.selectors.hideButton),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.addEventListener("click",this.handleTooltipClick.bind(this)),this.addEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.addEventListener("click",this.closeTooltip.bind(this))}removeEvents(){this.removeEventListener("click",this.handleTooltipClick.bind(this)),this.removeEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.removeEventListener("click",this.closeTooltip.bind(this))}handleTooltipClick(t){this.isCloseButton(t.target)||this.openTooltip()}isCloseButton(t){return t===this.hideButton}openTooltip(){this.popup.classList.add(Ge.classes.visible)}closeTooltip(){this.popup.classList.remove(Ge.classes.visible)}setPosition(){this.removePositionClass();const t=this.popup.getBoundingClientRect();t.left<0?this.classList.add(Ge.classes.tipLeft):t.left+t.width>window.innerWidth&&this.classList.add(Ge.classes.tipRight)}removePositionClass(){this.classList.remove(Ge.classes.tipRight,Ge.classes.tipLeft)}}window.customElements.get("audi-configurator-tooltip")||window.customElements.define("audi-configurator-tooltip",Ge);const Ye={closeAllTooltips:function(){[...document.querySelectorAll("."+Ge.classes.visible)].forEach((t=>{t.classList.remove(Ge.classes.visible)}))},handleTooltipOutsideClick:function(t){i.dom.isElementOutsideOfElementWithSelector(t.target,"audi-configurator-tooltip")&&this.closeAllTooltips()},initialize:function(){i.dom.getEventDelegate("body").on("click",this.handleTooltipOutsideClick.bind(this))}};var $e=__webpack_require__(71);const Xe={},Ke={__:Xe};Xe.oDefaults={sColors:"nm-j-visualizer-tiles-color",sRims:"nm-j-visualizer-tiles-rim",sCombiItem:".nm-j-visualizer-slide",sSelectorCombiContainer:".nm-j-visualizer-slides",sTilesSelector:".nm-j-visualizer-item",sTilesblockSelector:".nm-j-visualizer-tiles-block",sMenuSelectedClass:"nm-selected",sButtonSelector:".nm-j-preconfig-submit",sSlideActiveClass:"active",sSlideHiddenClass:"hidden"},Xe.timeoutID=null,Xe.timeoutDelay=1e3,Xe.handleConfigurationStartClick=function(e){let n,a,o,s=i.dom.getElement(Xe.oDefaults.sCombiItem+".active");Xe.cancelEvent(e),a=i.dom.getDataAttribute(s,"audicode"),o=i.dom.getDataAttribute(s,"prstring"),(a||o)&&(n={},a?n.audicode=a:n.prstring=o,m.E.loadConfigurationFromTeaser(n,"audicode.visualizer").then((function(){t.router.open("page",r.c.getCurrentCarlineUrl())})))},Xe.handleTileClick=function(t){let e,n,r,a,o;Xe.cancelEvent(t),e=i.dom.closest(t.target,Xe.oDefaults.sTilesSelector),n=e.getAttribute("data-color-index")||e.getAttribute("data-rim-index"),Xe.updateTileSelection(e),o=Xe.getSelectedColorAndRimIndex(e),r=i.dom.getElement(".nm-visualizer-slide.active"),a=i.dom.getElement('.nm-visualizer-slide[data-matrix-index="'+o+'"]'),Xe.hideSlide(r),Xe.resetActiveVideo(r),Xe.showSlide(a),Xe.updateActiveTileBar(e,73,55*(n-1))},Xe.showSlide=function(t){t.classList.remove("hidden"),t.classList.add("active")},Xe.hideSlide=function(t){t.classList.remove("active"),t.classList.add("hidden")},Xe.resetActiveVideo=function(t){let e,n=i.dom.getElement("video",t);i.dom.isElement(n)&&n.currentTime>0&&(n.load(),e=i.dom.getElement(".nm-mediaplayer",t),e.classList.remove("nm-video-playing"))},Xe.updateTileSelection=function(t){let e=i.dom.closest(t,Xe.oDefaults.sTilesblockSelector);i.dom.getElement("."+Xe.oDefaults.sMenuSelectedClass,e).classList.remove(Xe.oDefaults.sMenuSelectedClass),t.classList.add(Xe.oDefaults.sMenuSelectedClass)},Xe.getSelectedColorAndRimIndex=function(){let t,e;return t=i.dom.getElement(".nm-j-visualizer-tiles-color ."+Xe.oDefaults.sMenuSelectedClass).getAttribute("data-color-index"),e=i.dom.getElement(".nm-j-visualizer-tiles-rim ."+Xe.oDefaults.sMenuSelectedClass).getAttribute("data-rim-index"),t+"-"+e},Xe.handleTileHover=function(t){let e=i.dom.closest(t.target,Xe.oDefaults.sTilesSelector);Xe.updateActiveTileBar(e,e.clientWidth,e.offsetLeft),clearTimeout(Xe.timeoutID)},Xe.handleTileblockLeave=function(){clearTimeout(Xe.timeoutID),Xe.timeoutID=setTimeout((function(){i.dom.getElementsArray(Xe.oDefaults.sTilesSelector+"."+Xe.oDefaults.sMenuSelectedClass).forEach((function(t){Xe.updateActiveTileBar(t,t.clientWidth,t.offsetLeft)}))}),Xe.timeoutDelay)},Xe.updateActiveTileBar=function(t,e,n){let r=i.dom.closest(t,Xe.oDefaults.sTilesblockSelector),a=i.dom.getElement(".nm-visualizer-tile-active-bar",r);a.style.left=n+"px",a.style.width=e+"px"},Xe.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},Xe.addEvents=function(){Xe.domEventDelegate.on("click",Xe.oDefaults.sTilesSelector,Xe.handleTileClick),Xe.domEventDelegate.on("click",Xe.oDefaults.sButtonSelector,Xe.handleConfigurationStartClick),Xe.domEventDelegate.on("mouseover",Xe.oDefaults.sTilesSelector,Xe.handleTileHover),Xe.domEventDelegate.on("mouseout",Xe.oDefaults.sTilesblockSelector,Xe.handleTileblockLeave)},Xe.removeEvents=function(){Xe.domEventDelegate.off("click",Xe.oDefaults.sTilesSelector,Xe.handleTileClick),Xe.domEventDelegate.off("click",Xe.oDefaults.sButtonSelector,Xe.handleConfigurationStartClick)},Ke.initialize=function(){Xe.domEventDelegate=i.dom.getEventDelegate("body"),Xe.init||Xe.addEvents(),Xe.init=!0};const Je={},Ze={__:Je};let tn,en,nn,rn=[];Je.oDefaults={sSelectorVTPlink:".nm-j-vtp-link"},Je.handleJSONresponse=function(t){var e,n,i,r=tn;e="",t&&t.num&&t.num>0?(r=en,e=" ("+t.num+")"):r=!1,rn=rn||[],rn.forEach((function(t){nn=t,r||(r=nn.getAttribute("data-vtp-original")),nn.setAttribute("href",r),n=nn.textContent.split(" (")[0],i=n+e,Je.replaceVtpLinkText(nn,i)}))},Je.replaceVtpLinkText=function(t,e){let n=t,i=!1;[...n.children].filter((t=>t.classList.contains("audi-link-s__text")||t.classList.contains("audi-link-m__text"))).every((t=>(t.textContent=e,i=!0,!1))),i||(n.textContent=e)},Je.sendJSONPrequest=function(t){var e=t.replace(/&callback=\?$/,"");Je.getJSONP(e).then((function(t){Je.handleJSONresponse(t)}),(function(t){console.log("VTP JSON request failed! ",t.message),Je.handleJSONresponse(null)}))},Je.getJSONP=function(t){return new Promise((function(e,n){var i,r,a,o=Je.oDefaults.xhrTimeout,s="jsonp_callback",l=window.setTimeout((function(){window[s]=function(){},n("JSONP Error")}),o);window[s]=function(t){window.clearTimeout(l),e(t)},t.indexOf(s)<0&&(r=t.indexOf("?")<0?"?":"&",i=t+r+"callback="+s),(a=document.createElement("script")).type="text/javascript",a.async=!0,a.src=i||t,document.getElementsByTagName("head")[0].appendChild(a)}))},Je.checkForIPHDealerLink=function(t){var e=t;return J.iph.inIPHMode()&&(e=J.iph.addPartnerId(e),e=J.iph.updateNWB(e)),e},Je.handleUpdates=function(){var t=r.c.getNwbLink(),e="";rn=i.dom.getElementsArray(Je.oDefaults.sSelectorVTPlink),rn.length&&(rn.forEach((function(t){nn=t,nn.getAttribute("data-vtp-original")||(e=nn.getAttribute("href"),nn.setAttribute("data-vtp-original",e))})),t&&(tn=Je.checkForIPHDealerLink(t.plainLink),en=Je.checkForIPHDealerLink(t.entryLink),Je.sendJSONPrequest(Je.checkForIPHDealerLink(t.queryLink))))},Je.addEvents=function(){Je.eventBus.on(t.appEvents.CONFIG_UPDATE,Je.handleUpdates),Je.eventBus.on(t.appEvents.LAYER_LOADED,Je.handleUpdates),Je.eventBus.on(t.appEvents.PAGE_LOADED,Je.handleUpdates)},Je.initialize=function(){Je.instance||(Je.addEvents(),Je.instance=!0)},Ze.initialize=function(t){Je.eventBus=t,Je.initialize()};const an={},on={__:an};an.device=i.device,an.oDefaults={classIsWallet:"nm-agent-is-wallet"},an.eventBus=null,an.addEvents=function(){an.eventBus.on(t.appEvents.PAGE_LOADED,an.handlePageLoaded)},an.handlePageLoaded=function(){an.isWalletEnabled()&&document.querySelector("body").classList.add(an.oDefaults.classIsWallet)},an.isWalletEnabled=function(){return an.device.isiPad()||an.device.isiPhone()},on.initialize=function(t){an.eventBus=t,an.addEvents(),an.handlePageLoaded()};class sn extends t.ModalLayerContentBase{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._closeLayer=this._closeLayer.bind(this),this.data=Object.assign({},t.dataset)}static get type(){return"EngineDisclaimerLayerElement"}static async getContent(t){return new sn(t)}connectedCallback(){this._render(),this.addEvents()}addEvents(){this.querySelector(".j-close").addEventListener("click",this._closeLayer)}static get buttonText(){return window.i18n["engine_disclaimer_layer.button.text"]}_closeLayer(t){t.preventDefault(),t.stopPropagation(),this._triggerClose()}_render(){const{headline:t,message:e}=this.data,n=sn.buttonText;this.innerHTML=`<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t\t\t\t\t\t<div class="nm-modal-layer__header">\n\t\t\t\t\t\t\t\t<div class="nm-modal-layer__headline-wrap">\n\t\t\t\t\t\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">${t}</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t\t\t\t\t\t<p class="nm-modal-layer__message audi-copy-m">${e}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__footer">\n\t\t\t\t\t\t\t\t<button class="audi-button nm-modal-layer__confirm-button j-close">\n\t\t\t\t\t\t\t\t\t<span class="audi-button__text">${n}</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`}}t.modalLayer.registerLayerType(sn),void 0===window.customElements.get("audi-engine-disclaimer-layer-element")&&window.customElements.define("audi-engine-disclaimer-layer-element",sn);const ln={},cn={__:ln};ln.oDefaults={sSelectorModule:".nm-md-yourpayment",sSelectorRateSwitchCart:"#nm-price-rate-switch",sSelectorRateSwitchYP:"#nm-price-rate-switch-yp",sSelectorTable:".nm-yourpayment-costs-list",sSelectorSnippetText:".nm-j-configurator-text-",sShowErrorClass:"nm-j-yourpayment-show-error"},ln.eventBus=null,ln.addEvents=function(){ln.eventBus.on(t.appEvents.PAGE_LOADED,ln.handleConfigUpdate),ln.eventBus.on(t.appEvents.CONFIG_UPDATE,ln.handleConfigUpdate)},ln.handleConfigUpdate=function(){var t;if(document.querySelector(ln.oDefaults.sSelectorModule)&&r.c.isConfigurable()){if(!(t=r.c.getConfiguration()))return;""===t.rate?document.querySelector(ln.oDefaults.sSelectorModule).classList.add(ln.oDefaults.sShowErrorClass):(document.querySelector(ln.oDefaults.sSelectorModule).classList.remove(ln.oDefaults.sShowErrorClass),ln.updatePriceMode(t))}},ln.updatePriceMode=function(t){var e,n=document.querySelector(ln.oDefaults.sSelectorRateSwitchYP),i=document.querySelector(ln.oDefaults.sSelectorRateSwitchCart);n&&i&&(i.getAttribute("checked")!==n.getAttribute("checked")&&n.setAttribute("checked",i.getAttribute("checked")),e=t.financeParameterList?t.financeParameterList:null,ln.popuplatePricesByRate(e))},ln.popuplatePricesByRate=function(t){var e,n,r,a=0,o=document.querySelector(ln.oDefaults.sSelectorTable);if(o&&t)for(e=t.length;a<e;)n=t[a].id,r=t[a].textAndUnit,n&&r&&i.dom.getElement(ln.oDefaults.sSelectorSnippetText+n,o).text(r),a++},cn.initialize=function(t){ln.eventBus=t,ln.addEvents(),ln.handleConfigUpdate()};const un={},dn={__:un};un.handleClickDownloadLink=function(t){t.preventDefault();const e=SETUPS.get("nemo.url.dpu")+"media-zip",n=r.c.getCarline()+".zip",i=un.getFetchOptions(n);return fetch(e,i).then((t=>{if(t.ok)return t.blob()})).then((t=>{const e=un.createFakeLink(n);e.href=window.URL.createObjectURL(t),e.click()})).catch((t=>{console.error(t)})),!0},un.getFetchOptions=t=>{const e=new URLSearchParams;return e.append("carline",r.c.getCarlineName()),e.append("images",un.getImageListFromConfigurationObject().join("\n")),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Disposition":`attachment; filename=${t}`},body:e}},un.createFakeLink=t=>{const e=document.createElement("a");return e.download=t,e.style.display="none",e.setAttribute("data-tracking-exclude",!0),document.body.appendChild(e),e},un.addEvents=function(){un.domEventDelegate.on("click",".nm-j-zip-download-delegate-click",un.handleClickDownloadLink)},un.getImageListFromConfigurationObject=function(){const t=r.c.getConfigurationAssets()||[],e=r.c.getRenderUrl(),n=[];for(const i of Object.keys(t)){const r="https:"+e+(t[i].fullscreen||t[i]["fullscreen.new"]||t[i]["stage.new"]);n.push(r)}return n},dn.initialize=function(t){un.eventBus=t,un.domEventDelegate=i.dom.getEventDelegate("body"),un.addEvents()},window.nemo=window.nemo||{},window.nemo.configurator=window.nemo.configurator||{},window.nemo.configurator.api=r.c,SETUPS&&(window.nemo.setups=SETUPS.__.stored);const mn=[d,p,D,T,U,W.n,Y,X.P,m.E,K.V,nt,it.x,ct,dt,xt,Ot,Bt,Ft,zt,qt,Nt,Wt,Zt,Yt,ve,ne,re,oe,le,ue,me,ge,pe,Ee,be,De,Le,Pe,Te,Fe,Be,Ue.Q,Qe,Ye,$e.Z,Ke,Ze,on,cn,dn],gn=t.signal.getEmitter();mn.forEach((t=>{try{t.initialize(gn)}catch(t){console.error(t)}}))})(),__webpack_exports__})()));
//# sourceMappingURL=bundle.configurator.js.map